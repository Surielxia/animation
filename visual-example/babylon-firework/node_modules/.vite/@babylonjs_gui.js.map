{
  "version": 3,
  "sources": ["../sourceES6/gui/src/2D/valueAndUnit.ts", "../sourceES6/gui/src/2D/measure.ts", "../sourceES6/gui/src/2D/math2D.ts", "../sourceES6/gui/src/2D/controls/control.ts", "../sourceES6/gui/src/2D/controls/container.ts", "../sourceES6/gui/src/2D/controls/rectangle.ts", "../sourceES6/gui/src/2D/controls/textBlock.ts", "../sourceES6/gui/src/2D/controls/image.ts", "../sourceES6/gui/src/2D/controls/button.ts", "../sourceES6/gui/src/2D/controls/stackPanel.ts", "../sourceES6/gui/src/2D/controls/checkbox.ts", "../sourceES6/gui/src/2D/controls/textWrapper.ts", "../sourceES6/gui/src/2D/controls/inputText.ts", "../sourceES6/gui/src/2D/controls/grid.ts", "../sourceES6/gui/src/2D/controls/colorpicker.ts", "../sourceES6/gui/src/2D/controls/ellipse.ts", "../sourceES6/gui/src/2D/controls/inputPassword.ts", "../sourceES6/gui/src/2D/controls/line.ts", "../sourceES6/gui/src/2D/multiLinePoint.ts", "../sourceES6/gui/src/2D/controls/multiLine.ts", "../sourceES6/gui/src/2D/controls/radioButton.ts", "../sourceES6/gui/src/2D/controls/sliders/baseSlider.ts", "../sourceES6/gui/src/2D/controls/sliders/slider.ts", "../sourceES6/gui/src/2D/controls/selector.ts", "../sourceES6/gui/src/2D/controls/scrollViewers/scrollViewerWindow.ts", "../sourceES6/gui/src/2D/controls/sliders/scrollBar.ts", "../sourceES6/gui/src/2D/controls/sliders/imageScrollBar.ts", "../sourceES6/gui/src/2D/controls/scrollViewers/scrollViewer.ts", "../sourceES6/gui/src/2D/controls/virtualKeyboard.ts", "../sourceES6/gui/src/2D/controls/displayGrid.ts", "../sourceES6/gui/src/2D/controls/sliders/imageBasedSlider.ts", "../sourceES6/gui/src/2D/controls/statics.ts", "../sourceES6/gui/src/2D/style.ts", "../sourceES6/gui/src/2D/advancedDynamicTexture.ts", "../sourceES6/gui/src/2D/adtInstrumentation.ts", "../sourceES6/gui/src/2D/xmlLoader.ts", "../sourceES6/gui/src/3D/vector3WithInfo.ts", "../sourceES6/gui/src/3D/controls/control3D.ts", "../sourceES6/gui/src/3D/controls/abstractButton3D.ts", "../sourceES6/gui/src/3D/controls/button3D.ts", "../sourceES6/gui/src/3D/controls/container3D.ts", "../sourceES6/gui/src/3D/controls/volumeBasedPanel.ts", "../sourceES6/gui/src/3D/controls/cylinderPanel.ts", "../sourceES6/gui/src/3D/materials/shaders/fluent.vertex.ts", "../sourceES6/gui/src/3D/materials/shaders/fluent.fragment.ts", "../sourceES6/gui/src/3D/materials/fluentMaterial.ts", "../sourceES6/gui/src/3D/controls/holographicButton.ts", "../sourceES6/gui/src/3D/controls/meshButton3D.ts", "../sourceES6/gui/src/3D/controls/planePanel.ts", "../sourceES6/gui/src/3D/controls/scatterPanel.ts", "../sourceES6/gui/src/3D/controls/spherePanel.ts", "../sourceES6/gui/src/3D/controls/stackPanel3D.ts", "../sourceES6/gui/src/3D/gui3DManager.ts"],
  "sourcesContent": ["import { AdvancedDynamicTexture } from \"./advancedDynamicTexture\";\r\n\r\n/**\r\n * Class used to specific a value and its associated unit\r\n */\r\nexport class ValueAndUnit {\r\n    private _value = 1;\r\n    private _originalUnit: number;\r\n    /**\r\n     * Gets or sets a value indicating that this value will not scale accordingly with adaptive scaling property\r\n     * @see https://doc.babylonjs.com/how_to/gui#adaptive-scaling\r\n     */\r\n    public ignoreAdaptiveScaling = false;\r\n\r\n    /**\r\n     * Creates a new ValueAndUnit\r\n     * @param value defines the value to store\r\n     * @param unit defines the unit to store\r\n     * @param negativeValueAllowed defines a boolean indicating if the value can be negative\r\n     */\r\n    public constructor(value: number,\r\n        /** defines the unit to store */\r\n        public unit = ValueAndUnit.UNITMODE_PIXEL,\r\n        /** defines a boolean indicating if the value can be negative */\r\n        public negativeValueAllowed = true) {\r\n        this._value = value;\r\n        this._originalUnit = unit;\r\n    }\r\n\r\n    /** Gets a boolean indicating if the value is a percentage */\r\n    public get isPercentage(): boolean {\r\n        return this.unit === ValueAndUnit.UNITMODE_PERCENTAGE;\r\n    }\r\n\r\n    /** Gets a boolean indicating if the value is store as pixel */\r\n    public get isPixel(): boolean {\r\n        return this.unit === ValueAndUnit.UNITMODE_PIXEL;\r\n    }\r\n\r\n    /** Gets direct internal value */\r\n    public get internalValue(): number {\r\n        return this._value;\r\n    }\r\n\r\n    /**\r\n     * Gets value as pixel\r\n     * @param host defines the root host\r\n     * @param refValue defines the reference value for percentages\r\n     * @returns the value as pixel\r\n     */\r\n    public getValueInPixel(host: AdvancedDynamicTexture, refValue: number): number {\r\n        if (this.isPixel) {\r\n            return this.getValue(host);\r\n        }\r\n\r\n        return this.getValue(host) * refValue;\r\n    }\r\n\r\n    /**\r\n     * Update the current value and unit. This should be done cautiously as the GUi won't be marked as dirty with this function.\r\n     * @param value defines the value to store\r\n     * @param unit defines the unit to store\r\n     * @returns the current ValueAndUnit\r\n     */\r\n    public updateInPlace(value: number, unit = ValueAndUnit.UNITMODE_PIXEL): ValueAndUnit {\r\n        this._value = value;\r\n        this.unit = unit;\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Gets the value accordingly to its unit\r\n     * @param host  defines the root host\r\n     * @returns the value\r\n     */\r\n    public getValue(host: AdvancedDynamicTexture): number {\r\n        if (host && !this.ignoreAdaptiveScaling && this.unit !== ValueAndUnit.UNITMODE_PERCENTAGE) {\r\n            var width: number = 0;\r\n            var height: number = 0;\r\n\r\n            if (host.idealWidth) {\r\n                width = (this._value * host.getSize().width) / host.idealWidth;\r\n            }\r\n\r\n            if (host.idealHeight) {\r\n                height = (this._value * host.getSize().height) / host.idealHeight;\r\n            }\r\n\r\n            if (host.useSmallestIdeal && host.idealWidth && host.idealHeight) {\r\n                return window.innerWidth < window.innerHeight ? width : height;\r\n            }\r\n\r\n            if (host.idealWidth) { // horizontal\r\n                return width;\r\n            }\r\n\r\n            if (host.idealHeight) { // vertical\r\n                return height;\r\n            }\r\n        }\r\n        return this._value;\r\n    }\r\n\r\n    /**\r\n     * Gets a string representation of the value\r\n     * @param host defines the root host\r\n     * @param decimals defines an optional number of decimals to display\r\n     * @returns a string\r\n     */\r\n    public toString(host: AdvancedDynamicTexture, decimals?: number): string {\r\n        switch (this.unit) {\r\n            case ValueAndUnit.UNITMODE_PERCENTAGE:\r\n                let percentage = this.getValue(host) * 100;\r\n\r\n                return (decimals ? percentage.toFixed(decimals) : percentage) + \"%\";\r\n            case ValueAndUnit.UNITMODE_PIXEL:\r\n                let pixels = this.getValue(host);\r\n                return (decimals ? pixels.toFixed(decimals) : pixels) + \"px\";\r\n        }\r\n\r\n        return this.unit.toString();\r\n    }\r\n\r\n    /**\r\n     * Store a value parsed from a string\r\n     * @param source defines the source string\r\n     * @returns true if the value was successfully parsed\r\n     */\r\n    public fromString(source: string | number): boolean {\r\n        var match = ValueAndUnit._Regex.exec(source.toString());\r\n\r\n        if (!match || match.length === 0) {\r\n            return false;\r\n        }\r\n\r\n        var sourceValue = parseFloat(match[1]);\r\n        var sourceUnit = this._originalUnit;\r\n\r\n        if (!this.negativeValueAllowed) {\r\n            if (sourceValue < 0) {\r\n                sourceValue = 0;\r\n            }\r\n        }\r\n\r\n        if (match.length === 4) {\r\n            switch (match[3]) {\r\n                case \"px\":\r\n                    sourceUnit = ValueAndUnit.UNITMODE_PIXEL;\r\n                    break;\r\n                case \"%\":\r\n                    sourceUnit = ValueAndUnit.UNITMODE_PERCENTAGE;\r\n                    sourceValue /= 100.0;\r\n                    break;\r\n            }\r\n        }\r\n\r\n        if (sourceValue === this._value && sourceUnit === this.unit) {\r\n            return false;\r\n        }\r\n\r\n        this._value = sourceValue;\r\n        this.unit = sourceUnit;\r\n\r\n        return true;\r\n    }\r\n\r\n    // Static\r\n    private static _Regex = /(^-?\\d*(\\.\\d+)?)(%|px)?/;\r\n    private static _UNITMODE_PERCENTAGE = 0;\r\n    private static _UNITMODE_PIXEL = 1;\r\n\r\n    /** UNITMODE_PERCENTAGE */\r\n    public static get UNITMODE_PERCENTAGE(): number {\r\n        return ValueAndUnit._UNITMODE_PERCENTAGE;\r\n    }\r\n\r\n    /** UNITMODE_PIXEL */\r\n    public static get UNITMODE_PIXEL(): number {\r\n        return ValueAndUnit._UNITMODE_PIXEL;\r\n    }\r\n}", "import { Matrix2D } from \"./math2D\";\r\nimport { Vector2 } from \"@babylonjs/core/Maths/math.vector\";\r\n\r\nlet tmpRect = [\r\n    new Vector2(0, 0),\r\n    new Vector2(0, 0),\r\n    new Vector2(0, 0),\r\n    new Vector2(0, 0),\r\n];\r\n\r\nlet tmpRect2 = [\r\n    new Vector2(0, 0),\r\n    new Vector2(0, 0),\r\n    new Vector2(0, 0),\r\n    new Vector2(0, 0),\r\n];\r\n\r\nlet tmpV1 = new Vector2(0, 0);\r\nlet tmpV2 = new Vector2(0, 0);\r\n\r\n/**\r\n * Class used to store 2D control sizes\r\n */\r\nexport class Measure {\r\n    /**\r\n     * Creates a new measure\r\n     * @param left defines left coordinate\r\n     * @param top defines top coordinate\r\n     * @param width defines width dimension\r\n     * @param height defines height dimension\r\n     */\r\n    public constructor(\r\n        /** defines left coordinate */\r\n        public left: number,\r\n        /** defines top coordinate  */\r\n        public top: number,\r\n        /** defines width dimension  */\r\n        public width: number,\r\n        /** defines height dimension */\r\n        public height: number) {\r\n\r\n    }\r\n\r\n    /**\r\n     * Copy from another measure\r\n     * @param other defines the other measure to copy from\r\n     */\r\n    public copyFrom(other: Measure): void {\r\n        this.left = other.left;\r\n        this.top = other.top;\r\n        this.width = other.width;\r\n        this.height = other.height;\r\n    }\r\n\r\n    /**\r\n     * Copy from a group of 4 floats\r\n     * @param left defines left coordinate\r\n     * @param top defines top coordinate\r\n     * @param width defines width dimension\r\n     * @param height defines height dimension\r\n     */\r\n    public copyFromFloats(left: number, top: number, width: number, height: number): void {\r\n        this.left = left;\r\n        this.top = top;\r\n        this.width = width;\r\n        this.height = height;\r\n    }\r\n\r\n    /**\r\n     * Computes the axis aligned bounding box measure for two given measures\r\n     * @param a Input measure\r\n     * @param b Input measure\r\n     * @param result the resulting bounding measure\r\n     */\r\n    public static CombineToRef(a: Measure, b: Measure, result: Measure) {\r\n        var left = Math.min(a.left, b.left);\r\n        var top = Math.min(a.top, b.top);\r\n        var right = Math.max(a.left + a.width, b.left + b.width);\r\n        var bottom = Math.max(a.top + a.height, b.top + b.height);\r\n        result.left = left;\r\n        result.top = top;\r\n        result.width = right - left;\r\n        result.height = bottom - top;\r\n    }\r\n\r\n    /**\r\n     * Computes the axis aligned bounding box of the measure after it is modified by a given transform\r\n     * @param transform the matrix to transform the measure before computing the AABB\r\n     * @param addX number to add to left\r\n     * @param addY number to add to top\r\n     * @param addWidth number to add to width\r\n     * @param addHeight number to add to height\r\n     * @param result the resulting AABB\r\n     */\r\n    public addAndTransformToRef(transform: Matrix2D, addX: number, addY: number, addWidth: number, addHeight: number, result: Measure) {\r\n        const left = this.left + addX;\r\n        const top = this.top + addY;\r\n        const width = this.width + addWidth;\r\n        const height = this.height + addHeight;\r\n\r\n        tmpRect[0].copyFromFloats(left, top);\r\n        tmpRect[1].copyFromFloats(left + width, top);\r\n        tmpRect[2].copyFromFloats(left + width, top + height);\r\n        tmpRect[3].copyFromFloats(left, top + height);\r\n\r\n        tmpV1.copyFromFloats(Number.MAX_VALUE, Number.MAX_VALUE);\r\n        tmpV2.copyFromFloats(0, 0);\r\n        for (var i = 0; i < 4; i++) {\r\n            transform.transformCoordinates(tmpRect[i].x, tmpRect[i].y, tmpRect2[i]);\r\n            tmpV1.x = Math.floor(Math.min(tmpV1.x, tmpRect2[i].x));\r\n            tmpV1.y = Math.floor(Math.min(tmpV1.y, tmpRect2[i].y));\r\n            tmpV2.x = Math.ceil(Math.max(tmpV2.x, tmpRect2[i].x));\r\n            tmpV2.y = Math.ceil(Math.max(tmpV2.y, tmpRect2[i].y));\r\n        }\r\n        result.left = tmpV1.x;\r\n        result.top = tmpV1.y;\r\n        result.width = tmpV2.x - tmpV1.x;\r\n        result.height = tmpV2.y - tmpV1.y;\r\n    }\r\n\r\n    /**\r\n     * Computes the axis aligned bounding box of the measure after it is modified by a given transform\r\n     * @param transform the matrix to transform the measure before computing the AABB\r\n     * @param result the resulting AABB\r\n     */\r\n    public transformToRef(transform: Matrix2D, result: Measure) {\r\n        this.addAndTransformToRef(transform, 0, 0, 0, 0, result);\r\n    }\r\n        /**\r\n     * Check equality between this measure and another one\r\n     * @param other defines the other measures\r\n     * @returns true if both measures are equals\r\n     */\r\n    public isEqualsTo(other: Measure): boolean {\r\n\r\n        if (this.left !== other.left) {\r\n            return false;\r\n        }\r\n\r\n        if (this.top !== other.top) {\r\n            return false;\r\n        }\r\n\r\n        if (this.width !== other.width) {\r\n            return false;\r\n        }\r\n\r\n        if (this.height !== other.height) {\r\n            return false;\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * Creates an empty measure\r\n     * @returns a new measure\r\n     */\r\n    public static Empty(): Measure {\r\n        return new Measure(0, 0, 0, 0);\r\n    }\r\n}", "import { Nullable } from \"@babylonjs/core/types\";\r\nimport { Vector2 } from \"@babylonjs/core/Maths/math.vector\";\r\nimport { Epsilon } from '@babylonjs/core/Maths/math.constants';\r\n\r\n/**\r\n * Class used to transport Vector2 information for pointer events\r\n */\r\nexport class Vector2WithInfo extends Vector2 {\r\n    /**\r\n     * Creates a new Vector2WithInfo\r\n     * @param source defines the vector2 data to transport\r\n     * @param buttonIndex defines the current mouse button index\r\n     */\r\n    public constructor(source: Vector2,\r\n        /** defines the current mouse button index */\r\n        public buttonIndex: number = 0) {\r\n        super(source.x, source.y);\r\n    }\r\n}\r\n\r\n/** Class used to provide 2D matrix features */\r\nexport class Matrix2D {\r\n    /** Gets the internal array of 6 floats used to store matrix data */\r\n    public m = new Float32Array(6);\r\n\r\n    /**\r\n     * Creates a new matrix\r\n     * @param m00 defines value for (0, 0)\r\n     * @param m01 defines value for (0, 1)\r\n     * @param m10 defines value for (1, 0)\r\n     * @param m11 defines value for (1, 1)\r\n     * @param m20 defines value for (2, 0)\r\n     * @param m21 defines value for (2, 1)\r\n     */\r\n    constructor(m00: number, m01: number, m10: number, m11: number, m20: number, m21: number) {\r\n        this.fromValues(m00, m01, m10, m11, m20, m21);\r\n    }\r\n\r\n    /**\r\n     * Fills the matrix from direct values\r\n     * @param m00 defines value for (0, 0)\r\n     * @param m01 defines value for (0, 1)\r\n     * @param m10 defines value for (1, 0)\r\n     * @param m11 defines value for (1, 1)\r\n     * @param m20 defines value for (2, 0)\r\n     * @param m21 defines value for (2, 1)\r\n     * @returns the current modified matrix\r\n     */\r\n    public fromValues(m00: number, m01: number, m10: number, m11: number, m20: number, m21: number): Matrix2D {\r\n        this.m[0] = m00; this.m[1] = m01;\r\n        this.m[2] = m10; this.m[3] = m11;\r\n        this.m[4] = m20; this.m[5] = m21;\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Gets matrix determinant\r\n     * @returns the determinant\r\n     */\r\n    public determinant(): number {\r\n        return this.m[0] * this.m[3] - this.m[1] * this.m[2];\r\n    }\r\n\r\n    /**\r\n     * Inverses the matrix and stores it in a target matrix\r\n     * @param result defines the target matrix\r\n     * @returns the current matrix\r\n     */\r\n    public invertToRef(result: Matrix2D): Matrix2D {\r\n        let l0 = this.m[0]; let l1 = this.m[1];\r\n        let l2 = this.m[2]; let l3 = this.m[3];\r\n        let l4 = this.m[4]; let l5 = this.m[5];\r\n\r\n        let det = this.determinant();\r\n        if (det < (Epsilon * Epsilon)) {\r\n            result.m[0] = 0; result.m[1] = 0;\r\n            result.m[2] = 0; result.m[3] = 0;\r\n            result.m[4] = 0; result.m[5] = 0;\r\n            return this;\r\n        }\r\n\r\n        let detDiv = 1 / det;\r\n\r\n        let det4 = l2 * l5 - l3 * l4;\r\n        let det5 = l1 * l4 - l0 * l5;\r\n\r\n        result.m[0] = l3 * detDiv; result.m[1] = -l1 * detDiv;\r\n        result.m[2] = -l2 * detDiv; result.m[3] = l0 * detDiv;\r\n        result.m[4] = det4 * detDiv; result.m[5] = det5 * detDiv;\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Multiplies the current matrix with another one\r\n     * @param other defines the second operand\r\n     * @param result defines the target matrix\r\n     * @returns the current matrix\r\n     */\r\n    public multiplyToRef(other: Matrix2D, result: Matrix2D): Matrix2D {\r\n        let l0 = this.m[0]; let l1 = this.m[1];\r\n        let l2 = this.m[2]; let l3 = this.m[3];\r\n        let l4 = this.m[4]; let l5 = this.m[5];\r\n\r\n        let r0 = other.m[0]; let r1 = other.m[1];\r\n        let r2 = other.m[2]; let r3 = other.m[3];\r\n        let r4 = other.m[4]; let r5 = other.m[5];\r\n\r\n        result.m[0] = l0 * r0 + l1 * r2; result.m[1] = l0 * r1 + l1 * r3;\r\n        result.m[2] = l2 * r0 + l3 * r2; result.m[3] = l2 * r1 + l3 * r3;\r\n        result.m[4] = l4 * r0 + l5 * r2 + r4; result.m[5] = l4 * r1 + l5 * r3 + r5;\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Applies the current matrix to a set of 2 floats and stores the result in a vector2\r\n     * @param x defines the x coordinate to transform\r\n     * @param y defines the x coordinate to transform\r\n     * @param result defines the target vector2\r\n     * @returns the current matrix\r\n     */\r\n    public transformCoordinates(x: number, y: number, result: Vector2): Matrix2D {\r\n        result.x = x * this.m[0] + y * this.m[2] + this.m[4];\r\n        result.y = x * this.m[1] + y * this.m[3] + this.m[5];\r\n\r\n        return this;\r\n    }\r\n\r\n    // Statics\r\n    /**\r\n     * Creates an identity matrix\r\n     * @returns a new matrix\r\n     */\r\n    public static Identity(): Matrix2D {\r\n        return new Matrix2D(1, 0, 0, 1, 0, 0);\r\n    }\r\n\r\n    /**\r\n     * Creates a translation matrix and stores it in a target matrix\r\n     * @param x defines the x coordinate of the translation\r\n     * @param y defines the y coordinate of the translation\r\n     * @param result defines the target matrix\r\n     */\r\n    public static TranslationToRef(x: number, y: number, result: Matrix2D): void {\r\n        result.fromValues(1, 0, 0, 1, x, y);\r\n    }\r\n\r\n    /**\r\n     * Creates a scaling matrix and stores it in a target matrix\r\n     * @param x defines the x coordinate of the scaling\r\n     * @param y defines the y coordinate of the scaling\r\n     * @param result defines the target matrix\r\n     */\r\n    public static ScalingToRef(x: number, y: number, result: Matrix2D): void {\r\n        result.fromValues(x, 0, 0, y, 0, 0);\r\n    }\r\n\r\n    /**\r\n     * Creates a rotation matrix and stores it in a target matrix\r\n     * @param angle defines the rotation angle\r\n     * @param result defines the target matrix\r\n     */\r\n    public static RotationToRef(angle: number, result: Matrix2D): void {\r\n        var s = Math.sin(angle);\r\n        var c = Math.cos(angle);\r\n\r\n        result.fromValues(c, s, -s, c, 0, 0);\r\n    }\r\n\r\n    private static _TempPreTranslationMatrix = Matrix2D.Identity();\r\n    private static _TempPostTranslationMatrix = Matrix2D.Identity();\r\n    private static _TempRotationMatrix = Matrix2D.Identity();\r\n    private static _TempScalingMatrix = Matrix2D.Identity();\r\n    private static _TempCompose0 = Matrix2D.Identity();\r\n    private static _TempCompose1 = Matrix2D.Identity();\r\n    private static _TempCompose2 = Matrix2D.Identity();\r\n\r\n    /**\r\n     * Composes a matrix from translation, rotation, scaling and parent matrix and stores it in a target matrix\r\n     * @param tx defines the x coordinate of the translation\r\n     * @param ty defines the y coordinate of the translation\r\n     * @param angle defines the rotation angle\r\n     * @param scaleX defines the x coordinate of the scaling\r\n     * @param scaleY defines the y coordinate of the scaling\r\n     * @param parentMatrix defines the parent matrix to multiply by (can be null)\r\n     * @param result defines the target matrix\r\n     */\r\n    public static ComposeToRef(tx: number, ty: number, angle: number, scaleX: number, scaleY: number, parentMatrix: Nullable<Matrix2D>, result: Matrix2D): void {\r\n        Matrix2D.TranslationToRef(tx, ty, Matrix2D._TempPreTranslationMatrix);\r\n\r\n        Matrix2D.ScalingToRef(scaleX, scaleY, Matrix2D._TempScalingMatrix);\r\n\r\n        Matrix2D.RotationToRef(angle, Matrix2D._TempRotationMatrix);\r\n\r\n        Matrix2D.TranslationToRef(-tx, -ty, Matrix2D._TempPostTranslationMatrix);\r\n\r\n        Matrix2D._TempPreTranslationMatrix.multiplyToRef(Matrix2D._TempScalingMatrix, Matrix2D._TempCompose0);\r\n        Matrix2D._TempCompose0.multiplyToRef(Matrix2D._TempRotationMatrix, Matrix2D._TempCompose1);\r\n        if (parentMatrix) {\r\n            Matrix2D._TempCompose1.multiplyToRef(Matrix2D._TempPostTranslationMatrix, Matrix2D._TempCompose2);\r\n            Matrix2D._TempCompose2.multiplyToRef(parentMatrix, result);\r\n        } else {\r\n            Matrix2D._TempCompose1.multiplyToRef(Matrix2D._TempPostTranslationMatrix, result);\r\n        }\r\n    }\r\n}", "import { Nullable } from \"@babylonjs/core/types\";\nimport { Observable, Observer } from \"@babylonjs/core/Misc/observable\";\nimport { Vector2, Vector3, Matrix } from \"@babylonjs/core/Maths/math.vector\";\nimport { PointerEventTypes, PointerInfoBase } from '@babylonjs/core/Events/pointerEvents';\nimport { Logger } from \"@babylonjs/core/Misc/logger\";\nimport { Tools } from \"@babylonjs/core/Misc/tools\";\nimport { TransformNode } from \"@babylonjs/core/Meshes/transformNode\";\nimport { Scene } from \"@babylonjs/core/scene\";\n\nimport { Container } from \"./container\";\nimport { AdvancedDynamicTexture } from \"../advancedDynamicTexture\";\nimport { ValueAndUnit } from \"../valueAndUnit\";\nimport { Measure } from \"../measure\";\nimport { Style } from \"../style\";\nimport { Matrix2D, Vector2WithInfo } from \"../math2D\";\nimport { _TypeStore } from '@babylonjs/core/Misc/typeStore';\n\n/**\n * Root class used for all 2D controls\n * @see https://doc.babylonjs.com/how_to/gui#controls\n */\nexport class Control {\n    /**\n     * Gets or sets a boolean indicating if alpha must be an inherited value (false by default)\n     */\n    public static AllowAlphaInheritance = false;\n\n    private _alpha = 1;\n    private _alphaSet = false;\n    private _zIndex = 0;\n    /** @hidden */\n    public _host: AdvancedDynamicTexture;\n    /** Gets or sets the control parent */\n    public parent: Nullable<Container>;\n    /** @hidden */\n    public _currentMeasure = Measure.Empty();\n    private _fontFamily = \"Arial\";\n    private _fontStyle = \"\";\n    private _fontWeight = \"\";\n    private _fontSize = new ValueAndUnit(18, ValueAndUnit.UNITMODE_PIXEL, false);\n    private _font: string;\n    /** @hidden */\n    public _width = new ValueAndUnit(1, ValueAndUnit.UNITMODE_PERCENTAGE, false);\n    /** @hidden */\n    public _height = new ValueAndUnit(1, ValueAndUnit.UNITMODE_PERCENTAGE, false);\n    /** @hidden */\n    protected _fontOffset: { ascent: number, height: number, descent: number };\n    private _color = \"\";\n    private _style: Nullable<Style> = null;\n    private _styleObserver: Nullable<Observer<Style>>;\n    /** @hidden */\n    protected _horizontalAlignment = Control.HORIZONTAL_ALIGNMENT_CENTER;\n    /** @hidden */\n    protected _verticalAlignment = Control.VERTICAL_ALIGNMENT_CENTER;\n    /** @hidden */\n    protected _isDirty = true;\n    /** @hidden */\n    protected _wasDirty = false;\n    /** @hidden */\n    public _tempParentMeasure = Measure.Empty();\n    /** @hidden */\n    public _prevCurrentMeasureTransformedIntoGlobalSpace = Measure.Empty();\n    /** @hidden */\n    protected _cachedParentMeasure = Measure.Empty();\n    private _paddingLeft = new ValueAndUnit(0);\n    private _paddingRight = new ValueAndUnit(0);\n    private _paddingTop = new ValueAndUnit(0);\n    private _paddingBottom = new ValueAndUnit(0);\n    /** @hidden */\n    public _left = new ValueAndUnit(0);\n    /** @hidden */\n    public _top = new ValueAndUnit(0);\n    private _scaleX = 1.0;\n    private _scaleY = 1.0;\n    private _rotation = 0;\n    private _transformCenterX = 0.5;\n    private _transformCenterY = 0.5;\n    /** @hidden */\n    public _transformMatrix = Matrix2D.Identity();\n    /** @hidden */\n    protected _invertTransformMatrix = Matrix2D.Identity();\n    /** @hidden */\n    protected _transformedPosition = Vector2.Zero();\n    private _isMatrixDirty = true;\n    private _cachedOffsetX: number;\n    private _cachedOffsetY: number;\n    private _isVisible = true;\n    private _isHighlighted = false;\n    /** @hidden */\n    public _linkedMesh: Nullable<TransformNode>;\n    private _fontSet = false;\n    private _dummyVector2 = Vector2.Zero();\n    private _downCount = 0;\n    private _enterCount = -1;\n    private _doNotRender = false;\n    private _downPointerIds: { [id: number]: boolean } = {};\n    protected _isEnabled = true;\n    protected _disabledColor = \"#9a9a9a\";\n    protected _disabledColorItem = \"#6a6a6a\";\n    /** @hidden */\n    protected _rebuildLayout = false;\n\n    /** @hidden */\n    public _customData: any = {};\n\n    /** @hidden */\n    public _isClipped = false;\n\n    /** @hidden */\n    public _automaticSize = false;\n\n    /** @hidden */\n    public _tag: any;\n\n    /**\n     * Gets or sets the unique id of the node. Please note that this number will be updated when the control is added to a container\n     */\n    public uniqueId: number;\n\n    /**\n     * Gets or sets an object used to store user defined information for the node\n     */\n    public metadata: any = null;\n\n    /** Gets or sets a boolean indicating if the control can be hit with pointer events */\n    public isHitTestVisible = true;\n    /** Gets or sets a boolean indicating if the control can block pointer events */\n    public isPointerBlocker = false;\n    /** Gets or sets a boolean indicating if the control can be focusable */\n    public isFocusInvisible = false;\n\n    /**\n     * Gets or sets a boolean indicating if the children are clipped to the current control bounds.\n     * Please note that not clipping children may generate issues with adt.useInvalidateRectOptimization so it is recommended to turn this optimization off if you want to use unclipped children\n     */\n    public clipChildren = true;\n\n    /**\n     * Gets or sets a boolean indicating that control content must be clipped\n     * Please note that not clipping children may generate issues with adt.useInvalidateRectOptimization so it is recommended to turn this optimization off if you want to use unclipped children\n     */\n    public clipContent = true;\n\n    /**\n     * Gets or sets a boolean indicating that the current control should cache its rendering (useful when the control does not change often)\n     */\n    public useBitmapCache = false;\n\n    private _cacheData: Nullable<ImageData>;\n\n    private _shadowOffsetX = 0;\n    /** Gets or sets a value indicating the offset to apply on X axis to render the shadow */\n    public get shadowOffsetX() {\n        return this._shadowOffsetX;\n    }\n\n    public set shadowOffsetX(value: number) {\n        if (this._shadowOffsetX === value) {\n            return;\n        }\n\n        this._shadowOffsetX = value;\n        this._markAsDirty();\n    }\n\n    private _shadowOffsetY = 0;\n    /** Gets or sets a value indicating the offset to apply on Y axis to render the shadow */\n    public get shadowOffsetY() {\n        return this._shadowOffsetY;\n    }\n\n    public set shadowOffsetY(value: number) {\n        if (this._shadowOffsetY === value) {\n            return;\n        }\n\n        this._shadowOffsetY = value;\n        this._markAsDirty();\n    }\n\n    private _shadowBlur = 0;\n    /** Gets or sets a value indicating the amount of blur to use to render the shadow */\n    public get shadowBlur() {\n        return this._shadowBlur;\n    }\n\n    public set shadowBlur(value: number) {\n        if (this._shadowBlur === value) {\n            return;\n        }\n\n        this._shadowBlur = value;\n        this._markAsDirty();\n    }\n\n    private _shadowColor = 'black';\n    /** Gets or sets a value indicating the color of the shadow (black by default ie. \"#000\") */\n    public get shadowColor() {\n        return this._shadowColor;\n    }\n\n    public set shadowColor(value: string) {\n        if (this._shadowColor === value) {\n            return;\n        }\n\n        this._shadowColor = value;\n        this._markAsDirty();\n    }\n\n    /** Gets or sets the cursor to use when the control is hovered */\n    public hoverCursor = \"\";\n\n    /** @hidden */\n    protected _linkOffsetX = new ValueAndUnit(0);\n    /** @hidden */\n    protected _linkOffsetY = new ValueAndUnit(0);\n\n    // Properties\n\n    /** Gets the control type name */\n    public get typeName(): string {\n        return this._getTypeName();\n    }\n\n    /**\n     * Get the current class name of the control.\n     * @returns current class name\n     */\n    public getClassName(): string {\n        return this._getTypeName();\n    }\n\n    /**\n    * An event triggered when pointer wheel is scrolled\n    */\n    public onWheelObservable = new Observable<Vector2>();\n    /**\n    * An event triggered when the pointer move over the control.\n    */\n    public onPointerMoveObservable = new Observable<Vector2>();\n\n    /**\n    * An event triggered when the pointer move out of the control.\n    */\n    public onPointerOutObservable = new Observable<Control>();\n\n    /**\n    * An event triggered when the pointer taps the control\n    */\n    public onPointerDownObservable = new Observable<Vector2WithInfo>();\n\n    /**\n    * An event triggered when pointer up\n    */\n    public onPointerUpObservable = new Observable<Vector2WithInfo>();\n\n    /**\n    * An event triggered when a control is clicked on\n    */\n    public onPointerClickObservable = new Observable<Vector2WithInfo>();\n\n    /**\n    * An event triggered when pointer enters the control\n    */\n    public onPointerEnterObservable = new Observable<Control>();\n\n    /**\n    * An event triggered when the control is marked as dirty\n    */\n    public onDirtyObservable = new Observable<Control>();\n\n    /**\n     * An event triggered before drawing the control\n     */\n    public onBeforeDrawObservable = new Observable<Control>();\n\n    /**\n     * An event triggered after the control was drawn\n     */\n    public onAfterDrawObservable = new Observable<Control>();\n\n    /**\n    * An event triggered when the control has been disposed\n    */\n   public onDisposeObservable = new Observable<Control>();\n\n    /**\n     * Get the hosting AdvancedDynamicTexture\n     */\n    public get host(): AdvancedDynamicTexture {\n        return this._host;\n    }\n\n    /** Gets or set information about font offsets (used to render and align text) */\n    public get fontOffset(): { ascent: number, height: number, descent: number } {\n        return this._fontOffset;\n    }\n\n    public set fontOffset(offset: { ascent: number, height: number, descent: number }) {\n        this._fontOffset = offset;\n    }\n\n    /** Gets or sets alpha value for the control (1 means opaque and 0 means entirely transparent) */\n    public get alpha(): number {\n        return this._alpha;\n    }\n\n    public set alpha(value: number) {\n        if (this._alpha === value) {\n            return;\n        }\n        this._alphaSet = true;\n        this._alpha = value;\n        this._markAsDirty();\n    }\n\n    /**\n     * Gets or sets a boolean indicating that we want to highlight the control (mostly for debugging purpose)\n     */\n    public get isHighlighted(): boolean {\n        return this._isHighlighted;\n    }\n\n    public set isHighlighted(value: boolean) {\n        if (this._isHighlighted === value) {\n            return;\n        }\n\n        this._isHighlighted = value;\n        this._markAsDirty();\n    }\n\n    /** Gets or sets a value indicating the scale factor on X axis (1 by default)\n     * @see https://doc.babylonjs.com/how_to/gui#rotation-and-scaling\n    */\n    public get scaleX(): number {\n        return this._scaleX;\n    }\n\n    public set scaleX(value: number) {\n        if (this._scaleX === value) {\n            return;\n        }\n\n        this._scaleX = value;\n        this._markAsDirty();\n        this._markMatrixAsDirty();\n    }\n\n    /** Gets or sets a value indicating the scale factor on Y axis (1 by default)\n     * @see https://doc.babylonjs.com/how_to/gui#rotation-and-scaling\n    */\n    public get scaleY(): number {\n        return this._scaleY;\n    }\n\n    public set scaleY(value: number) {\n        if (this._scaleY === value) {\n            return;\n        }\n\n        this._scaleY = value;\n        this._markAsDirty();\n        this._markMatrixAsDirty();\n    }\n\n    /** Gets or sets the rotation angle (0 by default)\n     * @see https://doc.babylonjs.com/how_to/gui#rotation-and-scaling\n    */\n    public get rotation(): number {\n        return this._rotation;\n    }\n\n    public set rotation(value: number) {\n        if (this._rotation === value) {\n            return;\n        }\n\n        this._rotation = value;\n        this._markAsDirty();\n        this._markMatrixAsDirty();\n    }\n\n    /** Gets or sets the transformation center on Y axis (0 by default)\n     * @see https://doc.babylonjs.com/how_to/gui#rotation-and-scaling\n    */\n    public get transformCenterY(): number {\n        return this._transformCenterY;\n    }\n\n    public set transformCenterY(value: number) {\n        if (this._transformCenterY === value) {\n            return;\n        }\n\n        this._transformCenterY = value;\n        this._markAsDirty();\n        this._markMatrixAsDirty();\n    }\n\n    /** Gets or sets the transformation center on X axis (0 by default)\n     * @see https://doc.babylonjs.com/how_to/gui#rotation-and-scaling\n    */\n    public get transformCenterX(): number {\n        return this._transformCenterX;\n    }\n\n    public set transformCenterX(value: number) {\n        if (this._transformCenterX === value) {\n            return;\n        }\n\n        this._transformCenterX = value;\n        this._markAsDirty();\n        this._markMatrixAsDirty();\n    }\n\n    /**\n     * Gets or sets the horizontal alignment\n     * @see https://doc.babylonjs.com/how_to/gui#alignments\n     */\n    public get horizontalAlignment(): number {\n        return this._horizontalAlignment;\n    }\n\n    public set horizontalAlignment(value: number) {\n        if (this._horizontalAlignment === value) {\n            return;\n        }\n\n        this._horizontalAlignment = value;\n        this._markAsDirty();\n    }\n\n    /**\n     * Gets or sets the vertical alignment\n     * @see https://doc.babylonjs.com/how_to/gui#alignments\n     */\n    public get verticalAlignment(): number {\n        return this._verticalAlignment;\n    }\n\n    public set verticalAlignment(value: number) {\n        if (this._verticalAlignment === value) {\n            return;\n        }\n\n        this._verticalAlignment = value;\n        this._markAsDirty();\n    }\n\n    /**\n     * Gets or sets a fixed ratio for this control.\n     * When different from 0, the ratio is used to compute the \"second\" dimension.\n     * The first dimension used in the computation is the last one set (by setting width / widthInPixels or height / heightInPixels), and the\n     * second dimension is computed as first dimension * fixedRatio\n     */\n    public fixedRatio = 0;\n\n    private _fixedRatioMasterIsWidth = true;\n\n    /**\n     * Gets or sets control width\n     * @see https://doc.babylonjs.com/how_to/gui#position-and-size\n     */\n    public get width(): string | number {\n        return this._width.toString(this._host);\n    }\n\n    public set width(value: string | number) {\n        this._fixedRatioMasterIsWidth = true;\n\n        if (this._width.toString(this._host) === value) {\n            return;\n        }\n\n        if (this._width.fromString(value)) {\n            this._markAsDirty();\n        }\n    }\n\n    /**\n     * Gets or sets the control width in pixel\n     * @see https://doc.babylonjs.com/how_to/gui#position-and-size\n     */\n    public get widthInPixels(): number {\n        return this._width.getValueInPixel(this._host, this._cachedParentMeasure.width);\n    }\n\n    public set widthInPixels(value: number) {\n        if (isNaN(value)) {\n            return;\n        }\n        this._fixedRatioMasterIsWidth = true;\n        this.width = value + \"px\";\n    }\n\n    /**\n     * Gets or sets control height\n     * @see https://doc.babylonjs.com/how_to/gui#position-and-size\n     */\n    public get height(): string | number {\n        return this._height.toString(this._host);\n    }\n\n    public set height(value: string | number) {\n        this._fixedRatioMasterIsWidth = false;\n\n        if (this._height.toString(this._host) === value) {\n            return;\n        }\n\n        if (this._height.fromString(value)) {\n            this._markAsDirty();\n        }\n    }\n\n    /**\n     * Gets or sets control height in pixel\n     * @see https://doc.babylonjs.com/how_to/gui#position-and-size\n     */\n    public get heightInPixels(): number {\n        return this._height.getValueInPixel(this._host, this._cachedParentMeasure.height);\n    }\n\n    public set heightInPixels(value: number) {\n        if (isNaN(value)) {\n            return;\n        }\n        this._fixedRatioMasterIsWidth = false;\n        this.height = value + \"px\";\n    }\n\n    /** Gets or set font family */\n    public get fontFamily(): string {\n        if (!this._fontSet) {\n            return \"\";\n        }\n        return this._fontFamily;\n    }\n\n    public set fontFamily(value: string) {\n        if (this._fontFamily === value) {\n            return;\n        }\n\n        this._fontFamily = value;\n        this._resetFontCache();\n    }\n\n    /** Gets or sets font style */\n    public get fontStyle(): string {\n        return this._fontStyle;\n    }\n\n    public set fontStyle(value: string) {\n        if (this._fontStyle === value) {\n            return;\n        }\n\n        this._fontStyle = value;\n        this._resetFontCache();\n    }\n\n    /** Gets or sets font weight */\n    public get fontWeight(): string {\n        return this._fontWeight;\n    }\n\n    public set fontWeight(value: string) {\n        if (this._fontWeight === value) {\n            return;\n        }\n\n        this._fontWeight = value;\n        this._resetFontCache();\n    }\n\n    /**\n     * Gets or sets style\n     * @see https://doc.babylonjs.com/how_to/gui#styles\n     */\n    public get style(): Nullable<Style> {\n        return this._style;\n    }\n\n    public set style(value: Nullable<Style>) {\n        if (this._style) {\n            this._style.onChangedObservable.remove(this._styleObserver);\n            this._styleObserver = null;\n        }\n\n        this._style = value;\n\n        if (this._style) {\n            this._styleObserver = this._style.onChangedObservable.add(() => {\n                this._markAsDirty();\n                this._resetFontCache();\n            });\n        }\n\n        this._markAsDirty();\n        this._resetFontCache();\n    }\n\n    /** @hidden */\n    public get _isFontSizeInPercentage(): boolean {\n        return this._fontSize.isPercentage;\n    }\n\n    /** Gets or sets font size in pixels */\n    public get fontSizeInPixels(): number {\n        let fontSizeToUse = this._style ? this._style._fontSize : this._fontSize;\n\n        if (fontSizeToUse.isPixel) {\n            return fontSizeToUse.getValue(this._host);\n        }\n\n        return fontSizeToUse.getValueInPixel(this._host, this._tempParentMeasure.height || this._cachedParentMeasure.height);\n    }\n\n    public set fontSizeInPixels(value: number) {\n        if (isNaN(value)) {\n            return;\n        }\n        this.fontSize = value + \"px\";\n    }\n\n    /** Gets or sets font size */\n    public get fontSize(): string | number {\n        return this._fontSize.toString(this._host);\n    }\n\n    public set fontSize(value: string | number) {\n        if (this._fontSize.toString(this._host) === value) {\n            return;\n        }\n\n        if (this._fontSize.fromString(value)) {\n            this._markAsDirty();\n            this._resetFontCache();\n        }\n    }\n\n    /** Gets or sets foreground color */\n    public get color(): string {\n        return this._color;\n    }\n\n    public set color(value: string) {\n        if (this._color === value) {\n            return;\n        }\n\n        this._color = value;\n        this._markAsDirty();\n    }\n\n    /** Gets or sets z index which is used to reorder controls on the z axis */\n    public get zIndex(): number {\n        return this._zIndex;\n    }\n\n    public set zIndex(value: number) {\n        if (this.zIndex === value) {\n            return;\n        }\n\n        this._zIndex = value;\n\n        if (this.parent) {\n            this.parent._reOrderControl(this);\n        }\n    }\n\n    /** Gets or sets a boolean indicating if the control can be rendered */\n    public get notRenderable(): boolean {\n        return this._doNotRender;\n    }\n\n    public set notRenderable(value: boolean) {\n        if (this._doNotRender === value) {\n            return;\n        }\n\n        this._doNotRender = value;\n        this._markAsDirty();\n    }\n\n    /** Gets or sets a boolean indicating if the control is visible */\n    public get isVisible(): boolean {\n        return this._isVisible;\n    }\n\n    public set isVisible(value: boolean) {\n        if (this._isVisible === value) {\n            return;\n        }\n\n        this._isVisible = value;\n        this._markAsDirty(true);\n    }\n\n    /** Gets a boolean indicating that the control needs to update its rendering */\n    public get isDirty(): boolean {\n        return this._isDirty;\n    }\n\n    /**\n     * Gets the current linked mesh (or null if none)\n     */\n    public get linkedMesh(): Nullable<TransformNode> {\n        return this._linkedMesh;\n    }\n\n    /**\n     * Gets or sets a value indicating the padding to use on the left of the control\n     * @see https://doc.babylonjs.com/how_to/gui#position-and-size\n     */\n    public get paddingLeft(): string | number {\n        return this._paddingLeft.toString(this._host);\n    }\n\n    public set paddingLeft(value: string | number) {\n        if (this._paddingLeft.fromString(value)) {\n            this._markAsDirty();\n        }\n    }\n\n    /**\n     * Gets or sets a value indicating the padding in pixels to use on the left of the control\n     * @see https://doc.babylonjs.com/how_to/gui#position-and-size\n     */\n    public get paddingLeftInPixels(): number {\n        return this._paddingLeft.getValueInPixel(this._host, this._cachedParentMeasure.width);\n    }\n\n    public set paddingLeftInPixels(value: number) {\n        if (isNaN(value)) {\n            return;\n        }\n        this.paddingLeft = value + \"px\";\n    }\n\n    /**\n     * Gets or sets a value indicating the padding to use on the right of the control\n     * @see https://doc.babylonjs.com/how_to/gui#position-and-size\n     */\n    public get paddingRight(): string | number {\n        return this._paddingRight.toString(this._host);\n    }\n\n    public set paddingRight(value: string | number) {\n        if (this._paddingRight.fromString(value)) {\n            this._markAsDirty();\n        }\n    }\n\n    /**\n     * Gets or sets a value indicating the padding in pixels to use on the right of the control\n     * @see https://doc.babylonjs.com/how_to/gui#position-and-size\n     */\n    public get paddingRightInPixels(): number {\n        return this._paddingRight.getValueInPixel(this._host, this._cachedParentMeasure.width);\n    }\n\n    public set paddingRightInPixels(value: number) {\n        if (isNaN(value)) {\n            return;\n        }\n        this.paddingRight = value + \"px\";\n    }\n\n    /**\n     * Gets or sets a value indicating the padding to use on the top of the control\n     * @see https://doc.babylonjs.com/how_to/gui#position-and-size\n     */\n    public get paddingTop(): string | number {\n        return this._paddingTop.toString(this._host);\n    }\n\n    public set paddingTop(value: string | number) {\n        if (this._paddingTop.fromString(value)) {\n            this._markAsDirty();\n        }\n    }\n\n    /**\n     * Gets or sets a value indicating the padding in pixels to use on the top of the control\n     * @see https://doc.babylonjs.com/how_to/gui#position-and-size\n     */\n    public get paddingTopInPixels(): number {\n        return this._paddingTop.getValueInPixel(this._host, this._cachedParentMeasure.height);\n    }\n\n    public set paddingTopInPixels(value: number) {\n        if (isNaN(value)) {\n            return;\n        }\n        this.paddingTop = value + \"px\";\n    }\n\n    /**\n     * Gets or sets a value indicating the padding to use on the bottom of the control\n     * @see https://doc.babylonjs.com/how_to/gui#position-and-size\n     */\n    public get paddingBottom(): string | number {\n        return this._paddingBottom.toString(this._host);\n    }\n\n    public set paddingBottom(value: string | number) {\n        if (this._paddingBottom.fromString(value)) {\n            this._markAsDirty();\n        }\n    }\n\n    /**\n     * Gets or sets a value indicating the padding in pixels to use on the bottom of the control\n     * @see https://doc.babylonjs.com/how_to/gui#position-and-size\n     */\n    public get paddingBottomInPixels(): number {\n        return this._paddingBottom.getValueInPixel(this._host, this._cachedParentMeasure.height);\n    }\n\n    public set paddingBottomInPixels(value: number) {\n        if (isNaN(value)) {\n            return;\n        }\n        this.paddingBottom = value + \"px\";\n    }\n\n    /**\n     * Gets or sets a value indicating the left coordinate of the control\n     * @see https://doc.babylonjs.com/how_to/gui#position-and-size\n     */\n    public get left(): string | number {\n        return this._left.toString(this._host);\n    }\n\n    public set left(value: string | number) {\n        if (this._left.fromString(value)) {\n            this._markAsDirty();\n        }\n    }\n\n    /**\n     * Gets or sets a value indicating the left coordinate in pixels of the control\n     * @see https://doc.babylonjs.com/how_to/gui#position-and-size\n     */\n    public get leftInPixels(): number {\n        return this._left.getValueInPixel(this._host, this._cachedParentMeasure.width);\n    }\n\n    public set leftInPixels(value: number) {\n        if (isNaN(value)) {\n            return;\n        }\n        this.left = value + \"px\";\n    }\n\n    /**\n     * Gets or sets a value indicating the top coordinate of the control\n     * @see https://doc.babylonjs.com/how_to/gui#position-and-size\n     */\n    public get top(): string | number {\n        return this._top.toString(this._host);\n    }\n\n    public set top(value: string | number) {\n        if (this._top.fromString(value)) {\n            this._markAsDirty();\n        }\n    }\n\n    /**\n     * Gets or sets a value indicating the top coordinate in pixels of the control\n     * @see https://doc.babylonjs.com/how_to/gui#position-and-size\n     */\n    public get topInPixels(): number {\n        return this._top.getValueInPixel(this._host, this._cachedParentMeasure.height);\n    }\n\n    public set topInPixels(value: number) {\n        if (isNaN(value)) {\n            return;\n        }\n        this.top = value + \"px\";\n    }\n\n    /**\n     * Gets or sets a value indicating the offset on X axis to the linked mesh\n     * @see https://doc.babylonjs.com/how_to/gui#tracking-positions\n     */\n    public get linkOffsetX(): string | number {\n        return this._linkOffsetX.toString(this._host);\n    }\n\n    public set linkOffsetX(value: string | number) {\n        if (this._linkOffsetX.fromString(value)) {\n            this._markAsDirty();\n        }\n    }\n\n    /**\n     * Gets or sets a value indicating the offset in pixels on X axis to the linked mesh\n     * @see https://doc.babylonjs.com/how_to/gui#tracking-positions\n     */\n    public get linkOffsetXInPixels(): number {\n        return this._linkOffsetX.getValueInPixel(this._host, this._cachedParentMeasure.width);\n    }\n\n    public set linkOffsetXInPixels(value: number) {\n        if (isNaN(value)) {\n            return;\n        }\n        this.linkOffsetX = value + \"px\";\n    }\n\n    /**\n     * Gets or sets a value indicating the offset on Y axis to the linked mesh\n     * @see https://doc.babylonjs.com/how_to/gui#tracking-positions\n     */\n    public get linkOffsetY(): string | number {\n        return this._linkOffsetY.toString(this._host);\n    }\n\n    public set linkOffsetY(value: string | number) {\n        if (this._linkOffsetY.fromString(value)) {\n            this._markAsDirty();\n        }\n    }\n\n    /**\n     * Gets or sets a value indicating the offset in pixels on Y axis to the linked mesh\n     * @see https://doc.babylonjs.com/how_to/gui#tracking-positions\n     */\n    public get linkOffsetYInPixels(): number {\n        return this._linkOffsetY.getValueInPixel(this._host, this._cachedParentMeasure.height);\n    }\n\n    public set linkOffsetYInPixels(value: number) {\n        if (isNaN(value)) {\n            return;\n        }\n        this.linkOffsetY = value + \"px\";\n    }\n\n    /** Gets the center coordinate on X axis */\n    public get centerX(): number {\n        return this._currentMeasure.left + this._currentMeasure.width / 2;\n    }\n\n    /** Gets the center coordinate on Y axis */\n    public get centerY(): number {\n        return this._currentMeasure.top + this._currentMeasure.height / 2;\n    }\n\n    /** Gets or sets if control is Enabled*/\n    public get isEnabled(): boolean {\n        return this._isEnabled;\n    }\n\n    public set isEnabled(value: boolean) {\n        if (this._isEnabled === value) {\n            return;\n        }\n\n        this._isEnabled = value;\n        this._markAsDirty();\n    }\n    /** Gets or sets background color of control if it's disabled*/\n    public get disabledColor(): string {\n        return this._disabledColor;\n    }\n\n    public set disabledColor(value: string) {\n        if (this._disabledColor === value) {\n            return;\n        }\n\n        this._disabledColor = value;\n        this._markAsDirty();\n    }\n    /** Gets or sets front color of control if it's disabled*/\n    public get disabledColorItem(): string {\n        return this._disabledColorItem;\n    }\n\n    public set disabledColorItem(value: string) {\n        if (this._disabledColorItem === value) {\n            return;\n        }\n\n        this._disabledColorItem = value;\n        this._markAsDirty();\n    }\n    // Functions\n\n    /**\n     * Creates a new control\n     * @param name defines the name of the control\n     */\n    constructor(\n        /** defines the name of the control */\n        public name?: string) {\n    }\n\n    /** @hidden */\n    protected _getTypeName(): string {\n        return \"Control\";\n    }\n\n    /**\n     * Gets the first ascendant in the hierarchy of the given type\n     * @param className defines the required type\n     * @returns the ascendant or null if not found\n     */\n    public getAscendantOfClass(className: string): Nullable<Control> {\n        if (!this.parent) {\n            return null;\n        }\n\n        if (this.parent.getClassName() === className) {\n            return this.parent;\n        }\n\n        return this.parent.getAscendantOfClass(className);\n    }\n\n    /** @hidden */\n    public _resetFontCache(): void {\n        this._fontSet = true;\n        this._markAsDirty();\n    }\n\n    /**\n     * Determines if a container is an ascendant of the current control\n     * @param container defines the container to look for\n     * @returns true if the container is one of the ascendant of the control\n     */\n    public isAscendant(container: Control): boolean {\n        if (!this.parent) {\n            return false;\n        }\n\n        if (this.parent === container) {\n            return true;\n        }\n\n        return this.parent.isAscendant(container);\n    }\n\n    /**\n     * Gets coordinates in local control space\n     * @param globalCoordinates defines the coordinates to transform\n     * @returns the new coordinates in local space\n     */\n    public getLocalCoordinates(globalCoordinates: Vector2): Vector2 {\n        var result = Vector2.Zero();\n\n        this.getLocalCoordinatesToRef(globalCoordinates, result);\n\n        return result;\n    }\n\n    /**\n     * Gets coordinates in local control space\n     * @param globalCoordinates defines the coordinates to transform\n     * @param result defines the target vector2 where to store the result\n     * @returns the current control\n     */\n    public getLocalCoordinatesToRef(globalCoordinates: Vector2, result: Vector2): Control {\n        result.x = globalCoordinates.x - this._currentMeasure.left;\n        result.y = globalCoordinates.y - this._currentMeasure.top;\n        return this;\n    }\n\n    /**\n     * Gets coordinates in parent local control space\n     * @param globalCoordinates defines the coordinates to transform\n     * @returns the new coordinates in parent local space\n     */\n    public getParentLocalCoordinates(globalCoordinates: Vector2): Vector2 {\n        var result = Vector2.Zero();\n\n        result.x = globalCoordinates.x - this._cachedParentMeasure.left;\n        result.y = globalCoordinates.y - this._cachedParentMeasure.top;\n\n        return result;\n    }\n\n    /**\n     * Move the current control to a vector3 position projected onto the screen.\n     * @param position defines the target position\n     * @param scene defines the hosting scene\n     */\n    public moveToVector3(position: Vector3, scene: Scene): void {\n        if (!this._host || this.parent !== this._host._rootContainer) {\n            Tools.Error(\"Cannot move a control to a vector3 if the control is not at root level\");\n            return;\n        }\n\n        this.horizontalAlignment = Control.HORIZONTAL_ALIGNMENT_LEFT;\n        this.verticalAlignment = Control.VERTICAL_ALIGNMENT_TOP;\n\n        var globalViewport = this._host._getGlobalViewport(scene);\n        var projectedPosition = Vector3.Project(position, Matrix.Identity(), scene.getTransformMatrix(), globalViewport);\n\n        this._moveToProjectedPosition(projectedPosition);\n\n        if (projectedPosition.z < 0 || projectedPosition.z > 1) {\n            this.notRenderable = true;\n            return;\n        }\n        this.notRenderable = false;\n    }\n\n    /**\n     * Will store all controls that have this control as ascendant in a given array\n     * @param results defines the array where to store the descendants\n     * @param directDescendantsOnly defines if true only direct descendants of 'this' will be considered, if false direct and also indirect (children of children, an so on in a recursive manner) descendants of 'this' will be considered\n     * @param predicate defines an optional predicate that will be called on every evaluated child, the predicate must return true for a given child to be part of the result, otherwise it will be ignored\n     */\n    public getDescendantsToRef(results: Control[], directDescendantsOnly: boolean = false, predicate?: (control: Control) => boolean): void {\n        // Do nothing by default\n    }\n\n    /**\n     * Will return all controls that have this control as ascendant\n     * @param directDescendantsOnly defines if true only direct descendants of 'this' will be considered, if false direct and also indirect (children of children, an so on in a recursive manner) descendants of 'this' will be considered\n     * @param predicate defines an optional predicate that will be called on every evaluated child, the predicate must return true for a given child to be part of the result, otherwise it will be ignored\n     * @return all child controls\n     */\n    public getDescendants(directDescendantsOnly?: boolean, predicate?: (control: Control) => boolean): Control[] {\n        var results = new Array<Control>();\n\n        this.getDescendantsToRef(results, directDescendantsOnly, predicate);\n\n        return results;\n    }\n\n    /**\n     * Link current control with a target mesh\n     * @param mesh defines the mesh to link with\n     * @see https://doc.babylonjs.com/how_to/gui#tracking-positions\n     */\n    public linkWithMesh(mesh: Nullable<TransformNode>): void {\n        if (!this._host || this.parent && this.parent !== this._host._rootContainer) {\n            if (mesh) {\n                Tools.Error(\"Cannot link a control to a mesh if the control is not at root level\");\n            }\n            return;\n        }\n\n        var index = this._host._linkedControls.indexOf(this);\n        if (index !== -1) {\n            this._linkedMesh = mesh;\n            if (!mesh) {\n                this._host._linkedControls.splice(index, 1);\n            }\n            return;\n        } else if (!mesh) {\n            return;\n        }\n\n        this.horizontalAlignment = Control.HORIZONTAL_ALIGNMENT_LEFT;\n        this.verticalAlignment = Control.VERTICAL_ALIGNMENT_TOP;\n        this._linkedMesh = mesh;\n        this._host._linkedControls.push(this);\n    }\n\n    /** @hidden */\n    public _moveToProjectedPosition(projectedPosition: Vector3): void {\n        let oldLeft = this._left.getValue(this._host);\n        let oldTop = this._top.getValue(this._host);\n\n        var newLeft = ((projectedPosition.x + this._linkOffsetX.getValue(this._host)) - this._currentMeasure.width / 2);\n        var newTop = ((projectedPosition.y + this._linkOffsetY.getValue(this._host)) - this._currentMeasure.height / 2);\n\n        if (this._left.ignoreAdaptiveScaling && this._top.ignoreAdaptiveScaling) {\n            if (Math.abs(newLeft - oldLeft) < 0.5) {\n                newLeft = oldLeft;\n            }\n\n            if (Math.abs(newTop - oldTop) < 0.5) {\n                newTop = oldTop;\n            }\n        }\n\n        this.left = newLeft + \"px\";\n        this.top = newTop + \"px\";\n\n        this._left.ignoreAdaptiveScaling = true;\n        this._top.ignoreAdaptiveScaling = true;\n        this._markAsDirty();\n    }\n\n    /** @hidden */\n    public _offsetLeft(offset: number) {\n        this._isDirty = true;\n        this._currentMeasure.left += offset;\n    }\n\n    /** @hidden */\n    public _offsetTop(offset: number) {\n        this._isDirty = true;\n        this._currentMeasure.top += offset;\n    }\n\n    /** @hidden */\n    public _markMatrixAsDirty(): void {\n        this._isMatrixDirty = true;\n        this._flagDescendantsAsMatrixDirty();\n    }\n\n    /** @hidden */\n    public _flagDescendantsAsMatrixDirty(): void {\n        // No child\n    }\n\n    /** @hidden */\n    public _intersectsRect(rect: Measure) {\n        // Rotate the control's current measure into local space and check if it intersects the passed in rectangle\n        this._currentMeasure.transformToRef(this._transformMatrix, this._tmpMeasureA);\n        if (this._tmpMeasureA.left >= rect.left + rect.width) {\n            return false;\n        }\n\n        if (this._tmpMeasureA.top >= rect.top + rect.height) {\n            return false;\n        }\n\n        if (this._tmpMeasureA.left + this._tmpMeasureA.width <= rect.left) {\n            return false;\n        }\n\n        if (this._tmpMeasureA.top + this._tmpMeasureA.height <= rect.top) {\n            return false;\n        }\n\n        return true;\n    }\n\n    /** @hidden */\n    protected invalidateRect() {\n        this._transform();\n        if (this.host && this.host.useInvalidateRectOptimization) {\n            // Rotate by transform to get the measure transformed to global space\n            this._currentMeasure.transformToRef(this._transformMatrix, this._tmpMeasureA);\n            // get the boudning box of the current measure and last frames measure in global space and invalidate it\n            // the previous measure is used to properly clear a control that is scaled down\n            Measure.CombineToRef(this._tmpMeasureA, this._prevCurrentMeasureTransformedIntoGlobalSpace, this._tmpMeasureA);\n\n            if (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) {\n                // Expand rect based on shadows\n                var shadowOffsetX = this.shadowOffsetX;\n                var shadowOffsetY = this.shadowOffsetY;\n                var shadowBlur = this.shadowBlur;\n\n                var leftShadowOffset = Math.min(Math.min(shadowOffsetX, 0) - shadowBlur * 2, 0);\n                var rightShadowOffset = Math.max(Math.max(shadowOffsetX, 0) + shadowBlur * 2, 0);\n                var topShadowOffset = Math.min(Math.min(shadowOffsetY, 0) - shadowBlur * 2, 0);\n                var bottomShadowOffset = Math.max(Math.max(shadowOffsetY, 0) + shadowBlur * 2, 0);\n\n                this.host.invalidateRect(\n                    Math.floor(this._tmpMeasureA.left + leftShadowOffset),\n                    Math.floor(this._tmpMeasureA.top + topShadowOffset),\n                    Math.ceil(this._tmpMeasureA.left + this._tmpMeasureA.width + rightShadowOffset),\n                    Math.ceil(this._tmpMeasureA.top + this._tmpMeasureA.height + bottomShadowOffset),\n                );\n            } else {\n                this.host.invalidateRect(\n                    Math.floor(this._tmpMeasureA.left),\n                    Math.floor(this._tmpMeasureA.top),\n                    Math.ceil(this._tmpMeasureA.left + this._tmpMeasureA.width),\n                    Math.ceil(this._tmpMeasureA.top + this._tmpMeasureA.height),\n                );\n            }\n\n        }\n    }\n\n    /** @hidden */\n    public _markAsDirty(force = false): void {\n        if (!this._isVisible && !force) {\n            return;\n        }\n\n        this._isDirty = true;\n\n        // Redraw only this rectangle\n        if (this._host) {\n            this._host.markAsDirty();\n        }\n    }\n\n    /** @hidden */\n    public _markAllAsDirty(): void {\n        this._markAsDirty();\n\n        if (this._font) {\n            this._prepareFont();\n        }\n    }\n\n    /** @hidden */\n    public _link(host: AdvancedDynamicTexture): void {\n        this._host = host;\n        if (this._host) {\n            this.uniqueId = this._host.getScene()!.getUniqueId();\n        }\n    }\n\n    /** @hidden */\n    protected _transform(context?: CanvasRenderingContext2D): void {\n        if (!this._isMatrixDirty && this._scaleX === 1 && this._scaleY === 1 && this._rotation === 0) {\n            return;\n        }\n\n        // postTranslate\n        var offsetX = this._currentMeasure.width * this._transformCenterX + this._currentMeasure.left;\n        var offsetY = this._currentMeasure.height * this._transformCenterY + this._currentMeasure.top;\n        if (context) {\n            context.translate(offsetX, offsetY);\n\n            // rotate\n            context.rotate(this._rotation);\n\n            // scale\n            context.scale(this._scaleX, this._scaleY);\n\n            // preTranslate\n            context.translate(-offsetX, -offsetY);\n        }\n        // Need to update matrices?\n        if (this._isMatrixDirty || this._cachedOffsetX !== offsetX || this._cachedOffsetY !== offsetY) {\n            this._cachedOffsetX = offsetX;\n            this._cachedOffsetY = offsetY;\n            this._isMatrixDirty = false;\n            this._flagDescendantsAsMatrixDirty();\n\n            Matrix2D.ComposeToRef(-offsetX, -offsetY, this._rotation, this._scaleX, this._scaleY, this.parent ? this.parent._transformMatrix : null, this._transformMatrix);\n\n            this._transformMatrix.invertToRef(this._invertTransformMatrix);\n        }\n    }\n\n    /** @hidden */\n    public _renderHighlight(context: CanvasRenderingContext2D): void {\n        if (!this.isHighlighted) {\n            return;\n        }\n\n        context.save();\n        context.strokeStyle = \"#4affff\";\n        context.lineWidth = 2;\n\n        this._renderHighlightSpecific(context);\n        context.restore();\n    }\n\n    /** @hidden */\n    public _renderHighlightSpecific(context: CanvasRenderingContext2D): void {\n        context.strokeRect(this._currentMeasure.left, this._currentMeasure.top, this._currentMeasure.width, this._currentMeasure.height);\n    }\n\n    /** @hidden */\n    protected _applyStates(context: CanvasRenderingContext2D): void {\n        if (this._isFontSizeInPercentage) {\n            this._fontSet = true;\n        }\n\n        if (this._fontSet) {\n            this._prepareFont();\n            this._fontSet = false;\n        }\n\n        if (this._font) {\n            context.font = this._font;\n        }\n\n        if (this._color) {\n            context.fillStyle = this._color;\n        }\n\n        if (Control.AllowAlphaInheritance) {\n            context.globalAlpha *= this._alpha;\n        } else if (this._alphaSet) {\n            context.globalAlpha = this.parent ? this.parent.alpha * this._alpha : this._alpha;\n        }\n    }\n\n    /** @hidden */\n    public _layout(parentMeasure: Measure, context: CanvasRenderingContext2D): boolean {\n        if (!this.isDirty && (!this.isVisible || this.notRenderable)) {\n            return false;\n        }\n\n        if (this._isDirty || !this._cachedParentMeasure.isEqualsTo(parentMeasure)) {\n            this.host._numLayoutCalls++;\n\n            this._currentMeasure.addAndTransformToRef(this._transformMatrix,\n                -this.paddingLeftInPixels | 0,\n                -this.paddingTopInPixels | 0,\n                this.paddingRightInPixels | 0,\n                this.paddingBottomInPixels | 0,\n                this._prevCurrentMeasureTransformedIntoGlobalSpace);\n\n            context.save();\n\n            this._applyStates(context);\n\n            let rebuildCount = 0;\n            do {\n                this._rebuildLayout = false;\n                this._processMeasures(parentMeasure, context);\n                rebuildCount++;\n            }\n            while (this._rebuildLayout && rebuildCount < 3);\n\n            if (rebuildCount >= 3) {\n                Logger.Error(`Layout cycle detected in GUI (Control name=${this.name}, uniqueId=${this.uniqueId})`);\n            }\n\n            context.restore();\n            this.invalidateRect();\n            this._evaluateClippingState(parentMeasure);\n        }\n\n        this._wasDirty = this._isDirty;\n        this._isDirty = false;\n\n        return true;\n    }\n\n    /** @hidden */\n    protected _processMeasures(parentMeasure: Measure, context: CanvasRenderingContext2D): void {\n        this._currentMeasure.copyFrom(parentMeasure);\n\n        // Let children take some pre-measurement actions\n        this._preMeasure(parentMeasure, context);\n\n        this._measure();\n        this._computeAlignment(parentMeasure, context);\n\n        // Convert to int values\n        this._currentMeasure.left = this._currentMeasure.left | 0;\n        this._currentMeasure.top = this._currentMeasure.top | 0;\n        this._currentMeasure.width = this._currentMeasure.width | 0;\n        this._currentMeasure.height = this._currentMeasure.height | 0;\n\n        // Let children add more features\n        this._additionalProcessing(parentMeasure, context);\n\n        this._cachedParentMeasure.copyFrom(parentMeasure);\n\n        if (this.onDirtyObservable.hasObservers()) {\n            this.onDirtyObservable.notifyObservers(this);\n        }\n    }\n\n    protected _evaluateClippingState(parentMeasure: Measure) {\n        if (this.parent && this.parent.clipChildren) {\n            // Early clip\n            if (this._currentMeasure.left > parentMeasure.left + parentMeasure.width) {\n                this._isClipped = true;\n                return;\n            }\n\n            if (this._currentMeasure.left + this._currentMeasure.width < parentMeasure.left) {\n                this._isClipped = true;\n                return;\n            }\n\n            if (this._currentMeasure.top > parentMeasure.top + parentMeasure.height) {\n                this._isClipped = true;\n                return;\n            }\n\n            if (this._currentMeasure.top + this._currentMeasure.height < parentMeasure.top) {\n                this._isClipped = true;\n                return;\n            }\n        }\n\n        this._isClipped = false;\n    }\n\n    /** @hidden */\n    public _measure(): void {\n        // Width / Height\n        if (this._width.isPixel) {\n            this._currentMeasure.width = this._width.getValue(this._host);\n        } else {\n            this._currentMeasure.width *= this._width.getValue(this._host);\n        }\n\n        if (this._height.isPixel) {\n            this._currentMeasure.height = this._height.getValue(this._host);\n        } else {\n            this._currentMeasure.height *= this._height.getValue(this._host);\n        }\n\n        if (this.fixedRatio !== 0) {\n            if (this._fixedRatioMasterIsWidth) {\n                this._currentMeasure.height = this._currentMeasure.width * this.fixedRatio;\n            } else {\n                this._currentMeasure.width = this._currentMeasure.height * this.fixedRatio;\n            }\n        }\n    }\n\n    /** @hidden */\n    protected _computeAlignment(parentMeasure: Measure, context: CanvasRenderingContext2D): void {\n        var width = this._currentMeasure.width;\n        var height = this._currentMeasure.height;\n\n        var parentWidth = parentMeasure.width;\n        var parentHeight = parentMeasure.height;\n\n        // Left / top\n        var x = 0;\n        var y = 0;\n\n        switch (this.horizontalAlignment) {\n            case Control.HORIZONTAL_ALIGNMENT_LEFT:\n                x = 0;\n                break;\n            case Control.HORIZONTAL_ALIGNMENT_RIGHT:\n                x = parentWidth - width;\n                break;\n            case Control.HORIZONTAL_ALIGNMENT_CENTER:\n                x = (parentWidth - width) / 2;\n                break;\n        }\n\n        switch (this.verticalAlignment) {\n            case Control.VERTICAL_ALIGNMENT_TOP:\n                y = 0;\n                break;\n            case Control.VERTICAL_ALIGNMENT_BOTTOM:\n                y = parentHeight - height;\n                break;\n            case Control.VERTICAL_ALIGNMENT_CENTER:\n                y = (parentHeight - height) / 2;\n                break;\n        }\n\n        if (this._paddingLeft.isPixel) {\n            this._currentMeasure.left += this._paddingLeft.getValue(this._host);\n            this._currentMeasure.width -= this._paddingLeft.getValue(this._host);\n        } else {\n            this._currentMeasure.left += parentWidth * this._paddingLeft.getValue(this._host);\n            this._currentMeasure.width -= parentWidth * this._paddingLeft.getValue(this._host);\n        }\n\n        if (this._paddingRight.isPixel) {\n            this._currentMeasure.width -= this._paddingRight.getValue(this._host);\n        } else {\n            this._currentMeasure.width -= parentWidth * this._paddingRight.getValue(this._host);\n        }\n\n        if (this._paddingTop.isPixel) {\n            this._currentMeasure.top += this._paddingTop.getValue(this._host);\n            this._currentMeasure.height -= this._paddingTop.getValue(this._host);\n        } else {\n            this._currentMeasure.top += parentHeight * this._paddingTop.getValue(this._host);\n            this._currentMeasure.height -= parentHeight * this._paddingTop.getValue(this._host);\n        }\n\n        if (this._paddingBottom.isPixel) {\n            this._currentMeasure.height -= this._paddingBottom.getValue(this._host);\n        } else {\n            this._currentMeasure.height -= parentHeight * this._paddingBottom.getValue(this._host);\n        }\n\n        if (this._left.isPixel) {\n            this._currentMeasure.left += this._left.getValue(this._host);\n        } else {\n            this._currentMeasure.left += parentWidth * this._left.getValue(this._host);\n        }\n\n        if (this._top.isPixel) {\n            this._currentMeasure.top += this._top.getValue(this._host);\n        } else {\n            this._currentMeasure.top += parentHeight * this._top.getValue(this._host);\n        }\n\n        this._currentMeasure.left += x;\n        this._currentMeasure.top += y;\n    }\n\n    /** @hidden */\n    protected _preMeasure(parentMeasure: Measure, context: CanvasRenderingContext2D): void {\n        // Do nothing\n    }\n\n    /** @hidden */\n    protected _additionalProcessing(parentMeasure: Measure, context: CanvasRenderingContext2D): void {\n        // Do nothing\n    }\n\n    /** @hidden */\n    protected _clipForChildren(context: CanvasRenderingContext2D): void {\n        // DO nothing\n    }\n\n    private static _ClipMeasure = new Measure(0, 0, 0, 0);\n    private _tmpMeasureA = new Measure(0, 0, 0, 0);\n    private _clip(context: CanvasRenderingContext2D, invalidatedRectangle?: Nullable<Measure>) {\n        context.beginPath();\n        Control._ClipMeasure.copyFrom(this._currentMeasure);\n        if (invalidatedRectangle) {\n            // Rotate the invalidated rect into the control's space\n            invalidatedRectangle.transformToRef(this._invertTransformMatrix, this._tmpMeasureA);\n\n            // Get the intersection of the rect in context space and the current context\n            var intersection = new Measure(0, 0, 0, 0);\n            intersection.left = Math.max(this._tmpMeasureA.left, this._currentMeasure.left);\n            intersection.top = Math.max(this._tmpMeasureA.top, this._currentMeasure.top);\n            intersection.width = Math.min(this._tmpMeasureA.left + this._tmpMeasureA.width, this._currentMeasure.left + this._currentMeasure.width) - intersection.left;\n            intersection.height = Math.min(this._tmpMeasureA.top + this._tmpMeasureA.height, this._currentMeasure.top + this._currentMeasure.height) - intersection.top;\n            Control._ClipMeasure.copyFrom(intersection);\n        }\n\n        if (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) {\n            var shadowOffsetX = this.shadowOffsetX;\n            var shadowOffsetY = this.shadowOffsetY;\n            var shadowBlur = this.shadowBlur;\n\n            var leftShadowOffset = Math.min(Math.min(shadowOffsetX, 0) - shadowBlur * 2, 0);\n            var rightShadowOffset = Math.max(Math.max(shadowOffsetX, 0) + shadowBlur * 2, 0);\n            var topShadowOffset = Math.min(Math.min(shadowOffsetY, 0) - shadowBlur * 2, 0);\n            var bottomShadowOffset = Math.max(Math.max(shadowOffsetY, 0) + shadowBlur * 2, 0);\n\n            context.rect(\n                Control._ClipMeasure.left + leftShadowOffset,\n                Control._ClipMeasure.top + topShadowOffset,\n                Control._ClipMeasure.width + rightShadowOffset - leftShadowOffset,\n                Control._ClipMeasure.height + bottomShadowOffset - topShadowOffset\n            );\n        } else {\n            context.rect(Control._ClipMeasure.left, Control._ClipMeasure.top, Control._ClipMeasure.width, Control._ClipMeasure.height);\n        }\n\n        context.clip();\n    }\n\n    /** @hidden */\n    public _render(context: CanvasRenderingContext2D, invalidatedRectangle?: Nullable<Measure>): boolean {\n        if (!this.isVisible || this.notRenderable || this._isClipped) {\n            this._isDirty = false;\n            return false;\n        }\n\n        this.host._numRenderCalls++;\n\n        context.save();\n\n        this._applyStates(context);\n\n        // Transform\n        this._transform(context);\n\n        // Clip\n        if (this.clipContent) {\n            this._clip(context, invalidatedRectangle);\n        }\n\n        if (this.onBeforeDrawObservable.hasObservers()) {\n            this.onBeforeDrawObservable.notifyObservers(this);\n        }\n\n        if (this.useBitmapCache && !this._wasDirty && this._cacheData) {\n            context.putImageData(this._cacheData, this._currentMeasure.left, this._currentMeasure.top);\n        } else {\n            this._draw(context, invalidatedRectangle);\n        }\n\n        if (this.useBitmapCache && this._wasDirty) {\n            this._cacheData = context.getImageData(this._currentMeasure.left, this._currentMeasure.top, this._currentMeasure.width, this._currentMeasure.height);\n        }\n\n        this._renderHighlight(context);\n\n        if (this.onAfterDrawObservable.hasObservers()) {\n            this.onAfterDrawObservable.notifyObservers(this);\n        }\n\n        context.restore();\n\n        return true;\n    }\n\n    /** @hidden */\n    public _draw(context: CanvasRenderingContext2D, invalidatedRectangle?: Nullable<Measure>): void {\n        // Do nothing\n    }\n\n    /**\n     * Tests if a given coordinates belong to the current control\n     * @param x defines x coordinate to test\n     * @param y defines y coordinate to test\n     * @returns true if the coordinates are inside the control\n     */\n    public contains(x: number, y: number): boolean {\n        // Invert transform\n        this._invertTransformMatrix.transformCoordinates(x, y, this._transformedPosition);\n\n        x = this._transformedPosition.x;\n        y = this._transformedPosition.y;\n\n        // Check\n        if (x < this._currentMeasure.left) {\n            return false;\n        }\n\n        if (x > this._currentMeasure.left + this._currentMeasure.width) {\n            return false;\n        }\n\n        if (y < this._currentMeasure.top) {\n            return false;\n        }\n\n        if (y > this._currentMeasure.top + this._currentMeasure.height) {\n            return false;\n        }\n\n        if (this.isPointerBlocker) {\n            this._host._shouldBlockPointer = true;\n        }\n        return true;\n    }\n\n    /** @hidden */\n    public _processPicking(x: number, y: number, pi: PointerInfoBase, type: number, pointerId: number, buttonIndex: number, deltaX?: number, deltaY?: number): boolean {\n        if (!this._isEnabled) {\n            return false;\n        }\n        if (!this.isHitTestVisible || !this.isVisible || this._doNotRender) {\n            return false;\n        }\n\n        if (!this.contains(x, y)) {\n            return false;\n        }\n\n        this._processObservables(type, x, y, pi, pointerId, buttonIndex, deltaX, deltaY);\n\n        return true;\n    }\n\n    /** @hidden */\n    public _onPointerMove(target: Control, coordinates: Vector2, pointerId: number, pi: PointerInfoBase): void {\n        var canNotify: boolean = this.onPointerMoveObservable.notifyObservers(coordinates, -1, target, this, pi);\n\n        if (canNotify && this.parent != null) { this.parent._onPointerMove(target, coordinates, pointerId, pi); }\n    }\n\n    /** @hidden */\n    public _onPointerEnter(target: Control, pi: PointerInfoBase): boolean {\n        if (!this._isEnabled) {\n            return false;\n        }\n        if (this._enterCount > 0) {\n            return false;\n        }\n\n        if (this._enterCount === -1) { // -1 is for touch input, we are now sure we are with a mouse or pencil\n            this._enterCount = 0;\n        }\n        this._enterCount++;\n\n        var canNotify: boolean = this.onPointerEnterObservable.notifyObservers(this, -1, target, this, pi);\n\n        if (canNotify && this.parent != null) { this.parent._onPointerEnter(target, pi); }\n\n        return true;\n    }\n\n    /** @hidden */\n    public _onPointerOut(target: Control, pi: Nullable<PointerInfoBase>, force = false): void {\n        if (!force && (!this._isEnabled || target === this)) {\n            return;\n        }\n        this._enterCount = 0;\n\n        var canNotify: boolean = true;\n\n        if (!target.isAscendant(this)) {\n            canNotify = this.onPointerOutObservable.notifyObservers(this, -1, target, this, pi);\n        }\n\n        if (canNotify && this.parent != null) {\n            this.parent._onPointerOut(target, pi, force);\n        }\n    }\n\n    /** @hidden */\n    public _onPointerDown(target: Control, coordinates: Vector2, pointerId: number, buttonIndex: number, pi: PointerInfoBase): boolean {\n        // Prevent pointerout to lose control context.\n        // Event redundancy is checked inside the function.\n        this._onPointerEnter(this, pi);\n\n        if (this._downCount !== 0) {\n            return false;\n        }\n\n        this._downCount++;\n\n        this._downPointerIds[pointerId] = true;\n\n        var canNotify: boolean = this.onPointerDownObservable.notifyObservers(new Vector2WithInfo(coordinates, buttonIndex), -1, target, this, pi);\n\n        if (canNotify && this.parent != null) { this.parent._onPointerDown(target, coordinates, pointerId, buttonIndex, pi); }\n\n        return true;\n    }\n\n    /** @hidden */\n    public _onPointerUp(target: Control, coordinates: Vector2, pointerId: number, buttonIndex: number, notifyClick: boolean, pi?: PointerInfoBase): void {\n        if (!this._isEnabled) {\n            return;\n        }\n        this._downCount = 0;\n\n        delete this._downPointerIds[pointerId];\n\n        var canNotifyClick: boolean = notifyClick;\n        if (notifyClick && (this._enterCount > 0 || this._enterCount === -1)) {\n            canNotifyClick = this.onPointerClickObservable.notifyObservers(new Vector2WithInfo(coordinates, buttonIndex), -1, target, this, pi);\n        }\n        var canNotify: boolean = this.onPointerUpObservable.notifyObservers(new Vector2WithInfo(coordinates, buttonIndex), -1, target, this, pi);\n\n        if (canNotify && this.parent != null) { this.parent._onPointerUp(target, coordinates, pointerId, buttonIndex, canNotifyClick, pi); }\n    }\n\n    /** @hidden */\n    public _forcePointerUp(pointerId: Nullable<number> = null) {\n        if (pointerId !== null) {\n            this._onPointerUp(this, Vector2.Zero(), pointerId, 0, true);\n        } else {\n            for (var key in this._downPointerIds) {\n                this._onPointerUp(this, Vector2.Zero(), +key as number, 0, true);\n            }\n        }\n    }\n\n    /** @hidden */\n    public _onWheelScroll(deltaX?: number, deltaY?: number): void {\n        if (!this._isEnabled) {\n            return;\n        }\n        var canNotify: boolean = this.onWheelObservable.notifyObservers(new Vector2(deltaX, deltaY));\n\n        if (canNotify && this.parent != null) { this.parent._onWheelScroll(deltaX, deltaY); }\n    }\n\n    /** @hidden */\n    public _onCanvasBlur(): void {}\n\n    /** @hidden */\n    public _processObservables(type: number, x: number, y: number, pi: PointerInfoBase, pointerId: number, buttonIndex: number, deltaX?: number, deltaY?: number): boolean {\n        if (!this._isEnabled) {\n            return false;\n        }\n        this._dummyVector2.copyFromFloats(x, y);\n        if (type === PointerEventTypes.POINTERMOVE) {\n            this._onPointerMove(this, this._dummyVector2, pointerId, pi);\n\n            var previousControlOver = this._host._lastControlOver[pointerId];\n            if (previousControlOver && previousControlOver !== this) {\n                previousControlOver._onPointerOut(this, pi);\n            }\n\n            if (previousControlOver !== this) {\n                this._onPointerEnter(this, pi);\n            }\n\n            this._host._lastControlOver[pointerId] = this;\n            return true;\n        }\n\n        if (type === PointerEventTypes.POINTERDOWN) {\n            this._onPointerDown(this, this._dummyVector2, pointerId, buttonIndex, pi);\n            this._host._registerLastControlDown(this, pointerId);\n            this._host._lastPickedControl = this;\n            return true;\n        }\n\n        if (type === PointerEventTypes.POINTERUP) {\n            if (this._host._lastControlDown[pointerId]) {\n                this._host._lastControlDown[pointerId]._onPointerUp(this, this._dummyVector2, pointerId, buttonIndex, true, pi);\n            }\n            delete this._host._lastControlDown[pointerId];\n            return true;\n        }\n\n        if (type === PointerEventTypes.POINTERWHEEL) {\n            if (this._host._lastControlOver[pointerId]) {\n                this._host._lastControlOver[pointerId]._onWheelScroll(deltaX, deltaY);\n                return true;\n            }\n        }\n\n        return false;\n    }\n\n    private _prepareFont() {\n        if (!this._font && !this._fontSet) {\n            return;\n        }\n\n        if (this._style) {\n            this._font = this._style.fontStyle + \" \" + this._style.fontWeight + \" \" + this.fontSizeInPixels + \"px \" + this._style.fontFamily;\n        } else {\n            this._font = this._fontStyle + \" \" + this._fontWeight + \" \" + this.fontSizeInPixels + \"px \" + this._fontFamily;\n        }\n\n        this._fontOffset = Control._GetFontOffset(this._font);\n    }\n\n    /** Releases associated resources */\n    public dispose() {\n        this.onDirtyObservable.clear();\n        this.onBeforeDrawObservable.clear();\n        this.onAfterDrawObservable.clear();\n        this.onPointerDownObservable.clear();\n        this.onPointerEnterObservable.clear();\n        this.onPointerMoveObservable.clear();\n        this.onPointerOutObservable.clear();\n        this.onPointerUpObservable.clear();\n        this.onPointerClickObservable.clear();\n        this.onWheelObservable.clear();\n\n        if (this._styleObserver && this._style) {\n            this._style.onChangedObservable.remove(this._styleObserver);\n            this._styleObserver = null;\n        }\n\n        if (this.parent) {\n            this.parent.removeControl(this);\n            this.parent = null;\n        }\n\n        if (this._host) {\n            var index = this._host._linkedControls.indexOf(this);\n            if (index > -1) {\n                this.linkWithMesh(null);\n            }\n        }\n\n        // Callback\n        this.onDisposeObservable.notifyObservers(this);\n        this.onDisposeObservable.clear();\n    }\n\n    // Statics\n    private static _HORIZONTAL_ALIGNMENT_LEFT = 0;\n    private static _HORIZONTAL_ALIGNMENT_RIGHT = 1;\n    private static _HORIZONTAL_ALIGNMENT_CENTER = 2;\n\n    private static _VERTICAL_ALIGNMENT_TOP = 0;\n    private static _VERTICAL_ALIGNMENT_BOTTOM = 1;\n    private static _VERTICAL_ALIGNMENT_CENTER = 2;\n\n    /** HORIZONTAL_ALIGNMENT_LEFT */\n    public static get HORIZONTAL_ALIGNMENT_LEFT(): number {\n        return Control._HORIZONTAL_ALIGNMENT_LEFT;\n    }\n\n    /** HORIZONTAL_ALIGNMENT_RIGHT */\n    public static get HORIZONTAL_ALIGNMENT_RIGHT(): number {\n        return Control._HORIZONTAL_ALIGNMENT_RIGHT;\n    }\n\n    /** HORIZONTAL_ALIGNMENT_CENTER */\n    public static get HORIZONTAL_ALIGNMENT_CENTER(): number {\n        return Control._HORIZONTAL_ALIGNMENT_CENTER;\n    }\n\n    /** VERTICAL_ALIGNMENT_TOP */\n    public static get VERTICAL_ALIGNMENT_TOP(): number {\n        return Control._VERTICAL_ALIGNMENT_TOP;\n    }\n\n    /** VERTICAL_ALIGNMENT_BOTTOM */\n    public static get VERTICAL_ALIGNMENT_BOTTOM(): number {\n        return Control._VERTICAL_ALIGNMENT_BOTTOM;\n    }\n\n    /** VERTICAL_ALIGNMENT_CENTER */\n    public static get VERTICAL_ALIGNMENT_CENTER(): number {\n        return Control._VERTICAL_ALIGNMENT_CENTER;\n    }\n\n    private static _FontHeightSizes: { [key: string]: { ascent: number, height: number, descent: number } } = {};\n\n    /** @hidden */\n    public static _GetFontOffset(font: string): { ascent: number, height: number, descent: number } {\n\n        if (Control._FontHeightSizes[font]) {\n            return Control._FontHeightSizes[font];\n        }\n\n        var text = document.createElement(\"span\");\n        text.innerHTML = \"Hg\";\n        text.style.font = font;\n\n        var block = document.createElement(\"div\");\n        block.style.display = \"inline-block\";\n        block.style.width = \"1px\";\n        block.style.height = \"0px\";\n        block.style.verticalAlign = \"bottom\";\n\n        var div = document.createElement(\"div\");\n        div.style.whiteSpace = \"nowrap\";\n        div.appendChild(text);\n        div.appendChild(block);\n\n        document.body.appendChild(div);\n\n        var fontAscent = 0;\n        var fontHeight = 0;\n        try {\n            fontHeight = block.getBoundingClientRect().top - text.getBoundingClientRect().top;\n            block.style.verticalAlign = \"baseline\";\n            fontAscent = block.getBoundingClientRect().top - text.getBoundingClientRect().top;\n        } finally {\n            document.body.removeChild(div);\n        }\n        var result = { ascent: fontAscent, height: fontHeight, descent: fontHeight - fontAscent };\n        Control._FontHeightSizes[font] = result;\n\n        return result;\n    }\n\n    /**\n     * Creates a stack panel that can be used to render headers\n     * @param control defines the control to associate with the header\n     * @param text defines the text of the header\n     * @param size defines the size of the header\n     * @param options defines options used to configure the header\n     * @returns a new StackPanel\n     * @ignore\n     * @hidden\n     */\n    public static AddHeader: (control: Control, text: string, size: string | number, options: { isHorizontal: boolean, controlFirst: boolean }) => any = () => { };\n\n    /** @hidden */\n    protected static drawEllipse(x: number, y: number, width: number, height: number, context: CanvasRenderingContext2D): void {\n        context.translate(x, y);\n        context.scale(width, height);\n\n        context.beginPath();\n        context.arc(0, 0, 1, 0, 2 * Math.PI);\n        context.closePath();\n\n        context.scale(1 / width, 1 / height);\n        context.translate(-x, -y);\n    }\n}\n_TypeStore.RegisteredTypes[\"BABYLON.GUI.Control\"] = Control;", "import { Nullable } from \"@babylonjs/core/types\";\r\nimport { Logger } from \"@babylonjs/core/Misc/logger\";\r\n\r\nimport { Control } from \"./control\";\r\nimport { Measure } from \"../measure\";\r\nimport { AdvancedDynamicTexture } from \"../advancedDynamicTexture\";\r\nimport { _TypeStore } from '@babylonjs/core/Misc/typeStore';\r\nimport { PointerInfoBase } from '@babylonjs/core/Events/pointerEvents';\r\n\r\n/**\r\n * Root class for 2D containers\r\n * @see https://doc.babylonjs.com/how_to/gui#containers\r\n */\r\nexport class Container extends Control {\r\n    /** @hidden */\r\n    public _children = new Array<Control>();\r\n    /** @hidden */\r\n    protected _measureForChildren = Measure.Empty();\r\n    /** @hidden */\r\n    protected _background = \"\";\r\n    /** @hidden */\r\n    protected _adaptWidthToChildren = false;\r\n    /** @hidden */\r\n    protected _adaptHeightToChildren = false;\r\n\r\n    /**\r\n     * Gets or sets a boolean indicating that layout cycle errors should be displayed on the console\r\n     */\r\n    public logLayoutCycleErrors = false;\r\n\r\n    /**\r\n     * Gets or sets the number of layout cycles (a change involved by a control while evaluating the layout) allowed\r\n     */\r\n    public maxLayoutCycle = 3;\r\n\r\n    /** Gets or sets a boolean indicating if the container should try to adapt to its children height */\r\n    public get adaptHeightToChildren(): boolean {\r\n        return this._adaptHeightToChildren;\r\n    }\r\n\r\n    public set adaptHeightToChildren(value: boolean) {\r\n        if (this._adaptHeightToChildren === value) {\r\n            return;\r\n        }\r\n\r\n        this._adaptHeightToChildren = value;\r\n\r\n        if (value) {\r\n            this.height = \"100%\";\r\n        }\r\n\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets a boolean indicating if the container should try to adapt to its children width */\r\n    public get adaptWidthToChildren(): boolean {\r\n        return this._adaptWidthToChildren;\r\n    }\r\n\r\n    public set adaptWidthToChildren(value: boolean) {\r\n        if (this._adaptWidthToChildren === value) {\r\n            return;\r\n        }\r\n\r\n        this._adaptWidthToChildren = value;\r\n\r\n        if (value) {\r\n            this.width = \"100%\";\r\n        }\r\n\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets background color */\r\n    public get background(): string {\r\n        return this._background;\r\n    }\r\n\r\n    public set background(value: string) {\r\n        if (this._background === value) {\r\n            return;\r\n        }\r\n\r\n        this._background = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets the list of children */\r\n    public get children(): Control[] {\r\n        return this._children;\r\n    }\r\n\r\n    /**\r\n     * Creates a new Container\r\n     * @param name defines the name of the container\r\n     */\r\n    constructor(public name?: string) {\r\n        super(name);\r\n    }\r\n\r\n    protected _getTypeName(): string {\r\n        return \"Container\";\r\n    }\r\n\r\n    public _flagDescendantsAsMatrixDirty(): void {\r\n        for (var child of this.children) {\r\n            child._markMatrixAsDirty();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Gets a child using its name\r\n     * @param name defines the child name to look for\r\n     * @returns the child control if found\r\n     */\r\n    public getChildByName(name: string): Nullable<Control> {\r\n        for (var child of this.children) {\r\n            if (child.name === name) {\r\n                return child;\r\n            }\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * Gets a child using its type and its name\r\n     * @param name defines the child name to look for\r\n     * @param type defines the child type to look for\r\n     * @returns the child control if found\r\n     */\r\n    public getChildByType(name: string, type: string): Nullable<Control> {\r\n        for (var child of this.children) {\r\n            if (child.typeName === type) {\r\n                return child;\r\n            }\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * Search for a specific control in children\r\n     * @param control defines the control to look for\r\n     * @returns true if the control is in child list\r\n     */\r\n    public containsControl(control: Control): boolean {\r\n        return this.children.indexOf(control) !== -1;\r\n    }\r\n\r\n    /**\r\n     * Adds a new control to the current container\r\n     * @param control defines the control to add\r\n     * @returns the current container\r\n     */\r\n    public addControl(control: Nullable<Control>): Container {\r\n        if (!control) {\r\n            return this;\r\n        }\r\n\r\n        var index = this._children.indexOf(control);\r\n\r\n        if (index !== -1) {\r\n            return this;\r\n        }\r\n        control._link(this._host);\r\n\r\n        control._markAllAsDirty();\r\n\r\n        this._reOrderControl(control);\r\n\r\n        this._markAsDirty();\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Removes all controls from the current container\r\n     * @returns the current container\r\n     */\r\n    public clearControls(): Container {\r\n        let children = this.children.slice();\r\n\r\n        for (var child of children) {\r\n            this.removeControl(child);\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Removes a control from the current container\r\n     * @param control defines the control to remove\r\n     * @returns the current container\r\n     */\r\n    public removeControl(control: Control): Container {\r\n        var index = this._children.indexOf(control);\r\n\r\n        if (index !== -1) {\r\n            this._children.splice(index, 1);\r\n\r\n            control.parent = null;\r\n        }\r\n\r\n        control.linkWithMesh(null);\r\n\r\n        if (this._host) {\r\n            this._host._cleanControlAfterRemoval(control);\r\n        }\r\n\r\n        this._markAsDirty();\r\n        return this;\r\n    }\r\n\r\n    /** @hidden */\r\n    public _reOrderControl(control: Control): void {\r\n        this.removeControl(control);\r\n\r\n        let wasAdded = false;\r\n        for (var index = 0; index < this._children.length; index++) {\r\n            if (this._children[index].zIndex > control.zIndex) {\r\n                this._children.splice(index, 0, control);\r\n                wasAdded = true;\r\n                break;\r\n            }\r\n        }\r\n\r\n        if (!wasAdded) {\r\n            this._children.push(control);\r\n        }\r\n\r\n        control.parent = this;\r\n\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** @hidden */\r\n    public _offsetLeft(offset: number) {\r\n        super._offsetLeft(offset);\r\n\r\n        for (var child of this._children) {\r\n            child._offsetLeft(offset);\r\n        }\r\n    }\r\n\r\n    /** @hidden */\r\n    public _offsetTop(offset: number) {\r\n        super._offsetTop(offset);\r\n\r\n        for (var child of this._children) {\r\n            child._offsetTop(offset);\r\n        }\r\n    }\r\n\r\n    /** @hidden */\r\n    public _markAllAsDirty(): void {\r\n        super._markAllAsDirty();\r\n\r\n        for (var index = 0; index < this._children.length; index++) {\r\n            this._children[index]._markAllAsDirty();\r\n        }\r\n    }\r\n\r\n    /** @hidden */\r\n    protected _localDraw(context: CanvasRenderingContext2D): void {\r\n        if (this._background) {\r\n            context.save();\r\n            if (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) {\r\n                context.shadowColor = this.shadowColor;\r\n                context.shadowBlur = this.shadowBlur;\r\n                context.shadowOffsetX = this.shadowOffsetX;\r\n                context.shadowOffsetY = this.shadowOffsetY;\r\n            }\r\n\r\n            context.fillStyle = this._background;\r\n            context.fillRect(this._currentMeasure.left, this._currentMeasure.top, this._currentMeasure.width, this._currentMeasure.height);\r\n            context.restore();\r\n        }\r\n    }\r\n\r\n    /** @hidden */\r\n    public _link(host: AdvancedDynamicTexture): void {\r\n        super._link(host);\r\n\r\n        for (var child of this._children) {\r\n            child._link(host);\r\n        }\r\n    }\r\n\r\n    /** @hidden */\r\n    protected _beforeLayout() {\r\n        // Do nothing\r\n    }\r\n\r\n    /** @hidden */\r\n    protected _processMeasures(parentMeasure: Measure, context: CanvasRenderingContext2D): void {\r\n        if (this._isDirty || !this._cachedParentMeasure.isEqualsTo(parentMeasure)) {\r\n            super._processMeasures(parentMeasure, context);\r\n            this._evaluateClippingState(parentMeasure);\r\n        }\r\n    }\r\n\r\n    /** @hidden */\r\n    public _layout(parentMeasure: Measure, context: CanvasRenderingContext2D): boolean {\r\n        if (!this.isDirty && (!this.isVisible || this.notRenderable)) {\r\n            return false;\r\n        }\r\n\r\n        this.host._numLayoutCalls++;\r\n\r\n        if (this._isDirty) {\r\n            this._currentMeasure.transformToRef(this._transformMatrix, this._prevCurrentMeasureTransformedIntoGlobalSpace);\r\n        }\r\n\r\n        let rebuildCount = 0;\r\n\r\n        context.save();\r\n\r\n        this._applyStates(context);\r\n\r\n        this._beforeLayout();\r\n\r\n        do {\r\n            let computedWidth = -1;\r\n            let computedHeight = -1;\r\n            this._rebuildLayout = false;\r\n            this._processMeasures(parentMeasure, context);\r\n\r\n            if (!this._isClipped) {\r\n                for (var child of this._children) {\r\n                    child._tempParentMeasure.copyFrom(this._measureForChildren);\r\n\r\n                    if (child._layout(this._measureForChildren, context)) {\r\n\r\n                        if (this.adaptWidthToChildren && child._width.isPixel) {\r\n                            computedWidth = Math.max(computedWidth, child._currentMeasure.width + child.paddingLeftInPixels + child.paddingRightInPixels);\r\n                        }\r\n                        if (this.adaptHeightToChildren && child._height.isPixel) {\r\n                            computedHeight = Math.max(computedHeight, child._currentMeasure.height + child.paddingTopInPixels + child.paddingBottomInPixels);\r\n                        }\r\n                    }\r\n                }\r\n\r\n                if (this.adaptWidthToChildren && computedWidth >= 0) {\r\n                    computedWidth += this.paddingLeftInPixels + this.paddingRightInPixels;\r\n                    if (this.width !== computedWidth + \"px\") {\r\n                        this.width = computedWidth + \"px\";\r\n                        this._rebuildLayout = true;\r\n                    }\r\n                }\r\n                if (this.adaptHeightToChildren && computedHeight >= 0) {\r\n                    computedHeight += this.paddingTopInPixels + this.paddingBottomInPixels;\r\n                    if (this.height !== computedHeight + \"px\") {\r\n                        this.height = computedHeight + \"px\";\r\n                        this._rebuildLayout = true;\r\n                    }\r\n                }\r\n\r\n                this._postMeasure();\r\n            }\r\n            rebuildCount++;\r\n        }\r\n        while (this._rebuildLayout && rebuildCount < this.maxLayoutCycle);\r\n\r\n        if (rebuildCount >= 3 && this.logLayoutCycleErrors) {\r\n            Logger.Error(`Layout cycle detected in GUI (Container name=${this.name}, uniqueId=${this.uniqueId})`);\r\n        }\r\n\r\n        context.restore();\r\n\r\n        if (this._isDirty) {\r\n            this.invalidateRect();\r\n\r\n            this._isDirty = false;\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    protected _postMeasure() {\r\n        // Do nothing by default\r\n    }\r\n\r\n    /** @hidden */\r\n    public _draw(context: CanvasRenderingContext2D, invalidatedRectangle?: Measure): void {\r\n\r\n        this._localDraw(context);\r\n\r\n        if (this.clipChildren) {\r\n            this._clipForChildren(context);\r\n        }\r\n\r\n        for (var child of this._children) {\r\n            // Only redraw parts of the screen that are invalidated\r\n            if (invalidatedRectangle) {\r\n                if (!child._intersectsRect(invalidatedRectangle)) {\r\n                    continue;\r\n                }\r\n            }\r\n            child._render(context, invalidatedRectangle);\r\n        }\r\n    }\r\n\r\n    public getDescendantsToRef(results: Control[], directDescendantsOnly: boolean = false, predicate?: (control: Control) => boolean): void {\r\n        if (!this.children) {\r\n            return;\r\n        }\r\n\r\n        for (var index = 0; index < this.children.length; index++) {\r\n            var item = this.children[index];\r\n\r\n            if (!predicate || predicate(item)) {\r\n                results.push(item);\r\n            }\r\n\r\n            if (!directDescendantsOnly) {\r\n                item.getDescendantsToRef(results, false, predicate);\r\n            }\r\n        }\r\n    }\r\n\r\n    /** @hidden */\r\n    public _processPicking(x: number, y: number, pi: PointerInfoBase, type: number, pointerId: number, buttonIndex: number, deltaX?: number, deltaY?: number): boolean {\r\n        if (!this._isEnabled || !this.isVisible || this.notRenderable) {\r\n            return false;\r\n        }\r\n\r\n        if (!super.contains(x, y)) {\r\n            return false;\r\n        }\r\n\r\n        // Checking backwards to pick closest first\r\n        for (var index = this._children.length - 1; index >= 0; index--) {\r\n            var child = this._children[index];\r\n            if (child._processPicking(x, y, pi, type, pointerId, buttonIndex, deltaX, deltaY)) {\r\n                if (child.hoverCursor) {\r\n                    this._host._changeCursor(child.hoverCursor);\r\n                }\r\n                return true;\r\n            }\r\n        }\r\n\r\n        if (!this.isHitTestVisible) {\r\n            return false;\r\n        }\r\n\r\n        return this._processObservables(type, x, y, pi, pointerId, buttonIndex, deltaX, deltaY);\r\n    }\r\n\r\n    /** @hidden */\r\n    protected _additionalProcessing(parentMeasure: Measure, context: CanvasRenderingContext2D): void {\r\n        super._additionalProcessing(parentMeasure, context);\r\n\r\n        this._measureForChildren.copyFrom(this._currentMeasure);\r\n    }\r\n\r\n    /** Releases associated resources */\r\n    public dispose() {\r\n        super.dispose();\r\n\r\n        for (var index = this.children.length - 1; index >= 0; index--) {\r\n            this.children[index].dispose();\r\n        }\r\n    }\r\n}\r\n_TypeStore.RegisteredTypes[\"BABYLON.GUI.Container\"] = Container;", "import { Container } from \"./container\";\r\nimport { Measure } from \"../measure\";\r\nimport { _TypeStore } from '@babylonjs/core/Misc/typeStore';\r\n\r\n/** Class used to create rectangle container */\r\nexport class Rectangle extends Container {\r\n    private _thickness = 1;\r\n    private _cornerRadius = 0;\r\n\r\n    /** Gets or sets border thickness */\r\n    public get thickness(): number {\r\n        return this._thickness;\r\n    }\r\n\r\n    public set thickness(value: number) {\r\n        if (this._thickness === value) {\r\n            return;\r\n        }\r\n\r\n        this._thickness = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets the corner radius angle */\r\n    public get cornerRadius(): number {\r\n        return this._cornerRadius;\r\n    }\r\n\r\n    public set cornerRadius(value: number) {\r\n        if (value < 0) {\r\n            value = 0;\r\n        }\r\n\r\n        if (this._cornerRadius === value) {\r\n            return;\r\n        }\r\n\r\n        this._cornerRadius = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Creates a new Rectangle\r\n     * @param name defines the control name\r\n     */\r\n    constructor(public name?: string) {\r\n        super(name);\r\n    }\r\n\r\n    protected _getTypeName(): string {\r\n        return \"Rectangle\";\r\n    }\r\n\r\n    protected _localDraw(context: CanvasRenderingContext2D): void {\r\n        context.save();\r\n\r\n        if (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) {\r\n            context.shadowColor = this.shadowColor;\r\n            context.shadowBlur = this.shadowBlur;\r\n            context.shadowOffsetX = this.shadowOffsetX;\r\n            context.shadowOffsetY = this.shadowOffsetY;\r\n        }\r\n\r\n        if (this._background) {\r\n            context.fillStyle = this._background;\r\n\r\n            if (this._cornerRadius) {\r\n                this._drawRoundedRect(context, this._thickness / 2);\r\n                context.fill();\r\n            } else {\r\n                context.fillRect(this._currentMeasure.left, this._currentMeasure.top, this._currentMeasure.width, this._currentMeasure.height);\r\n            }\r\n        }\r\n\r\n        if (this._thickness) {\r\n\r\n            if (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) {\r\n                context.shadowBlur = 0;\r\n                context.shadowOffsetX = 0;\r\n                context.shadowOffsetY = 0;\r\n            }\r\n\r\n            if (this.color) {\r\n                context.strokeStyle = this.color;\r\n            }\r\n            context.lineWidth = this._thickness;\r\n\r\n            if (this._cornerRadius) {\r\n                this._drawRoundedRect(context, this._thickness / 2);\r\n                context.stroke();\r\n            } else {\r\n                context.strokeRect(this._currentMeasure.left + this._thickness / 2, this._currentMeasure.top + this._thickness / 2,\r\n                    this._currentMeasure.width - this._thickness, this._currentMeasure.height - this._thickness);\r\n            }\r\n        }\r\n\r\n        context.restore();\r\n    }\r\n\r\n    protected _additionalProcessing(parentMeasure: Measure, context: CanvasRenderingContext2D): void {\r\n        super._additionalProcessing(parentMeasure, context);\r\n\r\n        this._measureForChildren.width -= 2 * this._thickness;\r\n        this._measureForChildren.height -= 2 * this._thickness;\r\n        this._measureForChildren.left += this._thickness;\r\n        this._measureForChildren.top += this._thickness;\r\n    }\r\n\r\n    private _drawRoundedRect(context: CanvasRenderingContext2D, offset: number = 0): void {\r\n        var x = this._currentMeasure.left + offset;\r\n        var y = this._currentMeasure.top + offset;\r\n        var width = this._currentMeasure.width - offset * 2;\r\n        var height = this._currentMeasure.height - offset * 2;\r\n\r\n        var radius = Math.min(height / 2 - 2, Math.min(width / 2 - 2, this._cornerRadius));\r\n\r\n        context.beginPath();\r\n        context.moveTo(x + radius, y);\r\n        context.lineTo(x + width - radius, y);\r\n        context.quadraticCurveTo(x + width, y, x + width, y + radius);\r\n        context.lineTo(x + width, y + height - radius);\r\n        context.quadraticCurveTo(x + width, y + height, x + width - radius, y + height);\r\n        context.lineTo(x + radius, y + height);\r\n        context.quadraticCurveTo(x, y + height, x, y + height - radius);\r\n        context.lineTo(x, y + radius);\r\n        context.quadraticCurveTo(x, y, x + radius, y);\r\n        context.closePath();\r\n    }\r\n\r\n    protected _clipForChildren(context: CanvasRenderingContext2D) {\r\n        if (this._cornerRadius) {\r\n            this._drawRoundedRect(context, this._thickness);\r\n            context.clip();\r\n        }\r\n    }\r\n}\r\n_TypeStore.RegisteredTypes[\"BABYLON.GUI.Rectangle\"] = Rectangle;", "import { Observable } from \"@babylonjs/core/Misc/observable\";\r\nimport { Measure } from \"../measure\";\r\nimport { ValueAndUnit } from \"../valueAndUnit\";\r\nimport { Control } from \"./control\";\r\nimport { _TypeStore } from \"@babylonjs/core/Misc/typeStore\";\r\nimport { Nullable } from \"@babylonjs/core/types\";\r\n\r\n/**\r\n * Enum that determines the text-wrapping mode to use.\r\n */\r\nexport enum TextWrapping {\r\n    /**\r\n     * Clip the text when it's larger than Control.width; this is the default mode.\r\n     */\r\n    Clip = 0,\r\n\r\n    /**\r\n     * Wrap the text word-wise, i.e. try to add line-breaks at word boundary to fit within Control.width.\r\n     */\r\n    WordWrap = 1,\r\n\r\n    /**\r\n     * Ellipsize the text, i.e. shrink with trailing \u2026 when text is larger than Control.width.\r\n     */\r\n    Ellipsis,\r\n}\r\n\r\n/**\r\n * Class used to create text block control\r\n */\r\nexport class TextBlock extends Control {\r\n    private _text = \"\";\r\n    private _textWrapping = TextWrapping.Clip;\r\n    private _textHorizontalAlignment = Control.HORIZONTAL_ALIGNMENT_CENTER;\r\n    private _textVerticalAlignment = Control.VERTICAL_ALIGNMENT_CENTER;\r\n\r\n    private _lines: any[];\r\n    private _resizeToFit: boolean = false;\r\n    private _lineSpacing: ValueAndUnit = new ValueAndUnit(0);\r\n    private _outlineWidth: number = 0;\r\n    private _outlineColor: string = \"white\";\r\n    private _underline: boolean = false;\r\n    private _lineThrough: boolean = false;\r\n    /**\r\n     * An event triggered after the text is changed\r\n     */\r\n    public onTextChangedObservable = new Observable<TextBlock>();\r\n\r\n    /**\r\n     * An event triggered after the text was broken up into lines\r\n     */\r\n    public onLinesReadyObservable = new Observable<TextBlock>();\r\n\r\n    /**\r\n     * Function used to split a string into words. By default, a string is split at each space character found\r\n     */\r\n    public wordSplittingFunction: Nullable<(line: string) => string[]>;\r\n\r\n    /**\r\n     * Return the line list (you may need to use the onLinesReadyObservable to make sure the list is ready)\r\n     */\r\n    public get lines(): any[] {\r\n        return this._lines;\r\n    }\r\n\r\n    /**\r\n     * Gets or sets an boolean indicating that the TextBlock will be resized to fit container\r\n     */\r\n    public get resizeToFit(): boolean {\r\n        return this._resizeToFit;\r\n    }\r\n\r\n    /**\r\n     * Gets or sets an boolean indicating that the TextBlock will be resized to fit container\r\n     */\r\n    public set resizeToFit(value: boolean) {\r\n        if (this._resizeToFit === value) {\r\n            return;\r\n        }\r\n        this._resizeToFit = value;\r\n\r\n        if (this._resizeToFit) {\r\n            this._width.ignoreAdaptiveScaling = true;\r\n            this._height.ignoreAdaptiveScaling = true;\r\n        }\r\n\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Gets or sets a boolean indicating if text must be wrapped\r\n     */\r\n    public get textWrapping(): TextWrapping | boolean {\r\n        return this._textWrapping;\r\n    }\r\n\r\n    /**\r\n     * Gets or sets a boolean indicating if text must be wrapped\r\n     */\r\n    public set textWrapping(value: TextWrapping | boolean) {\r\n        if (this._textWrapping === value) {\r\n            return;\r\n        }\r\n        this._textWrapping = +value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Gets or sets text to display\r\n     */\r\n    public get text(): string {\r\n        return this._text;\r\n    }\r\n\r\n    /**\r\n     * Gets or sets text to display\r\n     */\r\n    public set text(value: string) {\r\n        if (this._text === value) {\r\n            return;\r\n        }\r\n        this._text = value;\r\n        this._markAsDirty();\r\n\r\n        this.onTextChangedObservable.notifyObservers(this);\r\n    }\r\n\r\n    /**\r\n     * Gets or sets text horizontal alignment (BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_CENTER by default)\r\n     */\r\n    public get textHorizontalAlignment(): number {\r\n        return this._textHorizontalAlignment;\r\n    }\r\n\r\n    /**\r\n     * Gets or sets text horizontal alignment (BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_CENTER by default)\r\n     */\r\n    public set textHorizontalAlignment(value: number) {\r\n        if (this._textHorizontalAlignment === value) {\r\n            return;\r\n        }\r\n\r\n        this._textHorizontalAlignment = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Gets or sets text vertical alignment (BABYLON.GUI.Control.VERTICAL_ALIGNMENT_CENTER by default)\r\n     */\r\n    public get textVerticalAlignment(): number {\r\n        return this._textVerticalAlignment;\r\n    }\r\n\r\n    /**\r\n     * Gets or sets text vertical alignment (BABYLON.GUI.Control.VERTICAL_ALIGNMENT_CENTER by default)\r\n     */\r\n    public set textVerticalAlignment(value: number) {\r\n        if (this._textVerticalAlignment === value) {\r\n            return;\r\n        }\r\n\r\n        this._textVerticalAlignment = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Gets or sets line spacing value\r\n     */\r\n    public set lineSpacing(value: string | number) {\r\n        if (this._lineSpacing.fromString(value)) {\r\n            this._markAsDirty();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Gets or sets line spacing value\r\n     */\r\n    public get lineSpacing(): string | number {\r\n        return this._lineSpacing.toString(this._host);\r\n    }\r\n\r\n    /**\r\n     * Gets or sets outlineWidth of the text to display\r\n     */\r\n    public get outlineWidth(): number {\r\n        return this._outlineWidth;\r\n    }\r\n\r\n    /**\r\n     * Gets or sets outlineWidth of the text to display\r\n     */\r\n    public set outlineWidth(value: number) {\r\n        if (this._outlineWidth === value) {\r\n            return;\r\n        }\r\n        this._outlineWidth = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Gets or sets a boolean indicating that text must have underline\r\n     */\r\n    public get underline(): boolean {\r\n        return this._underline;\r\n    }\r\n\r\n    /**\r\n     * Gets or sets a boolean indicating that text must have underline\r\n     */\r\n    public set underline(value: boolean) {\r\n        if (this._underline === value) {\r\n            return;\r\n        }\r\n        this._underline = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Gets or sets an boolean indicating that text must be crossed out\r\n     */\r\n    public get lineThrough(): boolean {\r\n        return this._lineThrough;\r\n    }\r\n\r\n    /**\r\n     * Gets or sets an boolean indicating that text must be crossed out\r\n     */\r\n    public set lineThrough(value: boolean) {\r\n        if (this._lineThrough === value) {\r\n            return;\r\n        }\r\n        this._lineThrough = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Gets or sets outlineColor of the text to display\r\n     */\r\n    public get outlineColor(): string {\r\n        return this._outlineColor;\r\n    }\r\n\r\n    /**\r\n     * Gets or sets outlineColor of the text to display\r\n     */\r\n    public set outlineColor(value: string) {\r\n        if (this._outlineColor === value) {\r\n            return;\r\n        }\r\n        this._outlineColor = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Creates a new TextBlock object\r\n     * @param name defines the name of the control\r\n     * @param text defines the text to display (emptry string by default)\r\n     */\r\n    constructor(\r\n        /**\r\n         * Defines the name of the control\r\n         */\r\n        public name?: string,\r\n        text: string = \"\"\r\n    ) {\r\n        super(name);\r\n\r\n        this.text = text;\r\n    }\r\n\r\n    protected _getTypeName(): string {\r\n        return \"TextBlock\";\r\n    }\r\n\r\n    protected _processMeasures(parentMeasure: Measure, context: CanvasRenderingContext2D): void {\r\n        if (!this._fontOffset) {\r\n            this._fontOffset = Control._GetFontOffset(context.font);\r\n        }\r\n\r\n        super._processMeasures(parentMeasure, context);\r\n\r\n        // Prepare lines\r\n        this._lines = this._breakLines(this._currentMeasure.width, context);\r\n        this.onLinesReadyObservable.notifyObservers(this);\r\n\r\n        let maxLineWidth: number = 0;\r\n\r\n        for (let i = 0; i < this._lines.length; i++) {\r\n            const line = this._lines[i];\r\n\r\n            if (line.width > maxLineWidth) {\r\n                maxLineWidth = line.width;\r\n            }\r\n        }\r\n\r\n        if (this._resizeToFit) {\r\n            if (this._textWrapping === TextWrapping.Clip) {\r\n                let newWidth = (this.paddingLeftInPixels + this.paddingRightInPixels + maxLineWidth) | 0;\r\n                if (newWidth !== this._width.internalValue) {\r\n                    this._width.updateInPlace(newWidth, ValueAndUnit.UNITMODE_PIXEL);\r\n                    this._rebuildLayout = true;\r\n                }\r\n            }\r\n            let newHeight = (this.paddingTopInPixels + this.paddingBottomInPixels + this._fontOffset.height * this._lines.length) | 0;\r\n\r\n            if (this._lines.length > 0 && this._lineSpacing.internalValue !== 0) {\r\n                let lineSpacing = 0;\r\n                if (this._lineSpacing.isPixel) {\r\n                    lineSpacing = this._lineSpacing.getValue(this._host);\r\n                } else {\r\n                    lineSpacing = this._lineSpacing.getValue(this._host) * this._height.getValueInPixel(this._host, this._cachedParentMeasure.height);\r\n                }\r\n\r\n                newHeight += (this._lines.length - 1) * lineSpacing;\r\n            }\r\n\r\n            if (newHeight !== this._height.internalValue) {\r\n                this._height.updateInPlace(newHeight, ValueAndUnit.UNITMODE_PIXEL);\r\n                this._rebuildLayout = true;\r\n            }\r\n        }\r\n    }\r\n\r\n    private _drawText(text: string, textWidth: number, y: number, context: CanvasRenderingContext2D): void {\r\n        var width = this._currentMeasure.width;\r\n        var x = 0;\r\n        switch (this._textHorizontalAlignment) {\r\n            case Control.HORIZONTAL_ALIGNMENT_LEFT:\r\n                x = 0;\r\n                break;\r\n            case Control.HORIZONTAL_ALIGNMENT_RIGHT:\r\n                x = width - textWidth;\r\n                break;\r\n            case Control.HORIZONTAL_ALIGNMENT_CENTER:\r\n                x = (width - textWidth) / 2;\r\n                break;\r\n        }\r\n\r\n        if (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) {\r\n            context.shadowColor = this.shadowColor;\r\n            context.shadowBlur = this.shadowBlur;\r\n            context.shadowOffsetX = this.shadowOffsetX;\r\n            context.shadowOffsetY = this.shadowOffsetY;\r\n        }\r\n\r\n        if (this.outlineWidth) {\r\n            context.strokeText(text, this._currentMeasure.left + x, y);\r\n        }\r\n        context.fillText(text, this._currentMeasure.left + x, y);\r\n\r\n        if (this._underline) {\r\n            context.beginPath();\r\n            context.lineWidth = Math.round(this.fontSizeInPixels * 0.05);\r\n            context.moveTo(this._currentMeasure.left + x, y + 3);\r\n            context.lineTo(this._currentMeasure.left + x + textWidth, y + 3);\r\n            context.stroke();\r\n            context.closePath();\r\n        }\r\n\r\n        if (this._lineThrough) {\r\n            context.beginPath();\r\n            context.lineWidth = Math.round(this.fontSizeInPixels * 0.05);\r\n            context.moveTo(this._currentMeasure.left + x, y - this.fontSizeInPixels / 3);\r\n            context.lineTo(this._currentMeasure.left + x + textWidth, y - this.fontSizeInPixels / 3);\r\n            context.stroke();\r\n            context.closePath();\r\n        }\r\n    }\r\n\r\n    /** @hidden */\r\n    public _draw(context: CanvasRenderingContext2D, invalidatedRectangle?: Nullable<Measure>): void {\r\n        context.save();\r\n\r\n        this._applyStates(context);\r\n\r\n        // Render lines\r\n        this._renderLines(context);\r\n\r\n        context.restore();\r\n    }\r\n\r\n    protected _applyStates(context: CanvasRenderingContext2D): void {\r\n        super._applyStates(context);\r\n        if (this.outlineWidth) {\r\n            context.lineWidth = this.outlineWidth;\r\n            context.strokeStyle = this.outlineColor;\r\n            context.lineJoin = 'miter';\r\n            context.miterLimit = 2;\r\n        }\r\n    }\r\n\r\n    protected _breakLines(refWidth: number, context: CanvasRenderingContext2D): object[] {\r\n        var lines = [];\r\n        var _lines = this.text.split(\"\\n\");\r\n\r\n        if (this._textWrapping === TextWrapping.Ellipsis) {\r\n            for (var _line of _lines) {\r\n                lines.push(this._parseLineEllipsis(_line, refWidth, context));\r\n            }\r\n        } else if (this._textWrapping === TextWrapping.WordWrap) {\r\n            for (var _line of _lines) {\r\n                lines.push(...this._parseLineWordWrap(_line, refWidth, context));\r\n            }\r\n        } else {\r\n            for (var _line of _lines) {\r\n                lines.push(this._parseLine(_line, context));\r\n            }\r\n        }\r\n\r\n        return lines;\r\n    }\r\n\r\n    protected _parseLine(line: string = \"\", context: CanvasRenderingContext2D): object {\r\n        return { text: line, width: context.measureText(line).width };\r\n    }\r\n\r\n    protected _parseLineEllipsis(line: string = \"\", width: number, context: CanvasRenderingContext2D): object {\r\n        var lineWidth = context.measureText(line).width;\r\n\r\n        if (lineWidth > width) {\r\n            line += \"\u2026\";\r\n        }\r\n        // unicode support. split('') does not work with unicode!\r\n        // make sure Array.from is available\r\n        const characters = Array.from && Array.from(line);\r\n        if (!characters) {\r\n            // no array.from, use the old method\r\n            while (line.length > 2 && lineWidth > width) {\r\n                line = line.slice(0, -2) + \"\u2026\";\r\n                lineWidth = context.measureText(line).width;\r\n            }\r\n        } else {\r\n            while (characters.length && lineWidth > width) {\r\n                characters.pop();\r\n                line = `${characters.join(\"\")}...`;\r\n                lineWidth = context.measureText(line).width;\r\n            }\r\n        }\r\n\r\n        return { text: line, width: lineWidth };\r\n    }\r\n\r\n    protected _parseLineWordWrap(line: string = \"\", width: number, context: CanvasRenderingContext2D): object[] {\r\n        var lines = [];\r\n        var words = this.wordSplittingFunction ? this.wordSplittingFunction(line) : line.split(\" \");\r\n        var lineWidth = 0;\r\n\r\n        for (var n = 0; n < words.length; n++) {\r\n            var testLine = n > 0 ? line + \" \" + words[n] : words[0];\r\n            var metrics = context.measureText(testLine);\r\n            var testWidth = metrics.width;\r\n            if (testWidth > width && n > 0) {\r\n                lines.push({ text: line, width: lineWidth });\r\n                line = words[n];\r\n                lineWidth = context.measureText(line).width;\r\n            } else {\r\n                lineWidth = testWidth;\r\n                line = testLine;\r\n            }\r\n        }\r\n        lines.push({ text: line, width: lineWidth });\r\n\r\n        return lines;\r\n    }\r\n\r\n    protected _renderLines(context: CanvasRenderingContext2D): void {\r\n        var height = this._currentMeasure.height;\r\n        var rootY = 0;\r\n        switch (this._textVerticalAlignment) {\r\n            case Control.VERTICAL_ALIGNMENT_TOP:\r\n                rootY = this._fontOffset.ascent;\r\n                break;\r\n            case Control.VERTICAL_ALIGNMENT_BOTTOM:\r\n                rootY = height - this._fontOffset.height * (this._lines.length - 1) - this._fontOffset.descent;\r\n                break;\r\n            case Control.VERTICAL_ALIGNMENT_CENTER:\r\n                rootY = this._fontOffset.ascent + (height - this._fontOffset.height * this._lines.length) / 2;\r\n                break;\r\n        }\r\n\r\n        rootY += this._currentMeasure.top;\r\n\r\n        for (let i = 0; i < this._lines.length; i++) {\r\n            const line = this._lines[i];\r\n\r\n            if (i !== 0 && this._lineSpacing.internalValue !== 0) {\r\n                if (this._lineSpacing.isPixel) {\r\n                    rootY += this._lineSpacing.getValue(this._host);\r\n                } else {\r\n                    rootY = rootY + this._lineSpacing.getValue(this._host) * this._height.getValueInPixel(this._host, this._cachedParentMeasure.height);\r\n                }\r\n            }\r\n\r\n            this._drawText(line.text, line.width, rootY, context);\r\n            rootY += this._fontOffset.height;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Given a width constraint applied on the text block, find the expected height\r\n     * @returns expected height\r\n     */\r\n    public computeExpectedHeight(): number {\r\n        if (this.text && this.widthInPixels) {\r\n            const context = document.createElement(\"canvas\").getContext(\"2d\");\r\n            if (context) {\r\n                this._applyStates(context);\r\n                if (!this._fontOffset) {\r\n                    this._fontOffset = Control._GetFontOffset(context.font);\r\n                }\r\n                const lines = this._lines ? this._lines : this._breakLines(this.widthInPixels - this.paddingLeftInPixels - this.paddingRightInPixels, context);\r\n\r\n                let newHeight = this.paddingTopInPixels + this.paddingBottomInPixels + this._fontOffset.height * lines.length;\r\n\r\n                if (lines.length > 0 && this._lineSpacing.internalValue !== 0) {\r\n                    let lineSpacing = 0;\r\n                    if (this._lineSpacing.isPixel) {\r\n                        lineSpacing = this._lineSpacing.getValue(this._host);\r\n                    } else {\r\n                        lineSpacing = this._lineSpacing.getValue(this._host) * this._height.getValueInPixel(this._host, this._cachedParentMeasure.height);\r\n                    }\r\n\r\n                    newHeight += (lines.length - 1) * lineSpacing;\r\n                }\r\n\r\n                return newHeight;\r\n            }\r\n        }\r\n        return 0;\r\n    }\r\n\r\n    dispose(): void {\r\n        super.dispose();\r\n\r\n        this.onTextChangedObservable.clear();\r\n    }\r\n}\r\n_TypeStore.RegisteredTypes[\"BABYLON.GUI.TextBlock\"] = TextBlock;\r\n", "import { Nullable } from \"@babylonjs/core/types\";\r\nimport { Observable } from \"@babylonjs/core/Misc/observable\";\r\nimport { Tools } from \"@babylonjs/core/Misc/tools\";\r\n\r\nimport { Control } from \"./control\";\r\nimport { Measure } from \"../measure\";\r\nimport { _TypeStore } from '@babylonjs/core/Misc/typeStore';\r\n\r\n/**\r\n * Class used to create 2D images\r\n */\r\nexport class Image extends Control {\r\n    private _workingCanvas: Nullable<HTMLCanvasElement> = null;\r\n\r\n    private _domImage: HTMLImageElement;\r\n    private _imageWidth: number;\r\n    private _imageHeight: number;\r\n    private _loaded = false;\r\n    private _stretch = Image.STRETCH_FILL;\r\n    private _source: Nullable<string>;\r\n    private _autoScale = false;\r\n\r\n    private _sourceLeft = 0;\r\n    private _sourceTop = 0;\r\n    private _sourceWidth = 0;\r\n    private _sourceHeight = 0;\r\n    private _svgAttributesComputationCompleted: boolean = false;\r\n    private _isSVG: boolean = false;\r\n\r\n    private _cellWidth: number = 0;\r\n    private _cellHeight: number = 0;\r\n    private _cellId: number = -1;\r\n\r\n    private _populateNinePatchSlicesFromImage = false;\r\n    private _sliceLeft: number;\r\n    private _sliceRight: number;\r\n    private _sliceTop: number;\r\n    private _sliceBottom: number;\r\n\r\n    private _detectPointerOnOpaqueOnly: boolean;\r\n\r\n    private _imageDataCache: {\r\n                data: Uint8ClampedArray | null;\r\n                key: string;\r\n            } = { data: null, key: \"\" };\r\n\r\n    /**\r\n     * Observable notified when the content is loaded\r\n     */\r\n    public onImageLoadedObservable = new Observable<Image>();\r\n\r\n    /**\r\n     * Observable notified when _sourceLeft, _sourceTop, _sourceWidth and _sourceHeight are computed\r\n     */\r\n    public onSVGAttributesComputedObservable = new Observable<Image>();\r\n\r\n    /**\r\n     * Gets a boolean indicating that the content is loaded\r\n     */\r\n    public get isLoaded(): boolean {\r\n        return this._loaded;\r\n    }\r\n\r\n    /**\r\n     * Gets or sets a boolean indicating if nine patch slices (left, top, right, bottom) should be read from image data\r\n     */\r\n    public get populateNinePatchSlicesFromImage(): boolean {\r\n        return this._populateNinePatchSlicesFromImage;\r\n    }\r\n\r\n    public set populateNinePatchSlicesFromImage(value: boolean) {\r\n        if (this._populateNinePatchSlicesFromImage === value) {\r\n            return;\r\n        }\r\n\r\n        this._populateNinePatchSlicesFromImage = value;\r\n\r\n        if (this._populateNinePatchSlicesFromImage && this._loaded) {\r\n            this._extractNinePatchSliceDataFromImage();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Gets or sets a boolean indicating if pointers should only be validated on pixels with alpha > 0.\r\n     * Beware using this as this will comsume more memory as the image has to be stored twice\r\n     */\r\n    public get detectPointerOnOpaqueOnly(): boolean {\r\n        return this._detectPointerOnOpaqueOnly;\r\n    }\r\n\r\n    public set detectPointerOnOpaqueOnly(value: boolean) {\r\n        if (this._detectPointerOnOpaqueOnly === value) {\r\n            return;\r\n        }\r\n\r\n        this._detectPointerOnOpaqueOnly = value;\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the left value for slicing (9-patch)\r\n     */\r\n    public get sliceLeft(): number {\r\n        return this._sliceLeft;\r\n    }\r\n\r\n    public set sliceLeft(value: number) {\r\n        if (this._sliceLeft === value) {\r\n            return;\r\n        }\r\n\r\n        this._sliceLeft = value;\r\n\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the right value for slicing (9-patch)\r\n     */\r\n    public get sliceRight(): number {\r\n        return this._sliceRight;\r\n    }\r\n\r\n    public set sliceRight(value: number) {\r\n        if (this._sliceRight === value) {\r\n            return;\r\n        }\r\n\r\n        this._sliceRight = value;\r\n\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the top value for slicing (9-patch)\r\n     */\r\n    public get sliceTop(): number {\r\n        return this._sliceTop;\r\n    }\r\n\r\n    public set sliceTop(value: number) {\r\n        if (this._sliceTop === value) {\r\n            return;\r\n        }\r\n\r\n        this._sliceTop = value;\r\n\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the bottom value for slicing (9-patch)\r\n     */\r\n    public get sliceBottom(): number {\r\n        return this._sliceBottom;\r\n    }\r\n\r\n    public set sliceBottom(value: number) {\r\n        if (this._sliceBottom === value) {\r\n            return;\r\n        }\r\n\r\n        this._sliceBottom = value;\r\n\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the left coordinate in the source image\r\n     */\r\n    public get sourceLeft(): number {\r\n        return this._sourceLeft;\r\n    }\r\n\r\n    public set sourceLeft(value: number) {\r\n        if (this._sourceLeft === value) {\r\n            return;\r\n        }\r\n\r\n        this._sourceLeft = value;\r\n\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the top coordinate in the source image\r\n     */\r\n    public get sourceTop(): number {\r\n        return this._sourceTop;\r\n    }\r\n\r\n    public set sourceTop(value: number) {\r\n        if (this._sourceTop === value) {\r\n            return;\r\n        }\r\n\r\n        this._sourceTop = value;\r\n\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the width to capture in the source image\r\n     */\r\n    public get sourceWidth(): number {\r\n        return this._sourceWidth;\r\n    }\r\n\r\n    public set sourceWidth(value: number) {\r\n        if (this._sourceWidth === value) {\r\n            return;\r\n        }\r\n\r\n        this._sourceWidth = value;\r\n\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the height to capture in the source image\r\n     */\r\n    public get sourceHeight(): number {\r\n        return this._sourceHeight;\r\n    }\r\n\r\n    public set sourceHeight(value: number) {\r\n        if (this._sourceHeight === value) {\r\n            return;\r\n        }\r\n\r\n        this._sourceHeight = value;\r\n\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Indicates if the format of the image is SVG */\r\n    public get isSVG(): boolean {\r\n        return this._isSVG;\r\n    }\r\n\r\n    /** Gets the status of the SVG attributes computation (sourceLeft, sourceTop, sourceWidth, sourceHeight) */\r\n    public get svgAttributesComputationCompleted(): boolean {\r\n        return this._svgAttributesComputationCompleted;\r\n    }\r\n\r\n    /**\r\n     * Gets or sets a boolean indicating if the image can force its container to adapt its size\r\n     * @see https://doc.babylonjs.com/how_to/gui#image\r\n     */\r\n    public get autoScale(): boolean {\r\n        return this._autoScale;\r\n    }\r\n\r\n    public set autoScale(value: boolean) {\r\n        if (this._autoScale === value) {\r\n            return;\r\n        }\r\n\r\n        this._autoScale = value;\r\n\r\n        if (value && this._loaded) {\r\n            this.synchronizeSizeWithContent();\r\n        }\r\n    }\r\n\r\n    /** Gets or sets the streching mode used by the image */\r\n    public get stretch(): number {\r\n        return this._stretch;\r\n    }\r\n\r\n    public set stretch(value: number) {\r\n        if (this._stretch === value) {\r\n            return;\r\n        }\r\n\r\n        this._stretch = value;\r\n\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** @hidden */\r\n    public _rotate90(n: number, preserveProperties: boolean = false): Image {\r\n        let canvas = document.createElement('canvas');\r\n\r\n        const context = canvas.getContext('2d')!;\r\n        const width = this._domImage.width;\r\n        const height = this._domImage.height;\r\n\r\n        canvas.width = height;\r\n        canvas.height = width;\r\n\r\n        context.translate(canvas.width / 2, canvas.height / 2);\r\n        context.rotate(n * Math.PI / 2);\r\n\r\n        context.drawImage(this._domImage, 0, 0, width, height, -width / 2, -height / 2, width, height);\r\n\r\n        const dataUrl: string = canvas.toDataURL(\"image/jpg\");\r\n        const rotatedImage = new Image(this.name + \"rotated\", dataUrl);\r\n\r\n        if (preserveProperties) {\r\n            rotatedImage._stretch = this._stretch;\r\n            rotatedImage._autoScale = this._autoScale;\r\n            rotatedImage._cellId = this._cellId;\r\n            rotatedImage._cellWidth = n % 1 ? this._cellHeight : this._cellWidth;\r\n            rotatedImage._cellHeight = n % 1 ? this._cellWidth : this._cellHeight;\r\n        }\r\n\r\n        this._handleRotationForSVGImage(this, rotatedImage, n);\r\n\r\n        this._imageDataCache.data = null;\r\n\r\n        return rotatedImage;\r\n    }\r\n\r\n    private _handleRotationForSVGImage(srcImage: Image, dstImage: Image, n: number): void {\r\n        if (!srcImage._isSVG) {\r\n            return;\r\n        }\r\n\r\n        if (srcImage._svgAttributesComputationCompleted) {\r\n            this._rotate90SourceProperties(srcImage, dstImage, n);\r\n            this._markAsDirty();\r\n        } else {\r\n            srcImage.onSVGAttributesComputedObservable.addOnce(() => {\r\n                this._rotate90SourceProperties(srcImage, dstImage, n);\r\n                this._markAsDirty();\r\n            });\r\n        }\r\n    }\r\n\r\n    private _rotate90SourceProperties(srcImage: Image, dstImage: Image, n: number): void {\r\n        let srcLeft = srcImage.sourceLeft,\r\n            srcTop = srcImage.sourceTop,\r\n            srcWidth = srcImage.domImage.width,\r\n            srcHeight = srcImage.domImage.height;\r\n\r\n        let dstLeft = srcLeft,\r\n            dstTop = srcTop,\r\n            dstWidth = srcImage.sourceWidth,\r\n            dstHeight = srcImage.sourceHeight;\r\n\r\n        if (n != 0) {\r\n            let mult = n < 0 ? -1 : 1;\r\n            n = n % 4;\r\n            for (let i = 0; i < Math.abs(n); ++i) {\r\n                dstLeft = -(srcTop - srcHeight / 2) * mult + srcHeight / 2;\r\n                dstTop = (srcLeft - srcWidth / 2) * mult + srcWidth / 2;\r\n                [dstWidth, dstHeight] = [dstHeight, dstWidth];\r\n                if (n < 0) {\r\n                    dstTop -= dstHeight;\r\n                } else {\r\n                    dstLeft -= dstWidth;\r\n                }\r\n                srcLeft = dstLeft;\r\n                srcTop = dstTop;\r\n                [srcWidth, srcHeight] = [srcHeight, srcWidth];\r\n            }\r\n        }\r\n\r\n        dstImage.sourceLeft = dstLeft;\r\n        dstImage.sourceTop = dstTop;\r\n        dstImage.sourceWidth = dstWidth;\r\n        dstImage.sourceHeight = dstHeight;\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the internal DOM image used to render the control\r\n     */\r\n    public set domImage(value: HTMLImageElement) {\r\n        this._domImage = value;\r\n        this._loaded = false;\r\n        this._imageDataCache.data = null;\r\n\r\n        if (this._domImage.width) {\r\n            this._onImageLoaded();\r\n        } else {\r\n            this._domImage.onload = () => {\r\n                this._onImageLoaded();\r\n            };\r\n        }\r\n    }\r\n\r\n    public get domImage(): HTMLImageElement {\r\n        return this._domImage;\r\n    }\r\n\r\n    private _onImageLoaded(): void {\r\n        this._imageDataCache.data = null;\r\n        this._imageWidth = this._domImage.width;\r\n        this._imageHeight = this._domImage.height;\r\n        this._loaded = true;\r\n\r\n        if (this._populateNinePatchSlicesFromImage) {\r\n            this._extractNinePatchSliceDataFromImage();\r\n        }\r\n\r\n        if (this._autoScale) {\r\n            this.synchronizeSizeWithContent();\r\n        }\r\n\r\n        this.onImageLoadedObservable.notifyObservers(this);\r\n\r\n        this._markAsDirty();\r\n    }\r\n\r\n    private _extractNinePatchSliceDataFromImage() {\r\n        if (!this._workingCanvas) {\r\n            this._workingCanvas = document.createElement('canvas');\r\n        }\r\n        const canvas = this._workingCanvas;\r\n        const context = canvas.getContext('2d')!;\r\n        const width = this._domImage.width;\r\n        const height = this._domImage.height;\r\n\r\n        canvas.width = width;\r\n        canvas.height = height;\r\n\r\n        context.drawImage(this._domImage, 0, 0, width, height);\r\n        const imageData = context.getImageData(0, 0, width, height);\r\n\r\n        // Left and right\r\n        this._sliceLeft = -1;\r\n        this._sliceRight = -1;\r\n        for (var x = 0; x < width; x++) {\r\n            const alpha = imageData.data[x * 4 + 3];\r\n\r\n            if (alpha > 127 && this._sliceLeft === -1) {\r\n                this._sliceLeft = x;\r\n                continue;\r\n            }\r\n\r\n            if (alpha < 127 && this._sliceLeft > -1) {\r\n                this._sliceRight = x;\r\n                break;\r\n            }\r\n        }\r\n\r\n        // top and bottom\r\n        this._sliceTop = -1;\r\n        this._sliceBottom = -1;\r\n        for (var y = 0; y < height; y++) {\r\n            const alpha = imageData.data[y * width * 4 + 3];\r\n\r\n            if (alpha > 127 && this._sliceTop === -1) {\r\n                this._sliceTop = y;\r\n                continue;\r\n            }\r\n\r\n            if (alpha < 127 && this._sliceTop > -1) {\r\n                this._sliceBottom = y;\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Gets or sets image source url\r\n     */\r\n    public set source(value: Nullable<string>) {\r\n        if (this._source === value) {\r\n            return;\r\n        }\r\n\r\n        this._loaded = false;\r\n        this._source = value;\r\n        this._imageDataCache.data = null;\r\n\r\n        if (value) {\r\n            value = this._svgCheck(value);\r\n        }\r\n\r\n        this._domImage = document.createElement(\"img\");\r\n\r\n        this._domImage.onload = () => {\r\n            this._onImageLoaded();\r\n        };\r\n        if (value) {\r\n            Tools.SetCorsBehavior(value, this._domImage);\r\n            this._domImage.src = value;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Checks for svg document with icon id present\r\n     */\r\n    private _svgCheck(value: string): string {\r\n        if (window.SVGSVGElement && (value.search(/.svg#/gi) !== -1) && (value.indexOf(\"#\") === value.lastIndexOf(\"#\"))) {\r\n            this._isSVG = true;\r\n            var svgsrc = value.split('#')[0];\r\n            var elemid = value.split('#')[1];\r\n            // check if object alr exist in document\r\n            var svgExist = <HTMLObjectElement> document.body.querySelector('object[data=\"' + svgsrc + '\"]');\r\n            if (svgExist) {\r\n                var svgDoc = svgExist.contentDocument;\r\n                // get viewbox width and height, get svg document width and height in px\r\n                if (svgDoc && svgDoc.documentElement) {\r\n                    var vb = svgDoc.documentElement.getAttribute(\"viewBox\");\r\n                    var docwidth = Number(svgDoc.documentElement.getAttribute(\"width\"));\r\n                    var docheight = Number(svgDoc.documentElement.getAttribute(\"height\"));\r\n                    var elem = <SVGGraphicsElement> <unknown> svgDoc.getElementById(elemid);\r\n                    if (elem && vb && docwidth && docheight) {\r\n                        this._getSVGAttribs(svgExist, elemid);\r\n                        return value;\r\n                    }\r\n                }\r\n\r\n                // wait for object to load\r\n                svgExist.addEventListener(\"load\", () => {\r\n                    this._getSVGAttribs(svgExist, elemid);\r\n                });\r\n            } else {\r\n                // create document object\r\n                var svgImage = document.createElement(\"object\");\r\n                svgImage.data = svgsrc;\r\n                svgImage.type = \"image/svg+xml\";\r\n                svgImage.width = \"0%\";\r\n                svgImage.height = \"0%\";\r\n                document.body.appendChild(svgImage);\r\n                // when the object has loaded, get the element attribs\r\n                svgImage.onload = () => {\r\n                    var svgobj = <HTMLObjectElement> document.body.querySelector('object[data=\"' + svgsrc + '\"]');\r\n                    if (svgobj) {\r\n                        this._getSVGAttribs(svgobj, elemid);\r\n                    }\r\n                };\r\n            }\r\n            return svgsrc;\r\n        } else {\r\n            return value;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Sets sourceLeft, sourceTop, sourceWidth, sourceHeight automatically\r\n\t * given external svg file and icon id\r\n     */\r\n    private _getSVGAttribs(svgsrc: HTMLObjectElement, elemid: string) {\r\n        var svgDoc = svgsrc.contentDocument;\r\n        // get viewbox width and height, get svg document width and height in px\r\n        if (svgDoc && svgDoc.documentElement) {\r\n            var vb = svgDoc.documentElement.getAttribute(\"viewBox\");\r\n            var docwidth = Number(svgDoc.documentElement.getAttribute(\"width\"));\r\n            var docheight = Number(svgDoc.documentElement.getAttribute(\"height\"));\r\n            // get element bbox and matrix transform\r\n            var elem = svgDoc.getElementById(elemid) as Nullable<SVGGraphicsElement>;\r\n            if (vb && docwidth && docheight && elem) {\r\n                var vb_width = Number(vb.split(\" \")[2]);\r\n                var vb_height = Number(vb.split(\" \")[3]);\r\n                var elem_bbox = elem.getBBox();\r\n                var elem_matrix_a = 1;\r\n                var elem_matrix_d = 1;\r\n                var elem_matrix_e = 0;\r\n                var elem_matrix_f = 0;\r\n                if (elem.transform && elem.transform.baseVal.consolidate()) {\r\n                    elem_matrix_a = elem.transform.baseVal.consolidate().matrix.a;\r\n                    elem_matrix_d = elem.transform.baseVal.consolidate().matrix.d;\r\n                    elem_matrix_e = elem.transform.baseVal.consolidate().matrix.e;\r\n                    elem_matrix_f = elem.transform.baseVal.consolidate().matrix.f;\r\n                }\r\n\r\n                // compute source coordinates and dimensions\r\n                this.sourceLeft = ((elem_matrix_a * elem_bbox.x + elem_matrix_e) * docwidth) / vb_width;\r\n                this.sourceTop = ((elem_matrix_d * elem_bbox.y + elem_matrix_f) * docheight) / vb_height;\r\n                this.sourceWidth = (elem_bbox.width * elem_matrix_a) * (docwidth / vb_width);\r\n                this.sourceHeight = (elem_bbox.height * elem_matrix_d) * (docheight / vb_height);\r\n                this._svgAttributesComputationCompleted = true;\r\n                this.onSVGAttributesComputedObservable.notifyObservers(this);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the cell width to use when animation sheet is enabled\r\n     * @see https://doc.babylonjs.com/how_to/gui#image\r\n     */\r\n    get cellWidth(): number {\r\n        return this._cellWidth;\r\n    }\r\n    set cellWidth(value: number) {\r\n        if (this._cellWidth === value) {\r\n            return;\r\n        }\r\n\r\n        this._cellWidth = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the cell height to use when animation sheet is enabled\r\n     * @see https://doc.babylonjs.com/how_to/gui#image\r\n     */\r\n    get cellHeight(): number {\r\n        return this._cellHeight;\r\n    }\r\n    set cellHeight(value: number) {\r\n        if (this._cellHeight === value) {\r\n            return;\r\n        }\r\n\r\n        this._cellHeight = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the cell id to use (this will turn on the animation sheet mode)\r\n     * @see https://doc.babylonjs.com/how_to/gui#image\r\n     */\r\n    get cellId(): number {\r\n        return this._cellId;\r\n    }\r\n    set cellId(value: number) {\r\n        if (this._cellId === value) {\r\n            return;\r\n        }\r\n\r\n        this._cellId = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Creates a new Image\r\n     * @param name defines the control name\r\n     * @param url defines the image url\r\n     */\r\n    constructor(public name?: string, url: Nullable<string> = null) {\r\n        super(name);\r\n\r\n        this.source = url;\r\n    }\r\n\r\n    /**\r\n     * Tests if a given coordinates belong to the current control\r\n     * @param x defines x coordinate to test\r\n     * @param y defines y coordinate to test\r\n     * @returns true if the coordinates are inside the control\r\n     */\r\n    public contains(x: number, y: number): boolean {\r\n        if (!super.contains(x, y)) {\r\n            return false;\r\n        }\r\n\r\n        if (!this._detectPointerOnOpaqueOnly || !this._workingCanvas) {\r\n            return true;\r\n        }\r\n\r\n        const width = this._currentMeasure.width | 0;\r\n        const height = this._currentMeasure.height | 0;\r\n        const key = width + \"_\" + height;\r\n\r\n        let imageData = this._imageDataCache.data;\r\n\r\n        if (!imageData || this._imageDataCache.key !== key) {\r\n            const canvas = this._workingCanvas;\r\n            const context = canvas.getContext(\"2d\")!;\r\n\r\n            this._imageDataCache.data = imageData = context.getImageData(0, 0, width, height).data;\r\n            this._imageDataCache.key = key;\r\n        }\r\n\r\n        x = (x - this._currentMeasure.left) | 0;\r\n        y = (y - this._currentMeasure.top) | 0;\r\n\r\n        const pickedPixel = imageData[(x + y * width) * 4 + 3];\r\n\r\n        return pickedPixel > 0;\r\n    }\r\n\r\n    protected _getTypeName(): string {\r\n        return \"Image\";\r\n    }\r\n\r\n    /** Force the control to synchronize with its content */\r\n    public synchronizeSizeWithContent() {\r\n        if (!this._loaded) {\r\n            return;\r\n        }\r\n\r\n        this.width = this._domImage.width + \"px\";\r\n        this.height = this._domImage.height + \"px\";\r\n    }\r\n\r\n    protected _processMeasures(parentMeasure: Measure, context: CanvasRenderingContext2D): void {\r\n        if (this._loaded) {\r\n            switch (this._stretch) {\r\n                case Image.STRETCH_NONE:\r\n                    break;\r\n                case Image.STRETCH_FILL:\r\n                    break;\r\n                case Image.STRETCH_UNIFORM:\r\n                    break;\r\n                case Image.STRETCH_NINE_PATCH:\r\n                    break;\r\n                case Image.STRETCH_EXTEND:\r\n                    if (this._autoScale) {\r\n                        this.synchronizeSizeWithContent();\r\n                    }\r\n                    if (this.parent && this.parent.parent) { // Will update root size if root is not the top root\r\n                        this.parent.adaptWidthToChildren = true;\r\n                        this.parent.adaptHeightToChildren = true;\r\n                    }\r\n                    break;\r\n            }\r\n        }\r\n\r\n        super._processMeasures(parentMeasure, context);\r\n    }\r\n\r\n    private _prepareWorkingCanvasForOpaqueDetection() {\r\n        if (!this._detectPointerOnOpaqueOnly) {\r\n            return;\r\n        }\r\n\r\n        if (!this._workingCanvas) {\r\n            this._workingCanvas = document.createElement('canvas');\r\n        }\r\n        const canvas = this._workingCanvas;\r\n        const width = this._currentMeasure.width;\r\n        const height = this._currentMeasure.height;\r\n        const context = canvas.getContext(\"2d\")!;\r\n\r\n        canvas.width = width;\r\n        canvas.height = height;\r\n\r\n        context.clearRect(0, 0, width, height);\r\n    }\r\n\r\n    private _drawImage(context: CanvasRenderingContext2D, sx: number, sy: number, sw: number, sh: number, tx: number, ty: number, tw: number, th: number) {\r\n        context.drawImage(this._domImage,\r\n            sx, sy, sw, sh,\r\n            tx, ty, tw, th);\r\n\r\n        if (!this._detectPointerOnOpaqueOnly) {\r\n            return;\r\n        }\r\n\r\n        const canvas = this._workingCanvas!;\r\n        context = canvas.getContext(\"2d\")!;\r\n\r\n        context.drawImage(this._domImage,\r\n            sx, sy, sw, sh,\r\n            tx - this._currentMeasure.left, ty - this._currentMeasure.top, tw, th);\r\n    }\r\n\r\n    public _draw(context: CanvasRenderingContext2D): void {\r\n        context.save();\r\n\r\n        if (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) {\r\n            context.shadowColor = this.shadowColor;\r\n            context.shadowBlur = this.shadowBlur;\r\n            context.shadowOffsetX = this.shadowOffsetX;\r\n            context.shadowOffsetY = this.shadowOffsetY;\r\n        }\r\n\r\n        let x, y, width, height;\r\n        if (this.cellId == -1) {\r\n            x = this._sourceLeft;\r\n            y = this._sourceTop;\r\n\r\n            width = this._sourceWidth ? this._sourceWidth : this._imageWidth;\r\n            height = this._sourceHeight ? this._sourceHeight : this._imageHeight;\r\n        }\r\n        else {\r\n            let rowCount = this._domImage.naturalWidth / this.cellWidth;\r\n            let column = (this.cellId / rowCount) >> 0;\r\n            let row = this.cellId % rowCount;\r\n\r\n            x = this.cellWidth * row;\r\n            y = this.cellHeight * column;\r\n            width = this.cellWidth;\r\n            height = this.cellHeight;\r\n        }\r\n\r\n        this._prepareWorkingCanvasForOpaqueDetection();\r\n\r\n        this._applyStates(context);\r\n        if (this._loaded) {\r\n            switch (this._stretch) {\r\n                case Image.STRETCH_NONE:\r\n                    this._drawImage(context, x, y, width, height,\r\n                        this._currentMeasure.left, this._currentMeasure.top, this._currentMeasure.width, this._currentMeasure.height);\r\n                    break;\r\n                case Image.STRETCH_FILL:\r\n                    this._drawImage(context, x, y, width, height,\r\n                        this._currentMeasure.left, this._currentMeasure.top, this._currentMeasure.width, this._currentMeasure.height);\r\n                    break;\r\n                case Image.STRETCH_UNIFORM:\r\n                    var hRatio = this._currentMeasure.width / width;\r\n                    var vRatio = this._currentMeasure.height / height;\r\n                    var ratio = Math.min(hRatio, vRatio);\r\n                    var centerX = (this._currentMeasure.width - width * ratio) / 2;\r\n                    var centerY = (this._currentMeasure.height - height * ratio) / 2;\r\n\r\n                    this._drawImage(context, x, y, width, height,\r\n                        this._currentMeasure.left + centerX, this._currentMeasure.top + centerY, width * ratio, height * ratio);\r\n                    break;\r\n                case Image.STRETCH_EXTEND:\r\n                    this._drawImage(context, x, y, width, height,\r\n                        this._currentMeasure.left, this._currentMeasure.top, this._currentMeasure.width, this._currentMeasure.height);\r\n                    break;\r\n                case Image.STRETCH_NINE_PATCH:\r\n                    this._renderNinePatch(context);\r\n                    break;\r\n            }\r\n        }\r\n\r\n        context.restore();\r\n    }\r\n\r\n    private _renderCornerPatch(context: CanvasRenderingContext2D, x: number, y: number, width: number, height: number, targetX: number, targetY: number): void {\r\n        this._drawImage(context, x, y, width, height, this._currentMeasure.left + targetX, this._currentMeasure.top + targetY, width, height);\r\n    }\r\n\r\n    private _renderNinePatch(context: CanvasRenderingContext2D): void {\r\n        let height = this._imageHeight;\r\n        let leftWidth = this._sliceLeft;\r\n        let topHeight = this._sliceTop;\r\n        let bottomHeight = this._imageHeight - this._sliceBottom;\r\n        let rightWidth = this._imageWidth - this._sliceRight;\r\n        let left = 0;\r\n        let top = 0;\r\n\r\n        if (this._populateNinePatchSlicesFromImage) {\r\n            left = 1;\r\n            top = 1;\r\n            height -= 2;\r\n            leftWidth -= 1;\r\n            topHeight -= 1;\r\n            bottomHeight -= 1;\r\n            rightWidth -= 1;\r\n        }\r\n\r\n        const centerWidth = this._sliceRight - this._sliceLeft;\r\n        const targetCenterWidth = this._currentMeasure.width - rightWidth - this.sliceLeft;\r\n        const targetTopHeight = this._currentMeasure.height - height + this._sliceBottom;\r\n\r\n        // Corners\r\n        this._renderCornerPatch(context, left, top, leftWidth, topHeight, 0, 0);\r\n        this._renderCornerPatch(context, left, this._sliceBottom, leftWidth, height - this._sliceBottom, 0, targetTopHeight);\r\n\r\n        this._renderCornerPatch(context, this._sliceRight, top, rightWidth, topHeight, this._currentMeasure.width - rightWidth, 0);\r\n        this._renderCornerPatch(context, this._sliceRight, this._sliceBottom, rightWidth, height - this._sliceBottom, this._currentMeasure.width - rightWidth, targetTopHeight);\r\n\r\n        // Center\r\n        this._drawImage(context, this._sliceLeft, this._sliceTop, centerWidth, this._sliceBottom - this._sliceTop,\r\n            this._currentMeasure.left + leftWidth, this._currentMeasure.top + topHeight, targetCenterWidth, targetTopHeight - topHeight);\r\n\r\n        // Borders\r\n        this._drawImage(context, left, this._sliceTop, leftWidth, this._sliceBottom - this._sliceTop,\r\n            this._currentMeasure.left, this._currentMeasure.top + topHeight, leftWidth, targetTopHeight - topHeight);\r\n\r\n        this._drawImage(context, this._sliceRight, this._sliceTop, leftWidth, this._sliceBottom - this._sliceTop,\r\n            this._currentMeasure.left + this._currentMeasure.width - rightWidth, this._currentMeasure.top + topHeight, leftWidth, targetTopHeight - topHeight);\r\n\r\n        this._drawImage(context, this._sliceLeft, top, centerWidth, topHeight,\r\n            this._currentMeasure.left + leftWidth, this._currentMeasure.top, targetCenterWidth, topHeight);\r\n\r\n        this._drawImage(context, this._sliceLeft, this._sliceBottom, centerWidth, bottomHeight,\r\n            this._currentMeasure.left + leftWidth, this._currentMeasure.top + targetTopHeight, targetCenterWidth, bottomHeight);\r\n    }\r\n\r\n    public dispose() {\r\n        super.dispose();\r\n        this.onImageLoadedObservable.clear();\r\n        this.onSVGAttributesComputedObservable.clear();\r\n    }\r\n\r\n    // Static\r\n    /** STRETCH_NONE */\r\n    public static readonly STRETCH_NONE = 0;\r\n    /** STRETCH_FILL */\r\n    public static readonly STRETCH_FILL = 1;\r\n    /** STRETCH_UNIFORM */\r\n    public static readonly STRETCH_UNIFORM = 2;\r\n    /** STRETCH_EXTEND */\r\n    public static readonly STRETCH_EXTEND = 3;\r\n    /** NINE_PATCH */\r\n    public static readonly STRETCH_NINE_PATCH = 4;\r\n}\r\n_TypeStore.RegisteredTypes[\"BABYLON.GUI.Image\"] = Image;\r\n", "import { Nullable } from \"@babylonjs/core/types\";\r\nimport { Vector2 } from \"@babylonjs/core/Maths/math.vector\";\r\n\r\nimport { Rectangle } from \"./rectangle\";\r\nimport { Control } from \"./control\";\r\nimport { TextBlock } from \"./textBlock\";\r\nimport { Image } from \"./image\";\r\nimport { _TypeStore } from '@babylonjs/core/Misc/typeStore';\r\nimport { PointerInfoBase } from '@babylonjs/core/Events/pointerEvents';\r\n\r\n/**\r\n * Class used to create 2D buttons\r\n */\r\nexport class Button extends Rectangle {\r\n    /**\r\n     * Function called to generate a pointer enter animation\r\n     */\r\n    public pointerEnterAnimation: () => void;\r\n    /**\r\n     * Function called to generate a pointer out animation\r\n     */\r\n    public pointerOutAnimation: () => void;\r\n    /**\r\n     * Function called to generate a pointer down animation\r\n     */\r\n    public pointerDownAnimation: () => void;\r\n    /**\r\n     * Function called to generate a pointer up animation\r\n     */\r\n    public pointerUpAnimation: () => void;\r\n\r\n    /**\r\n     * Gets or sets a boolean indicating that the button will let internal controls handle picking instead of doing it directly using its bounding info\r\n     */\r\n    public delegatePickingToChildren = false;\r\n\r\n    private _image: Nullable<Image>;\r\n    /**\r\n     * Returns the image part of the button (if any)\r\n     */\r\n    public get image(): Nullable<Image> {\r\n        return this._image;\r\n    }\r\n\r\n    private _textBlock: Nullable<TextBlock>;\r\n    /**\r\n     * Returns the image part of the button (if any)\r\n     */\r\n    public get textBlock(): Nullable<TextBlock> {\r\n        return this._textBlock;\r\n    }\r\n\r\n    /**\r\n     * Creates a new Button\r\n     * @param name defines the name of the button\r\n     */\r\n    constructor(public name?: string) {\r\n        super(name);\r\n\r\n        this.thickness = 1;\r\n        this.isPointerBlocker = true;\r\n\r\n        let alphaStore: Nullable<number> = null;\r\n\r\n        this.pointerEnterAnimation = () => {\r\n            alphaStore = this.alpha;\r\n            this.alpha -= 0.1;\r\n        };\r\n\r\n        this.pointerOutAnimation = () => {\r\n            if (alphaStore !== null) {\r\n                this.alpha = alphaStore;\r\n            }\r\n        };\r\n\r\n        this.pointerDownAnimation = () => {\r\n            this.scaleX -= 0.05;\r\n            this.scaleY -= 0.05;\r\n        };\r\n\r\n        this.pointerUpAnimation = () => {\r\n            this.scaleX += 0.05;\r\n            this.scaleY += 0.05;\r\n        };\r\n    }\r\n\r\n    protected _getTypeName(): string {\r\n        return \"Button\";\r\n    }\r\n\r\n    // While being a container, the button behaves like a control.\r\n    /** @hidden */\r\n    public _processPicking(x: number, y: number, pi: PointerInfoBase, type: number, pointerId: number, buttonIndex: number, deltaX?: number, deltaY?: number): boolean {\r\n        if (!this._isEnabled || !this.isHitTestVisible || !this.isVisible || this.notRenderable) {\r\n            return false;\r\n        }\r\n\r\n        if (!super.contains(x, y)) {\r\n            return false;\r\n        }\r\n\r\n        if (this.delegatePickingToChildren) {\r\n            let contains = false;\r\n            for (var index = this._children.length - 1; index >= 0; index--) {\r\n                var child = this._children[index];\r\n                if (child.isEnabled && child.isHitTestVisible && child.isVisible && !child.notRenderable && child.contains(x, y)) {\r\n                    contains = true;\r\n                    break;\r\n                }\r\n            }\r\n\r\n            if (!contains) {\r\n                return false;\r\n            }\r\n        }\r\n\r\n        this._processObservables(type, x, y, pi, pointerId, buttonIndex, deltaX, deltaY);\r\n\r\n        return true;\r\n    }\r\n\r\n    /** @hidden */\r\n    public _onPointerEnter(target: Control, pi: PointerInfoBase): boolean {\r\n        if (!super._onPointerEnter(target, pi)) {\r\n            return false;\r\n        }\r\n\r\n        if (this.pointerEnterAnimation) {\r\n            this.pointerEnterAnimation();\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    /** @hidden */\r\n    public _onPointerOut(target: Control, pi: PointerInfoBase, force = false): void {\r\n        if (this.pointerOutAnimation) {\r\n            this.pointerOutAnimation();\r\n        }\r\n\r\n        super._onPointerOut(target, pi, force);\r\n    }\r\n\r\n    /** @hidden */\r\n    public _onPointerDown(target: Control, coordinates: Vector2, pointerId: number, buttonIndex: number, pi: PointerInfoBase): boolean {\r\n        if (!super._onPointerDown(target, coordinates, pointerId, buttonIndex, pi)) {\r\n            return false;\r\n        }\r\n\r\n        if (this.pointerDownAnimation) {\r\n            this.pointerDownAnimation();\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    /** @hidden */\r\n    public _onPointerUp(target: Control, coordinates: Vector2, pointerId: number, buttonIndex: number, notifyClick: boolean, pi: PointerInfoBase): void {\r\n        if (this.pointerUpAnimation) {\r\n            this.pointerUpAnimation();\r\n        }\r\n\r\n        super._onPointerUp(target, coordinates, pointerId, buttonIndex, notifyClick, pi);\r\n    }\r\n\r\n    // Statics\r\n    /**\r\n     * Creates a new button made with an image and a text\r\n     * @param name defines the name of the button\r\n     * @param text defines the text of the button\r\n     * @param imageUrl defines the url of the image\r\n     * @returns a new Button\r\n     */\r\n    public static CreateImageButton(name: string, text: string, imageUrl: string): Button {\r\n        var result = new Button(name);\r\n\r\n        // Adding text\r\n        var textBlock = new TextBlock(name + \"_button\", text);\r\n        textBlock.textWrapping = true;\r\n        textBlock.textHorizontalAlignment = Control.HORIZONTAL_ALIGNMENT_CENTER;\r\n        textBlock.paddingLeft = \"20%\";\r\n        result.addControl(textBlock);\r\n\r\n        // Adding image\r\n        var iconImage = new Image(name + \"_icon\", imageUrl);\r\n        iconImage.width = \"20%\";\r\n        iconImage.stretch = Image.STRETCH_UNIFORM;\r\n        iconImage.horizontalAlignment = Control.HORIZONTAL_ALIGNMENT_LEFT;\r\n        result.addControl(iconImage);\r\n\r\n        // Store\r\n        result._image = iconImage;\r\n        result._textBlock = textBlock;\r\n\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * Creates a new button made with an image\r\n     * @param name defines the name of the button\r\n     * @param imageUrl defines the url of the image\r\n     * @returns a new Button\r\n     */\r\n    public static CreateImageOnlyButton(name: string, imageUrl: string): Button {\r\n        var result = new Button(name);\r\n\r\n        // Adding image\r\n        var iconImage = new Image(name + \"_icon\", imageUrl);\r\n        iconImage.stretch = Image.STRETCH_FILL;\r\n        iconImage.horizontalAlignment = Control.HORIZONTAL_ALIGNMENT_LEFT;\r\n        result.addControl(iconImage);\r\n\r\n        // Store\r\n        result._image = iconImage;\r\n\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * Creates a new button made with a text\r\n     * @param name defines the name of the button\r\n     * @param text defines the text of the button\r\n     * @returns a new Button\r\n     */\r\n    public static CreateSimpleButton(name: string, text: string): Button {\r\n        var result = new Button(name);\r\n\r\n        // Adding text\r\n        var textBlock = new TextBlock(name + \"_button\", text);\r\n        textBlock.textWrapping = true;\r\n        textBlock.textHorizontalAlignment = Control.HORIZONTAL_ALIGNMENT_CENTER;\r\n        result.addControl(textBlock);\r\n\r\n        // Store\r\n        result._textBlock = textBlock;\r\n\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * Creates a new button made with an image and a centered text\r\n     * @param name defines the name of the button\r\n     * @param text defines the text of the button\r\n     * @param imageUrl defines the url of the image\r\n     * @returns a new Button\r\n     */\r\n    public static CreateImageWithCenterTextButton(name: string, text: string, imageUrl: string): Button {\r\n        var result = new Button(name);\r\n\r\n        // Adding image\r\n        var iconImage = new Image(name + \"_icon\", imageUrl);\r\n        iconImage.stretch = Image.STRETCH_FILL;\r\n        result.addControl(iconImage);\r\n\r\n        // Adding text\r\n        var textBlock = new TextBlock(name + \"_button\", text);\r\n        textBlock.textWrapping = true;\r\n        textBlock.textHorizontalAlignment = Control.HORIZONTAL_ALIGNMENT_CENTER;\r\n        result.addControl(textBlock);\r\n\r\n        // Store\r\n        result._image = iconImage;\r\n        result._textBlock = textBlock;\r\n\r\n        return result;\r\n    }\r\n}\r\n_TypeStore.RegisteredTypes[\"BABYLON.GUI.Button\"] = Button;", "import { Tools } from \"@babylonjs/core/Misc/tools\";\r\n\r\nimport { Container } from \"./container\";\r\nimport { Measure } from \"../measure\";\r\nimport { Control } from \"./control\";\r\nimport { _TypeStore } from '@babylonjs/core/Misc/typeStore';\r\n\r\n/**\r\n * Class used to create a 2D stack panel container\r\n */\r\nexport class StackPanel extends Container {\r\n    private _isVertical = true;\r\n    private _manualWidth = false;\r\n    private _manualHeight = false;\r\n    private _doNotTrackManualChanges = false;\r\n\r\n    /**\r\n     * Gets or sets a boolean indicating that layou warnings should be ignored\r\n     */\r\n    public ignoreLayoutWarnings = false;\r\n\r\n    /** Gets or sets a boolean indicating if the stack panel is vertical or horizontal*/\r\n    public get isVertical(): boolean {\r\n        return this._isVertical;\r\n    }\r\n\r\n    public set isVertical(value: boolean) {\r\n        if (this._isVertical === value) {\r\n            return;\r\n        }\r\n\r\n        this._isVertical = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Gets or sets panel width.\r\n     * This value should not be set when in horizontal mode as it will be computed automatically\r\n     */\r\n    public set width(value: string | number) {\r\n        if (!this._doNotTrackManualChanges) {\r\n            this._manualWidth = true;\r\n        }\r\n\r\n        if (this._width.toString(this._host) === value) {\r\n            return;\r\n        }\r\n\r\n        if (this._width.fromString(value)) {\r\n            this._markAsDirty();\r\n        }\r\n    }\r\n\r\n    public get width(): string | number {\r\n        return this._width.toString(this._host);\r\n    }\r\n\r\n    /**\r\n     * Gets or sets panel height.\r\n     * This value should not be set when in vertical mode as it will be computed automatically\r\n     */\r\n    public set height(value: string | number) {\r\n        if (!this._doNotTrackManualChanges) {\r\n            this._manualHeight = true;\r\n        }\r\n\r\n        if (this._height.toString(this._host) === value) {\r\n            return;\r\n        }\r\n\r\n        if (this._height.fromString(value)) {\r\n            this._markAsDirty();\r\n        }\r\n    }\r\n\r\n    public get height(): string | number {\r\n        return this._height.toString(this._host);\r\n    }\r\n\r\n    /**\r\n     * Creates a new StackPanel\r\n     * @param name defines control name\r\n     */\r\n    constructor(public name?: string) {\r\n        super(name);\r\n    }\r\n\r\n    protected _getTypeName(): string {\r\n        return \"StackPanel\";\r\n    }\r\n\r\n    /** @hidden */\r\n    protected _preMeasure(parentMeasure: Measure, context: CanvasRenderingContext2D): void {\r\n        for (var child of this._children) {\r\n            if (this._isVertical) {\r\n                child.verticalAlignment = Control.VERTICAL_ALIGNMENT_TOP;\r\n            } else {\r\n                child.horizontalAlignment = Control.HORIZONTAL_ALIGNMENT_LEFT;\r\n            }\r\n        }\r\n\r\n        super._preMeasure(parentMeasure, context);\r\n    }\r\n\r\n    protected _additionalProcessing(parentMeasure: Measure, context: CanvasRenderingContext2D): void {\r\n        super._additionalProcessing(parentMeasure, context);\r\n\r\n        this._measureForChildren.copyFrom(parentMeasure);\r\n\r\n        this._measureForChildren.left = this._currentMeasure.left;\r\n        this._measureForChildren.top = this._currentMeasure.top;\r\n\r\n        if (!this.isVertical || this._manualWidth) {\r\n            this._measureForChildren.width = this._currentMeasure.width;\r\n        }\r\n\r\n        if (this.isVertical || this._manualHeight) {\r\n            this._measureForChildren.height = this._currentMeasure.height;\r\n        }\r\n    }\r\n\r\n    protected _postMeasure(): void {\r\n        var stackWidth = 0;\r\n        var stackHeight = 0;\r\n        for (var child of this._children) {\r\n            if (!child.isVisible || child.notRenderable) {\r\n                continue;\r\n            }\r\n\r\n            if (this._isVertical) {\r\n                if (child.top !== stackHeight + \"px\") {\r\n                    child.top = stackHeight + \"px\";\r\n                    this._rebuildLayout = true;\r\n                    child._top.ignoreAdaptiveScaling = true;\r\n                }\r\n\r\n                if (child._height.isPercentage && !child._automaticSize) {\r\n                    if (!this.ignoreLayoutWarnings) {\r\n                        Tools.Warn(`Control (Name:${child.name}, UniqueId:${child.uniqueId}) is using height in percentage mode inside a vertical StackPanel`);\r\n                    }\r\n                } else {\r\n                    stackHeight += child._currentMeasure.height + child.paddingTopInPixels + child.paddingBottomInPixels;\r\n                }\r\n            } else {\r\n                if (child.left !== stackWidth + \"px\") {\r\n                    child.left = stackWidth + \"px\";\r\n                    this._rebuildLayout = true;\r\n                    child._left.ignoreAdaptiveScaling = true;\r\n                }\r\n\r\n                if (child._width.isPercentage && !child._automaticSize) {\r\n                    if (!this.ignoreLayoutWarnings) {\r\n                        Tools.Warn(`Control (Name:${child.name}, UniqueId:${child.uniqueId}) is using width in percentage mode inside a horizontal StackPanel`);\r\n                    }\r\n                } else {\r\n                    stackWidth += child._currentMeasure.width + child.paddingLeftInPixels + child.paddingRightInPixels;\r\n                }\r\n            }\r\n        }\r\n\r\n        stackWidth += this.paddingLeftInPixels + this.paddingRightInPixels;\r\n        stackHeight += this.paddingTopInPixels + this.paddingBottomInPixels;\r\n\r\n        this._doNotTrackManualChanges = true;\r\n\r\n        // Let stack panel width or height default to stackHeight and stackWidth if dimensions are not specified.\r\n        // User can now define their own height and width for stack panel.\r\n\r\n        let panelWidthChanged = false;\r\n        let panelHeightChanged = false;\r\n\r\n        if (!this._manualHeight && this._isVertical) { // do not specify height if strictly defined by user\r\n            let previousHeight = this.height;\r\n            this.height = stackHeight + \"px\";\r\n            panelHeightChanged = previousHeight !== this.height || !this._height.ignoreAdaptiveScaling;\r\n        }\r\n        if (!this._manualWidth && !this._isVertical) { // do not specify width if strictly defined by user\r\n            let previousWidth = this.width;\r\n            this.width = stackWidth + \"px\";\r\n            panelWidthChanged = previousWidth !== this.width || !this._width.ignoreAdaptiveScaling;\r\n        }\r\n\r\n        if (panelHeightChanged) {\r\n            this._height.ignoreAdaptiveScaling = true;\r\n        }\r\n\r\n        if (panelWidthChanged) {\r\n            this._width.ignoreAdaptiveScaling = true;\r\n        }\r\n\r\n        this._doNotTrackManualChanges = false;\r\n\r\n        if (panelWidthChanged || panelHeightChanged) {\r\n            this._rebuildLayout = true;\r\n        }\r\n\r\n        super._postMeasure();\r\n    }\r\n}\r\n_TypeStore.RegisteredTypes[\"BABYLON.GUI.StackPanel\"] = StackPanel;", "import { Observable } from \"@babylonjs/core/Misc/observable\";\r\nimport { Vector2 } from \"@babylonjs/core/Maths/math.vector\";\r\n\r\nimport { Control } from \"./control\";\r\nimport { StackPanel } from \"./stackPanel\";\r\nimport { TextBlock } from \"./textBlock\";\r\nimport { _TypeStore } from '@babylonjs/core/Misc/typeStore';\r\nimport { Nullable } from '@babylonjs/core/types';\r\nimport { Measure } from '../measure';\r\nimport { PointerInfoBase } from '@babylonjs/core/Events/pointerEvents';\r\n\r\n/**\r\n * Class used to represent a 2D checkbox\r\n */\r\nexport class Checkbox extends Control {\r\n    private _isChecked = false;\r\n    private _background = \"black\";\r\n    private _checkSizeRatio = 0.8;\r\n    private _thickness = 1;\r\n\r\n    /** Gets or sets border thickness  */\r\n    public get thickness(): number {\r\n        return this._thickness;\r\n    }\r\n\r\n    public set thickness(value: number) {\r\n        if (this._thickness === value) {\r\n            return;\r\n        }\r\n\r\n        this._thickness = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Observable raised when isChecked property changes\r\n     */\r\n    public onIsCheckedChangedObservable = new Observable<boolean>();\r\n\r\n    /** Gets or sets a value indicating the ratio between overall size and check size */\r\n    public get checkSizeRatio(): number {\r\n        return this._checkSizeRatio;\r\n    }\r\n\r\n    public set checkSizeRatio(value: number) {\r\n        value = Math.max(Math.min(1, value), 0);\r\n\r\n        if (this._checkSizeRatio === value) {\r\n            return;\r\n        }\r\n\r\n        this._checkSizeRatio = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets background color */\r\n    public get background(): string {\r\n        return this._background;\r\n    }\r\n\r\n    public set background(value: string) {\r\n        if (this._background === value) {\r\n            return;\r\n        }\r\n\r\n        this._background = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets a boolean indicating if the checkbox is checked or not */\r\n    public get isChecked(): boolean {\r\n        return this._isChecked;\r\n    }\r\n\r\n    public set isChecked(value: boolean) {\r\n        if (this._isChecked === value) {\r\n            return;\r\n        }\r\n\r\n        this._isChecked = value;\r\n        this._markAsDirty();\r\n\r\n        this.onIsCheckedChangedObservable.notifyObservers(value);\r\n    }\r\n\r\n    /**\r\n     * Creates a new CheckBox\r\n     * @param name defines the control name\r\n     */\r\n    constructor(public name?: string) {\r\n        super(name);\r\n        this.isPointerBlocker = true;\r\n    }\r\n\r\n    protected _getTypeName(): string {\r\n        return \"Checkbox\";\r\n    }\r\n\r\n    /** @hidden */\r\n    public _draw(context: CanvasRenderingContext2D, invalidatedRectangle?: Nullable<Measure>): void {\r\n        context.save();\r\n\r\n        this._applyStates(context);\r\n        let actualWidth = this._currentMeasure.width - this._thickness;\r\n        let actualHeight = this._currentMeasure.height - this._thickness;\r\n\r\n        if (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) {\r\n            context.shadowColor = this.shadowColor;\r\n            context.shadowBlur = this.shadowBlur;\r\n            context.shadowOffsetX = this.shadowOffsetX;\r\n            context.shadowOffsetY = this.shadowOffsetY;\r\n        }\r\n\r\n        context.fillStyle = this._isEnabled ? this._background : this._disabledColor;\r\n        context.fillRect(this._currentMeasure.left + this._thickness / 2, this._currentMeasure.top + this._thickness / 2, actualWidth, actualHeight);\r\n\r\n        if (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) {\r\n            context.shadowBlur = 0;\r\n            context.shadowOffsetX = 0;\r\n            context.shadowOffsetY = 0;\r\n        }\r\n\r\n        if (this._isChecked) {\r\n            context.fillStyle = this._isEnabled ? this.color : this._disabledColorItem;\r\n            let offsetWidth = actualWidth * this._checkSizeRatio;\r\n            let offseHeight = actualHeight * this._checkSizeRatio;\r\n\r\n            context.fillRect(this._currentMeasure.left + this._thickness / 2 + (actualWidth - offsetWidth) / 2, this._currentMeasure.top + this._thickness / 2 + (actualHeight - offseHeight) / 2, offsetWidth, offseHeight);\r\n        }\r\n\r\n        context.strokeStyle = this.color;\r\n        context.lineWidth = this._thickness;\r\n\r\n        context.strokeRect(this._currentMeasure.left + this._thickness / 2, this._currentMeasure.top + this._thickness / 2, actualWidth, actualHeight);\r\n\r\n        context.restore();\r\n    }\r\n\r\n    // Events\r\n\r\n    /** @hidden */\r\n    public _onPointerDown(target: Control, coordinates: Vector2, pointerId: number, buttonIndex: number, pi: PointerInfoBase): boolean {\r\n        if (!super._onPointerDown(target, coordinates, pointerId, buttonIndex, pi)) {\r\n            return false;\r\n        }\r\n\r\n        this.isChecked = !this.isChecked;\r\n\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * Utility function to easily create a checkbox with a header\r\n     * @param title defines the label to use for the header\r\n     * @param onValueChanged defines the callback to call when value changes\r\n     * @returns a StackPanel containing the checkbox and a textBlock\r\n     */\r\n    public static AddCheckBoxWithHeader(title: string, onValueChanged: (value: boolean) => void): StackPanel {\r\n        var panel = new StackPanel();\r\n        panel.isVertical = false;\r\n        panel.height = \"30px\";\r\n\r\n        var checkbox = new Checkbox();\r\n        checkbox.width = \"20px\";\r\n        checkbox.height = \"20px\";\r\n        checkbox.isChecked = true;\r\n        checkbox.color = \"green\";\r\n        checkbox.onIsCheckedChangedObservable.add(onValueChanged);\r\n        panel.addControl(checkbox);\r\n\r\n        var header = new TextBlock();\r\n        header.text = title;\r\n        header.width = \"180px\";\r\n        header.paddingLeft = \"5px\";\r\n        header.textHorizontalAlignment = Control.HORIZONTAL_ALIGNMENT_LEFT;\r\n        header.color = \"white\";\r\n        panel.addControl(header);\r\n\r\n        return panel;\r\n    }\r\n}\r\n_TypeStore.RegisteredTypes[\"BABYLON.GUI.Checkbox\"] = Checkbox;\r\n", "/** @hidden */\r\nexport class TextWrapper {\r\n    private _text: string;\r\n    private _characters: string[] | undefined;\r\n\r\n    public get text(): string {\r\n        return this._characters ? this._characters.join(\"\") : this._text;\r\n    }\r\n\r\n    public set text(txt: string) {\r\n        this._text = txt;\r\n        this._characters = Array.from && Array.from(txt);\r\n    }\r\n\r\n    public get length(): number {\r\n        return this._characters ? this._characters.length : this._text.length;\r\n    }\r\n\r\n    public removePart(idxStart: number, idxEnd: number, insertTxt?: string): void {\r\n        this._text = this._text.slice(0, idxStart) + (insertTxt ? insertTxt : \"\") + this._text.slice(idxEnd);\r\n        if (this._characters) {\r\n            const newCharacters = insertTxt ? Array.from(insertTxt) : [];\r\n            this._characters.splice(idxStart, idxEnd - idxStart, ...newCharacters);\r\n        }\r\n    }\r\n\r\n    public charAt(idx: number): string {\r\n        return this._characters ? this._characters[idx] : this._text.charAt(idx);\r\n    }\r\n\r\n    public substr(from: number, length?: number): string {\r\n        if (this._characters) {\r\n            if (isNaN(from)) {\r\n                from = 0;\r\n            } else if (from >= 0) {\r\n                from = Math.min(from, this._characters.length);\r\n            } else {\r\n                from = this._characters.length + Math.max(from, -this._characters.length);\r\n            }\r\n            if (length === undefined) {\r\n                length = this._characters.length - from;\r\n            } else if (isNaN(length)) {\r\n                length = 0;\r\n            } else if (length < 0) {\r\n                length = 0;\r\n            }\r\n            const temp = [];\r\n            while (--length >= 0) {\r\n                temp[length] = this._characters[from + length];\r\n            }\r\n            return temp.join(\"\");\r\n        }\r\n\r\n        return this._text.substr(from, length);\r\n    }\r\n\r\n    public substring(from: number, to?: number): string {\r\n        if (this._characters) {\r\n            if (isNaN(from)) {\r\n                from = 0;\r\n            } else if (from > this._characters.length) {\r\n                from = this._characters.length;\r\n            } else if (from < 0) {\r\n                from = 0;\r\n            }\r\n            if (to === undefined) {\r\n                to = this._characters.length;\r\n            } else if (isNaN(to)) {\r\n                to = 0;\r\n            } else if (to > this._characters.length) {\r\n                to = this._characters.length;\r\n            } else if (to < 0) {\r\n                to = 0;\r\n            }\r\n            const temp = [];\r\n            let idx = 0;\r\n            while (from < to) {\r\n                temp[idx++] = this._characters[from++];\r\n            }\r\n            return temp.join(\"\");\r\n        }\r\n\r\n        return this._text.substring(from, to);\r\n    }\r\n\r\n    public isWord(index: number): boolean {\r\n        const rWord = /\\w/g;\r\n        return this._characters ? this._characters[index].search(rWord) !== -1 : this._text.search(rWord) !== -1;\r\n    }\r\n}\r\n", "import { Nullable } from \"@babylonjs/core/types\";\nimport { Observable, Observer } from \"@babylonjs/core/Misc/observable\";\nimport { Vector2 } from \"@babylonjs/core/Maths/math.vector\";\nimport { ClipboardEventTypes, ClipboardInfo } from \"@babylonjs/core/Events/clipboardEvents\";\nimport { PointerInfo, PointerEventTypes, PointerInfoBase } from '@babylonjs/core/Events/pointerEvents';\n\nimport { Control } from \"./control\";\nimport { IFocusableControl } from \"../advancedDynamicTexture\";\nimport { ValueAndUnit } from \"../valueAndUnit\";\nimport { VirtualKeyboard } from \"./virtualKeyboard\";\nimport { _TypeStore } from '@babylonjs/core/Misc/typeStore';\nimport { Measure } from '../measure';\nimport { TextWrapper } from './textWrapper';\n\n/**\n * Class used to create input text control\n */\nexport class InputText extends Control implements IFocusableControl {\n    private _textWrapper: TextWrapper;\n    private _placeholderText = \"\";\n    private _background = \"#222222\";\n    private _focusedBackground = \"#000000\";\n    private _focusedColor = \"white\";\n    private _placeholderColor = \"gray\";\n    private _thickness = 1;\n    private _margin = new ValueAndUnit(10, ValueAndUnit.UNITMODE_PIXEL);\n    private _autoStretchWidth = true;\n    private _maxWidth = new ValueAndUnit(1, ValueAndUnit.UNITMODE_PERCENTAGE, false);\n    private _isFocused = false;\n    private _blinkTimeout: number;\n    private _blinkIsEven = false;\n    private _cursorOffset = 0;\n    private _scrollLeft: Nullable<number>;\n    private _textWidth: number;\n    private _clickedCoordinate: Nullable<number>;\n    private _deadKey = false;\n    private _addKey = true;\n    private _currentKey = \"\";\n    private _isTextHighlightOn = false;\n    private _textHighlightColor = \"#d5e0ff\";\n    private _highligherOpacity = 0.4;\n    private _highlightedText = \"\";\n    private _startHighlightIndex = 0;\n    private _endHighlightIndex = 0;\n    private _cursorIndex = -1;\n    private _onFocusSelectAll = false;\n    private _isPointerDown = false;\n    private _onClipboardObserver: Nullable<Observer<ClipboardInfo>>;\n    private _onPointerDblTapObserver: Nullable<Observer<PointerInfo>>;\n\n    /** @hidden */\n    public _connectedVirtualKeyboard: Nullable<VirtualKeyboard>;\n\n    /** Gets or sets a string representing the message displayed on mobile when the control gets the focus */\n    public promptMessage = \"Please enter text:\";\n    /** Force disable prompt on mobile device */\n    public disableMobilePrompt = false;\n\n    /** Observable raised when the text changes */\n    public onTextChangedObservable = new Observable<InputText>();\n    /** Observable raised just before an entered character is to be added */\n    public onBeforeKeyAddObservable = new Observable<InputText>();\n    /** Observable raised when the control gets the focus */\n    public onFocusObservable = new Observable<InputText>();\n    /** Observable raised when the control loses the focus */\n    public onBlurObservable = new Observable<InputText>();\n    /**Observable raised when the text is highlighted */\n    public onTextHighlightObservable = new Observable<InputText>();\n    /**Observable raised when copy event is triggered */\n    public onTextCopyObservable = new Observable<InputText>();\n    /** Observable raised when cut event is triggered */\n    public onTextCutObservable = new Observable<InputText>();\n    /** Observable raised when paste event is triggered */\n    public onTextPasteObservable = new Observable<InputText>();\n    /** Observable raised when a key event was processed */\n    public onKeyboardEventProcessedObservable = new Observable<KeyboardEvent>();\n\n    /** Gets or sets the maximum width allowed by the control */\n    public get maxWidth(): string | number {\n        return this._maxWidth.toString(this._host);\n    }\n\n    /** Gets the maximum width allowed by the control in pixels */\n    public get maxWidthInPixels(): number {\n        return this._maxWidth.getValueInPixel(this._host, this._cachedParentMeasure.width);\n    }\n\n    public set maxWidth(value: string | number) {\n        if (this._maxWidth.toString(this._host) === value) {\n            return;\n        }\n\n        if (this._maxWidth.fromString(value)) {\n            this._markAsDirty();\n        }\n    }\n\n    /** Gets or sets the text highlighter transparency; default: 0.4 */\n    public get highligherOpacity(): number {\n        return this._highligherOpacity;\n    }\n\n    public set highligherOpacity(value: number) {\n        if (this._highligherOpacity === value) {\n            return;\n        }\n        this._highligherOpacity = value;\n        this._markAsDirty();\n    }\n    /** Gets or sets a boolean indicating whether to select complete text by default on input focus */\n    public get onFocusSelectAll(): boolean {\n        return this._onFocusSelectAll;\n    }\n\n    public set onFocusSelectAll(value: boolean) {\n        if (this._onFocusSelectAll === value) {\n            return;\n        }\n\n        this._onFocusSelectAll = value;\n        this._markAsDirty();\n    }\n\n    /** Gets or sets the text hightlight color */\n    public get textHighlightColor(): string {\n        return this._textHighlightColor;\n    }\n\n    public set textHighlightColor(value: string) {\n        if (this._textHighlightColor === value) {\n            return;\n        }\n        this._textHighlightColor = value;\n        this._markAsDirty();\n    }\n\n    /** Gets or sets control margin */\n    public get margin(): string {\n        return this._margin.toString(this._host);\n    }\n\n    /** Gets control margin in pixels */\n    public get marginInPixels(): number {\n        return this._margin.getValueInPixel(this._host, this._cachedParentMeasure.width);\n    }\n\n    public set margin(value: string) {\n        if (this._margin.toString(this._host) === value) {\n            return;\n        }\n\n        if (this._margin.fromString(value)) {\n            this._markAsDirty();\n        }\n    }\n\n    /** Gets or sets a boolean indicating if the control can auto stretch its width to adapt to the text */\n    public get autoStretchWidth(): boolean {\n        return this._autoStretchWidth;\n    }\n\n    public set autoStretchWidth(value: boolean) {\n        if (this._autoStretchWidth === value) {\n            return;\n        }\n\n        this._autoStretchWidth = value;\n        this._markAsDirty();\n    }\n\n    /** Gets or sets border thickness */\n    public get thickness(): number {\n        return this._thickness;\n    }\n\n    public set thickness(value: number) {\n        if (this._thickness === value) {\n            return;\n        }\n\n        this._thickness = value;\n        this._markAsDirty();\n    }\n\n    /** Gets or sets the background color when focused */\n    public get focusedBackground(): string {\n        return this._focusedBackground;\n    }\n\n    public set focusedBackground(value: string) {\n        if (this._focusedBackground === value) {\n            return;\n        }\n\n        this._focusedBackground = value;\n        this._markAsDirty();\n    }\n\n    /** Gets or sets the background color when focused */\n    public get focusedColor(): string {\n        return this._focusedColor;\n    }\n\n    public set focusedColor(value: string) {\n        if (this._focusedColor === value) {\n            return;\n        }\n\n        this._focusedColor = value;\n        this._markAsDirty();\n    }\n\n    /** Gets or sets the background color */\n    public get background(): string {\n        return this._background;\n    }\n\n    public set background(value: string) {\n        if (this._background === value) {\n            return;\n        }\n\n        this._background = value;\n        this._markAsDirty();\n    }\n\n    /** Gets or sets the placeholder color */\n    public get placeholderColor(): string {\n        return this._placeholderColor;\n    }\n\n    public set placeholderColor(value: string) {\n        if (this._placeholderColor === value) {\n            return;\n        }\n\n        this._placeholderColor = value;\n        this._markAsDirty();\n    }\n\n    /** Gets or sets the text displayed when the control is empty */\n    public get placeholderText(): string {\n        return this._placeholderText;\n    }\n\n    public set placeholderText(value: string) {\n        if (this._placeholderText === value) {\n            return;\n        }\n        this._placeholderText = value;\n        this._markAsDirty();\n    }\n\n    /** Gets or sets the dead key flag */\n    public get deadKey(): boolean {\n        return this._deadKey;\n    }\n\n    public set deadKey(flag: boolean) {\n        this._deadKey = flag;\n    }\n\n    /** Gets or sets the highlight text */\n    public get highlightedText(): string {\n        return this._highlightedText;\n    }\n    public set highlightedText(text: string) {\n        if (this._highlightedText === text) {\n            return;\n        }\n        this._highlightedText = text;\n        this._markAsDirty();\n    }\n\n    /** Gets or sets if the current key should be added */\n    public get addKey(): boolean {\n        return this._addKey;\n    }\n\n    public set addKey(flag: boolean) {\n        this._addKey = flag;\n    }\n\n    /** Gets or sets the value of the current key being entered */\n    public get currentKey(): string {\n        return this._currentKey;\n    }\n\n    public set currentKey(key: string) {\n        this._currentKey = key;\n    }\n\n    /** Gets or sets the text displayed in the control */\n    public get text(): string {\n        return this._textWrapper.text;\n    }\n\n    public set text(value: string) {\n        let valueAsString = value.toString(); // Forcing convertion\n\n        if (!this._textWrapper) {\n            this._textWrapper = new TextWrapper();\n        }\n\n        if (this._textWrapper.text === valueAsString) {\n            return;\n        }\n        this._textWrapper.text = valueAsString;\n        this._textHasChanged();\n    }\n\n    private _textHasChanged(): void {\n        this._markAsDirty();\n        this.onTextChangedObservable.notifyObservers(this);\n    }\n\n    /** Gets or sets control width */\n    public get width(): string | number {\n        return this._width.toString(this._host);\n    }\n\n    public set width(value: string | number) {\n        if (this._width.toString(this._host) === value) {\n            return;\n        }\n\n        if (this._width.fromString(value)) {\n            this._markAsDirty();\n        }\n\n        this.autoStretchWidth = false;\n    }\n\n    /**\n     * Creates a new InputText\n     * @param name defines the control name\n     * @param text defines the text of the control\n     */\n    constructor(public name?: string, text: string = \"\") {\n        super(name);\n\n        this.text = text;\n        this.isPointerBlocker = true;\n    }\n\n    /** @hidden */\n    public onBlur(): void {\n        this._isFocused = false;\n        this._scrollLeft = null;\n        this._cursorOffset = 0;\n        clearTimeout(this._blinkTimeout);\n        this._markAsDirty();\n\n        this.onBlurObservable.notifyObservers(this);\n\n        this._host.unRegisterClipboardEvents();\n        if (this._onClipboardObserver) {\n            this._host.onClipboardObservable.remove(this._onClipboardObserver);\n        }\n        let scene = this._host.getScene();\n        if (this._onPointerDblTapObserver && scene) {\n            scene.onPointerObservable.remove(this._onPointerDblTapObserver);\n        }\n    }\n\n    /** @hidden */\n    public onFocus(): void {\n        if (!this._isEnabled) {\n            return;\n        }\n        this._scrollLeft = null;\n        this._isFocused = true;\n        this._blinkIsEven = false;\n        this._cursorOffset = 0;\n        this._markAsDirty();\n\n        this.onFocusObservable.notifyObservers(this);\n\n        if (navigator.userAgent.indexOf(\"Mobile\") !== -1 && !this.disableMobilePrompt) {\n            let value = prompt(this.promptMessage);\n\n            if (value !== null) {\n                this.text = value;\n            }\n            this._host.focusedControl = null;\n            return;\n        }\n\n        this._host.registerClipboardEvents();\n\n        this._onClipboardObserver = this._host.onClipboardObservable.add((clipboardInfo) => {\n            // process clipboard event, can be configured.\n            switch (clipboardInfo.type) {\n                case ClipboardEventTypes.COPY:\n                    this._onCopyText(clipboardInfo.event);\n                    this.onTextCopyObservable.notifyObservers(this);\n                    break;\n                case ClipboardEventTypes.CUT:\n                    this._onCutText(clipboardInfo.event);\n                    this.onTextCutObservable.notifyObservers(this);\n                    break;\n                case ClipboardEventTypes.PASTE:\n                    this._onPasteText(clipboardInfo.event);\n                    this.onTextPasteObservable.notifyObservers(this);\n                    break;\n                default: return;\n            }\n        });\n\n        let scene = this._host.getScene();\n        if (scene) {\n            //register the pointer double tap event\n            this._onPointerDblTapObserver = scene.onPointerObservable.add((pointerInfo) => {\n                if (!this._isFocused) {\n                    return;\n                }\n                if (pointerInfo.type === PointerEventTypes.POINTERDOUBLETAP) {\n                    this._processDblClick(pointerInfo);\n                }\n            });\n        }\n\n        if (this._onFocusSelectAll) {\n            this._selectAllText();\n        }\n\n    }\n\n    protected _getTypeName(): string {\n        return \"InputText\";\n    }\n\n    /**\n     * Function called to get the list of controls that should not steal the focus from this control\n     * @returns an array of controls\n     */\n    public keepsFocusWith(): Nullable<Control[]> {\n        if (!this._connectedVirtualKeyboard) {\n            return null;\n        }\n        return [this._connectedVirtualKeyboard];\n    }\n\n    /** @hidden */\n    public processKey(keyCode: number, key?: string, evt?: KeyboardEvent) {\n\n        //return if clipboard event keys (i.e -ctr/cmd + c,v,x)\n        if (evt && (evt.ctrlKey || evt.metaKey) && (keyCode === 67 || keyCode === 86 || keyCode === 88)) {\n            return;\n        }\n\n        //select all\n        if (evt && (evt.ctrlKey || evt.metaKey) && keyCode === 65) {\n            this._selectAllText();\n            evt.preventDefault();\n            return;\n        }\n        // Specific cases\n        switch (keyCode) {\n            case 32: //SPACE\n                key = \" \"; //ie11 key for space is \"Spacebar\"\n                break;\n            case 191: //SLASH\n                if (evt) {\n                    evt.preventDefault();\n                }\n                break;\n            case 8: // BACKSPACE\n                if (this._textWrapper.text && this._textWrapper.length > 0) {\n                    //delete the highlighted text\n                    if (this._isTextHighlightOn) {\n                        this._textWrapper.removePart(this._startHighlightIndex, this._endHighlightIndex);\n                        this._textHasChanged();\n                        this._isTextHighlightOn = false;\n                        this._cursorOffset = this._textWrapper.length - this._startHighlightIndex;\n                        this._blinkIsEven = false;\n                        if (evt) {\n                            evt.preventDefault();\n                        }\n                        return;\n                    }\n                    //delete single character\n                    if (this._cursorOffset === 0) {\n                        this.text = this._textWrapper.substr(0, this._textWrapper.length - 1);\n                    } else {\n                        let deletePosition = this._textWrapper.length - this._cursorOffset;\n                        if (deletePosition > 0) {\n                            this._textWrapper.removePart(deletePosition - 1, deletePosition);\n                            this._textHasChanged();\n                        }\n                    }\n                }\n                if (evt) {\n                    evt.preventDefault();\n                }\n                return;\n            case 46: // DELETE\n                if (this._isTextHighlightOn) {\n                    this._textWrapper.removePart(this._startHighlightIndex, this._endHighlightIndex);\n                    this._textHasChanged();\n                    this._isTextHighlightOn = false;\n                    this._cursorOffset = this._textWrapper.length - this._startHighlightIndex;\n                    if (evt) {\n                        evt.preventDefault();\n                    }\n                    return;\n                }\n                if (this._textWrapper.text && this._textWrapper.length > 0 && this._cursorOffset > 0) {\n                    let deletePosition = this._textWrapper.length - this._cursorOffset;\n                    this._textWrapper.removePart(deletePosition, deletePosition + 1);\n                    this._textHasChanged();\n                    this._cursorOffset--;\n                }\n                if (evt) {\n                    evt.preventDefault();\n                }\n                return;\n            case 13: // RETURN\n                this._host.focusedControl = null;\n                this._isTextHighlightOn = false;\n                return;\n            case 35: // END\n                this._cursorOffset = 0;\n                this._blinkIsEven = false;\n                this._isTextHighlightOn = false;\n                this._markAsDirty();\n                return;\n            case 36: // HOME\n                this._cursorOffset = this._textWrapper.length;\n                this._blinkIsEven = false;\n                this._isTextHighlightOn = false;\n                this._markAsDirty();\n                return;\n            case 37: // LEFT\n                this._cursorOffset++;\n                if (this._cursorOffset > this._textWrapper.length) {\n                    this._cursorOffset = this._textWrapper.length;\n                }\n\n                if (evt && evt.shiftKey) {\n                    // update the cursor\n                    this._blinkIsEven = false;\n                    // shift + ctrl/cmd + <-\n                    if (evt.ctrlKey || evt.metaKey) {\n                        if (!this._isTextHighlightOn) {\n                            if (this._textWrapper.length === this._cursorOffset) {\n                                return;\n                            }\n                            else {\n                                this._endHighlightIndex = this._textWrapper.length - this._cursorOffset + 1;\n                            }\n                        }\n                        this._startHighlightIndex = 0;\n                        this._cursorIndex = this._textWrapper.length - this._endHighlightIndex;\n                        this._cursorOffset = this._textWrapper.length;\n                        this._isTextHighlightOn = true;\n                        this._markAsDirty();\n                        return;\n                    }\n                    //store the starting point\n                    if (!this._isTextHighlightOn) {\n                        this._isTextHighlightOn = true;\n                        this._cursorIndex = (this._cursorOffset >= this._textWrapper.length) ? this._textWrapper.length : this._cursorOffset - 1;\n                    }\n                    //if text is already highlighted\n                    else if (this._cursorIndex === -1) {\n                        this._cursorIndex = this._textWrapper.length - this._endHighlightIndex;\n                        this._cursorOffset = (this._startHighlightIndex === 0) ? this._textWrapper.length : this._textWrapper.length - this._startHighlightIndex + 1;\n                    }\n                    //set the highlight indexes\n                    if (this._cursorIndex < this._cursorOffset) {\n                        this._endHighlightIndex = this._textWrapper.length - this._cursorIndex;\n                        this._startHighlightIndex = this._textWrapper.length - this._cursorOffset;\n                    }\n                    else if (this._cursorIndex > this._cursorOffset) {\n                        this._endHighlightIndex = this._textWrapper.length - this._cursorOffset;\n                        this._startHighlightIndex = this._textWrapper.length - this._cursorIndex;\n                    }\n                    else {\n                        this._isTextHighlightOn = false;\n                    }\n                    this._markAsDirty();\n                    return;\n                }\n                if (this._isTextHighlightOn) {\n                    this._cursorOffset = this._textWrapper.length - this._startHighlightIndex;\n                    this._isTextHighlightOn = false;\n                }\n                if (evt && (evt.ctrlKey || evt.metaKey)) {\n                    this._cursorOffset = this._textWrapper.length;\n                    evt.preventDefault();\n                }\n                this._blinkIsEven = false;\n                this._isTextHighlightOn = false;\n                this._cursorIndex = -1;\n                this._markAsDirty();\n                return;\n            case 39: // RIGHT\n                this._cursorOffset--;\n                if (this._cursorOffset < 0) {\n                    this._cursorOffset = 0;\n                }\n                if (evt && evt.shiftKey) {\n                    //update the cursor\n                    this._blinkIsEven = false;\n                    //shift + ctrl/cmd + ->\n                    if (evt.ctrlKey || evt.metaKey) {\n                        if (!this._isTextHighlightOn) {\n                            if (this._cursorOffset === 0) {\n                                return;\n                            }\n                            else {\n                                this._startHighlightIndex = this._textWrapper.length - this._cursorOffset - 1;\n                            }\n                        }\n                        this._endHighlightIndex = this._textWrapper.length;\n                        this._isTextHighlightOn = true;\n                        this._cursorIndex = this._textWrapper.length - this._startHighlightIndex;\n                        this._cursorOffset = 0;\n                        this._markAsDirty();\n                        return;\n                    }\n\n                    if (!this._isTextHighlightOn) {\n                        this._isTextHighlightOn = true;\n                        this._cursorIndex = (this._cursorOffset <= 0) ? 0 : this._cursorOffset + 1;\n                    }\n                    //if text is already highlighted\n                    else if (this._cursorIndex === -1) {\n                        this._cursorIndex = this._textWrapper.length - this._startHighlightIndex;\n                        this._cursorOffset = (this._textWrapper.length === this._endHighlightIndex) ? 0 : this._textWrapper.length - this._endHighlightIndex - 1;\n                    }\n                    //set the highlight indexes\n                    if (this._cursorIndex < this._cursorOffset) {\n                        this._endHighlightIndex = this._textWrapper.length - this._cursorIndex;\n                        this._startHighlightIndex = this._textWrapper.length - this._cursorOffset;\n                    }\n                    else if (this._cursorIndex > this._cursorOffset) {\n                        this._endHighlightIndex = this._textWrapper.length - this._cursorOffset;\n                        this._startHighlightIndex = this._textWrapper.length - this._cursorIndex;\n                    }\n                    else {\n                        this._isTextHighlightOn = false;\n                    }\n                    this._markAsDirty();\n                    return;\n                }\n                if (this._isTextHighlightOn) {\n                    this._cursorOffset = this._textWrapper.length - this._endHighlightIndex;\n                    this._isTextHighlightOn = false;\n                }\n                //ctr + ->\n                if (evt && (evt.ctrlKey || evt.metaKey)) {\n                    this._cursorOffset = 0;\n                    evt.preventDefault();\n                }\n                this._blinkIsEven = false;\n                this._isTextHighlightOn = false;\n                this._cursorIndex = -1;\n                this._markAsDirty();\n                return;\n            case 222: // Dead\n                if (evt) {\n                    evt.preventDefault();\n                }\n                this._cursorIndex = -1;\n                this.deadKey = true;\n                break;\n        }\n        // Printable characters\n        if (key &&\n            ((keyCode === -1) ||                     // Direct access\n                (keyCode === 32) ||                     // Space\n                (keyCode > 47 && keyCode < 64) ||       // Numbers\n                (keyCode > 64 && keyCode < 91) ||       // Letters\n                (keyCode > 159 && keyCode < 193) ||     // Special characters\n                (keyCode > 218 && keyCode < 223) ||     // Special characters\n                (keyCode > 95 && keyCode < 112))) {     // Numpad\n            this._currentKey = key;\n            this.onBeforeKeyAddObservable.notifyObservers(this);\n            key = this._currentKey;\n            if (this._addKey) {\n                if (this._isTextHighlightOn) {\n                    this._textWrapper.removePart(this._startHighlightIndex, this._endHighlightIndex, key);\n                    this._textHasChanged();\n                    this._cursorOffset = this._textWrapper.length - (this._startHighlightIndex + 1);\n                    this._isTextHighlightOn = false;\n                    this._blinkIsEven = false;\n                    this._markAsDirty();\n                }\n                else if (this._cursorOffset === 0) {\n                    this.text += key;\n                } else {\n                    let insertPosition = this._textWrapper.length - this._cursorOffset;\n                    this._textWrapper.removePart(insertPosition, insertPosition, key);\n                    this._textHasChanged();\n                }\n            }\n        }\n    }\n\n    /** @hidden */\n    private _updateValueFromCursorIndex(offset: number) {\n        //update the cursor\n        this._blinkIsEven = false;\n\n        if (this._cursorIndex === -1) {\n            this._cursorIndex = offset;\n        } else {\n            if (this._cursorIndex < this._cursorOffset) {\n                this._endHighlightIndex = this._textWrapper.length - this._cursorIndex;\n                this._startHighlightIndex = this._textWrapper.length - this._cursorOffset;\n            }\n            else if (this._cursorIndex > this._cursorOffset) {\n                this._endHighlightIndex = this._textWrapper.length - this._cursorOffset;\n                this._startHighlightIndex = this._textWrapper.length - this._cursorIndex;\n            }\n            else {\n                this._isTextHighlightOn = false;\n                this._markAsDirty();\n                return;\n            }\n        }\n        this._isTextHighlightOn = true;\n        this._markAsDirty();\n    }\n    /** @hidden */\n    private _processDblClick(evt: PointerInfo) {\n        //pre-find the start and end index of the word under cursor, speeds up the rendering\n        this._startHighlightIndex = this._textWrapper.length - this._cursorOffset;\n        this._endHighlightIndex = this._startHighlightIndex;\n        let moveLeft, moveRight;\n        do {\n            moveRight = this._endHighlightIndex < this._textWrapper.length && this._textWrapper.isWord(this._endHighlightIndex) ? ++this._endHighlightIndex : 0;\n            moveLeft = this._startHighlightIndex > 0 && this._textWrapper.isWord(this._startHighlightIndex - 1) ? --this._startHighlightIndex : 0;\n        } while (moveLeft || moveRight);\n\n        this._cursorOffset = this._textWrapper.length - this._startHighlightIndex;\n        this.onTextHighlightObservable.notifyObservers(this);\n\n        this._isTextHighlightOn = true;\n        this._clickedCoordinate = null;\n        this._blinkIsEven = true;\n        this._cursorIndex = -1;\n        this._markAsDirty();\n    }\n    /** @hidden */\n    private _selectAllText() {\n        this._blinkIsEven = true;\n        this._isTextHighlightOn = true;\n\n        this._startHighlightIndex = 0;\n        this._endHighlightIndex = this._textWrapper.length;\n        this._cursorOffset = this._textWrapper.length;\n        this._cursorIndex = -1;\n        this._markAsDirty();\n    }\n\n    /**\n     * Handles the keyboard event\n     * @param evt Defines the KeyboardEvent\n     */\n    public processKeyboard(evt: KeyboardEvent): void {\n        // process pressed key\n        this.processKey(evt.keyCode, evt.key, evt);\n\n        this.onKeyboardEventProcessedObservable.notifyObservers(evt);\n    }\n\n    /** @hidden */\n    private _onCopyText(ev: ClipboardEvent): void {\n        this._isTextHighlightOn = false;\n        //when write permission to clipbaord data is denied\n        try {\n            ev.clipboardData && ev.clipboardData.setData(\"text/plain\", this._highlightedText);\n        }\n        catch { } //pass\n        this._host.clipboardData = this._highlightedText;\n    }\n    /** @hidden */\n    private _onCutText(ev: ClipboardEvent): void {\n        if (!this._highlightedText) {\n            return;\n        }\n        this._textWrapper.removePart(this._startHighlightIndex, this._endHighlightIndex);\n        this._textHasChanged();\n        this._isTextHighlightOn = false;\n        this._cursorOffset = this._textWrapper.length - this._startHighlightIndex;\n        //when write permission to clipbaord data is denied\n        try {\n            ev.clipboardData && ev.clipboardData.setData(\"text/plain\", this._highlightedText);\n        }\n        catch { } //pass\n\n        this._host.clipboardData = this._highlightedText;\n        this._highlightedText = \"\";\n    }\n    /** @hidden */\n    private _onPasteText(ev: ClipboardEvent): void {\n        let data: string = \"\";\n        if (ev.clipboardData && ev.clipboardData.types.indexOf(\"text/plain\") !== -1) {\n            data = ev.clipboardData.getData(\"text/plain\");\n        }\n        else {\n            //get the cached data; returns blank string by default\n            data = this._host.clipboardData;\n        }\n        let insertPosition = this._textWrapper.length - this._cursorOffset;\n        this._textWrapper.removePart(insertPosition, insertPosition, data);\n        this._textHasChanged();\n    }\n\n    public _draw(context: CanvasRenderingContext2D, invalidatedRectangle?: Nullable<Measure>): void {\n        context.save();\n\n        this._applyStates(context);\n        if (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) {\n            context.shadowColor = this.shadowColor;\n            context.shadowBlur = this.shadowBlur;\n            context.shadowOffsetX = this.shadowOffsetX;\n            context.shadowOffsetY = this.shadowOffsetY;\n        }\n\n        // Background\n        if (this._isFocused) {\n            if (this._focusedBackground) {\n                context.fillStyle = this._isEnabled ? this._focusedBackground : this._disabledColor;\n\n                context.fillRect(this._currentMeasure.left, this._currentMeasure.top, this._currentMeasure.width, this._currentMeasure.height);\n            }\n        } else if (this._background) {\n            context.fillStyle = this._isEnabled ? this._background : this._disabledColor;\n\n            context.fillRect(this._currentMeasure.left, this._currentMeasure.top, this._currentMeasure.width, this._currentMeasure.height);\n        }\n\n        if (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) {\n            context.shadowBlur = 0;\n            context.shadowOffsetX = 0;\n            context.shadowOffsetY = 0;\n        }\n\n        if (!this._fontOffset) {\n            this._fontOffset = Control._GetFontOffset(context.font);\n        }\n\n        // Text\n        let clipTextLeft = this._currentMeasure.left + this._margin.getValueInPixel(this._host, this._tempParentMeasure.width);\n        if (this.color) {\n            context.fillStyle = this.color;\n        }\n\n        let text = this._beforeRenderText(this._textWrapper);\n\n        if (!this._isFocused && !this._textWrapper.text && this._placeholderText) {\n            text = new TextWrapper();\n            text.text = this._placeholderText;\n\n            if (this._placeholderColor) {\n                context.fillStyle = this._placeholderColor;\n            }\n        }\n\n        this._textWidth = context.measureText(text.text).width;\n        let marginWidth = this._margin.getValueInPixel(this._host, this._tempParentMeasure.width) * 2;\n        if (this._autoStretchWidth) {\n            this.width = Math.min(this._maxWidth.getValueInPixel(this._host, this._tempParentMeasure.width), this._textWidth + marginWidth) + \"px\";\n        }\n\n        let rootY = this._fontOffset.ascent + (this._currentMeasure.height - this._fontOffset.height) / 2;\n        let availableWidth = this._width.getValueInPixel(this._host, this._tempParentMeasure.width) - marginWidth;\n\n        context.save();\n        context.beginPath();\n        context.rect(clipTextLeft, this._currentMeasure.top + (this._currentMeasure.height - this._fontOffset.height) / 2, availableWidth + 2, this._currentMeasure.height);\n        context.clip();\n\n        if (this._isFocused && this._textWidth > availableWidth) {\n            let textLeft = clipTextLeft - this._textWidth + availableWidth;\n            if (!this._scrollLeft) {\n                this._scrollLeft = textLeft;\n            }\n        } else {\n            this._scrollLeft = clipTextLeft;\n        }\n\n        context.fillText(text.text, this._scrollLeft, this._currentMeasure.top + rootY);\n\n        // Cursor\n        if (this._isFocused) {\n\n            // Need to move cursor\n            if (this._clickedCoordinate) {\n                var rightPosition = this._scrollLeft + this._textWidth;\n                var absoluteCursorPosition = rightPosition - this._clickedCoordinate;\n                var currentSize = 0;\n                this._cursorOffset = 0;\n                var previousDist = 0;\n                do {\n                    if (this._cursorOffset) {\n                        previousDist = Math.abs(absoluteCursorPosition - currentSize);\n                    }\n                    this._cursorOffset++;\n                    currentSize = context.measureText(text.substr(text.length - this._cursorOffset, this._cursorOffset)).width;\n\n                } while (currentSize < absoluteCursorPosition && (text.length >= this._cursorOffset));\n\n                // Find closest move\n                if (Math.abs(absoluteCursorPosition - currentSize) > previousDist) {\n                    this._cursorOffset--;\n                }\n\n                this._blinkIsEven = false;\n                this._clickedCoordinate = null;\n            }\n\n            // Render cursor\n            if (!this._blinkIsEven) {\n                let cursorOffsetText = text.substr(text.length - this._cursorOffset);\n                let cursorOffsetWidth = context.measureText(cursorOffsetText).width;\n                let cursorLeft = this._scrollLeft + this._textWidth - cursorOffsetWidth;\n\n                if (cursorLeft < clipTextLeft) {\n                    this._scrollLeft += (clipTextLeft - cursorLeft);\n                    cursorLeft = clipTextLeft;\n                    this._markAsDirty();\n                } else if (cursorLeft > clipTextLeft + availableWidth) {\n                    this._scrollLeft += (clipTextLeft + availableWidth - cursorLeft);\n                    cursorLeft = clipTextLeft + availableWidth;\n                    this._markAsDirty();\n                }\n                if (!this._isTextHighlightOn) {\n                    context.fillRect(cursorLeft, this._currentMeasure.top + (this._currentMeasure.height - this._fontOffset.height) / 2, 2, this._fontOffset.height);\n                }\n            }\n\n            clearTimeout(this._blinkTimeout);\n            this._blinkTimeout = <any>setTimeout(() => {\n                this._blinkIsEven = !this._blinkIsEven;\n                this._markAsDirty();\n            }, 500);\n\n            //show the highlighted text\n            if (this._isTextHighlightOn) {\n                clearTimeout(this._blinkTimeout);\n                let highlightCursorOffsetWidth = context.measureText(text.substring(this._startHighlightIndex)).width;\n                let highlightCursorLeft = this._scrollLeft + this._textWidth - highlightCursorOffsetWidth;\n                this._highlightedText = text.substring(this._startHighlightIndex, this._endHighlightIndex);\n                let width = context.measureText(text.substring(this._startHighlightIndex, this._endHighlightIndex)).width;\n                if (highlightCursorLeft < clipTextLeft) {\n                    width = width - (clipTextLeft - highlightCursorLeft);\n                    if (!width) {\n                        // when using left arrow on text.length > availableWidth;\n                        // assigns the width of the first letter after clipTextLeft\n                        width = context.measureText(text.charAt(text.length - this._cursorOffset)).width;\n                    }\n                    highlightCursorLeft = clipTextLeft;\n                }\n                //for transparancy\n                context.globalAlpha = this._highligherOpacity;\n                context.fillStyle = this._textHighlightColor;\n                context.fillRect(highlightCursorLeft, this._currentMeasure.top + (this._currentMeasure.height - this._fontOffset.height) / 2, width, this._fontOffset.height);\n                context.globalAlpha = 1.0;\n            }\n        }\n        context.restore();\n\n        // Border\n        if (this._thickness) {\n            if (this._isFocused) {\n                if (this.focusedColor) {\n                    context.strokeStyle = this.focusedColor;\n                }\n            } else {\n                if (this.color) {\n                    context.strokeStyle = this.color;\n                }\n            }\n\n            context.lineWidth = this._thickness;\n\n            context.strokeRect(this._currentMeasure.left + this._thickness / 2, this._currentMeasure.top + this._thickness / 2,\n                this._currentMeasure.width - this._thickness, this._currentMeasure.height - this._thickness);\n        }\n\n        context.restore();\n    }\n\n    public _onPointerDown(target: Control, coordinates: Vector2, pointerId: number, buttonIndex: number, pi: PointerInfoBase): boolean {\n        if (!super._onPointerDown(target, coordinates, pointerId, buttonIndex, pi)) {\n            return false;\n        }\n\n        this._clickedCoordinate = coordinates.x;\n        this._isTextHighlightOn = false;\n        this._highlightedText = \"\";\n        this._cursorIndex = -1;\n        this._isPointerDown = true;\n        this._host._capturingControl[pointerId] = this;\n        if (this._host.focusedControl === this) {\n            // Move cursor\n            clearTimeout(this._blinkTimeout);\n            this._markAsDirty();\n            return true;\n        }\n        if (!this._isEnabled) {\n            return false;\n        }\n        this._host.focusedControl = this;\n\n        return true;\n    }\n    public _onPointerMove(target: Control, coordinates: Vector2, pointerId: number, pi: PointerInfoBase): void {\n        if (this._host.focusedControl === this && this._isPointerDown) {\n            this._clickedCoordinate = coordinates.x;\n            this._markAsDirty();\n            this._updateValueFromCursorIndex(this._cursorOffset);\n        }\n        super._onPointerMove(target, coordinates, pointerId, pi);\n    }\n\n    public _onPointerUp(target: Control, coordinates: Vector2, pointerId: number, buttonIndex: number, notifyClick: boolean): void {\n\n        this._isPointerDown = false;\n        delete this._host._capturingControl[pointerId];\n        super._onPointerUp(target, coordinates, pointerId, buttonIndex, notifyClick);\n    }\n\n    protected _beforeRenderText(textWrapper: TextWrapper): TextWrapper {\n        return textWrapper;\n    }\n\n    public dispose() {\n        super.dispose();\n\n        this.onBlurObservable.clear();\n        this.onFocusObservable.clear();\n        this.onTextChangedObservable.clear();\n        this.onTextCopyObservable.clear();\n        this.onTextCutObservable.clear();\n        this.onTextPasteObservable.clear();\n        this.onTextHighlightObservable.clear();\n        this.onKeyboardEventProcessedObservable.clear();\n    }\n}\n_TypeStore.RegisteredTypes[\"BABYLON.GUI.InputText\"] = InputText;", "import { Nullable } from \"@babylonjs/core/types\";\r\n\r\nimport { Container } from \"./container\";\r\nimport { ValueAndUnit } from \"../valueAndUnit\";\r\nimport { Control } from \"./control\";\r\nimport { Measure } from \"../measure\";\r\nimport { Tools } from '@babylonjs/core/Misc/tools';\r\nimport { _TypeStore } from '@babylonjs/core/Misc/typeStore';\r\n\r\n/**\r\n * Class used to create a 2D grid container\r\n */\r\nexport class Grid extends Container {\r\n    private _rowDefinitions = new Array<ValueAndUnit>();\r\n    private _columnDefinitions = new Array<ValueAndUnit>();\r\n    private _cells: { [key: string]: Container } = {};\r\n    private _childControls = new Array<Control>();\r\n\r\n    /**\r\n     * Gets the number of columns\r\n     */\r\n    public get columnCount(): number {\r\n        return this._columnDefinitions.length;\r\n    }\r\n\r\n    /**\r\n     * Gets the number of rows\r\n     */\r\n    public get rowCount(): number {\r\n        return this._rowDefinitions.length;\r\n    }\r\n\r\n    /** Gets the list of children */\r\n    public get children(): Control[] {\r\n        return this._childControls;\r\n    }\r\n\r\n    /** Gets the list of cells (e.g. the containers) */\r\n    public get cells(): { [key: string]: Container } {\r\n        return this._cells;\r\n    }\r\n\r\n    /**\r\n     * Gets the definition of a specific row\r\n     * @param index defines the index of the row\r\n     * @returns the row definition\r\n     */\r\n    public getRowDefinition(index: number): Nullable<ValueAndUnit> {\r\n        if (index < 0 || index >= this._rowDefinitions.length) {\r\n            return null;\r\n        }\r\n\r\n        return this._rowDefinitions[index];\r\n    }\r\n\r\n    /**\r\n     * Gets the definition of a specific column\r\n     * @param index defines the index of the column\r\n     * @returns the column definition\r\n     */\r\n    public getColumnDefinition(index: number): Nullable<ValueAndUnit> {\r\n        if (index < 0 || index >= this._columnDefinitions.length) {\r\n            return null;\r\n        }\r\n\r\n        return this._columnDefinitions[index];\r\n    }\r\n\r\n    /**\r\n     * Adds a new row to the grid\r\n     * @param height defines the height of the row (either in pixel or a value between 0 and 1)\r\n     * @param isPixel defines if the height is expressed in pixel (or in percentage)\r\n     * @returns the current grid\r\n     */\r\n    public addRowDefinition(height: number, isPixel = false): Grid {\r\n        this._rowDefinitions.push(new ValueAndUnit(height, isPixel ? ValueAndUnit.UNITMODE_PIXEL : ValueAndUnit.UNITMODE_PERCENTAGE));\r\n\r\n        this._markAsDirty();\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Adds a new column to the grid\r\n     * @param width defines the width of the column (either in pixel or a value between 0 and 1)\r\n     * @param isPixel defines if the width is expressed in pixel (or in percentage)\r\n     * @returns the current grid\r\n     */\r\n    public addColumnDefinition(width: number, isPixel = false): Grid {\r\n        this._columnDefinitions.push(new ValueAndUnit(width, isPixel ? ValueAndUnit.UNITMODE_PIXEL : ValueAndUnit.UNITMODE_PERCENTAGE));\r\n\r\n        this._markAsDirty();\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Update a row definition\r\n     * @param index defines the index of the row to update\r\n     * @param height defines the height of the row (either in pixel or a value between 0 and 1)\r\n     * @param isPixel defines if the weight is expressed in pixel (or in percentage)\r\n     * @returns the current grid\r\n     */\r\n    public setRowDefinition(index: number, height: number, isPixel = false): Grid {\r\n        if (index < 0 || index >= this._rowDefinitions.length) {\r\n            return this;\r\n        }\r\n\r\n        let current = this._rowDefinitions[index];\r\n        if (current && current.isPixel === isPixel && current.internalValue === height) {\r\n            return this;\r\n        }\r\n\r\n        this._rowDefinitions[index] = new ValueAndUnit(height, isPixel ? ValueAndUnit.UNITMODE_PIXEL : ValueAndUnit.UNITMODE_PERCENTAGE);\r\n\r\n        this._markAsDirty();\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Update a column definition\r\n     * @param index defines the index of the column to update\r\n     * @param width defines the width of the column (either in pixel or a value between 0 and 1)\r\n     * @param isPixel defines if the width is expressed in pixel (or in percentage)\r\n     * @returns the current grid\r\n     */\r\n    public setColumnDefinition(index: number, width: number, isPixel = false): Grid {\r\n        if (index < 0 || index >= this._columnDefinitions.length) {\r\n            return this;\r\n        }\r\n\r\n        let current = this._columnDefinitions[index];\r\n        if (current && current.isPixel === isPixel && current.internalValue === width) {\r\n            return this;\r\n        }\r\n\r\n        this._columnDefinitions[index] = new ValueAndUnit(width, isPixel ? ValueAndUnit.UNITMODE_PIXEL : ValueAndUnit.UNITMODE_PERCENTAGE);\r\n\r\n        this._markAsDirty();\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Gets the list of children stored in a specific cell\r\n     * @param row defines the row to check\r\n     * @param column defines the column to check\r\n     * @returns the list of controls\r\n     */\r\n    public getChildrenAt(row: number, column: number): Nullable<Array<Control>> {\r\n        const cell = this._cells[`${row}:${column}`];\r\n\r\n        if (!cell) {\r\n            return null;\r\n        }\r\n\r\n        return cell.children;\r\n    }\r\n\r\n    /**\r\n     * Gets a string representing the child cell info (row x column)\r\n     * @param child defines the control to get info from\r\n     * @returns a string containing the child cell info (row x column)\r\n     */\r\n    public getChildCellInfo(child: Control): string {\r\n        return child._tag;\r\n    }\r\n\r\n    private _removeCell(cell: Container, key: string) {\r\n        if (!cell) {\r\n            return;\r\n        }\r\n\r\n        super.removeControl(cell);\r\n\r\n        for (var control of cell.children) {\r\n            let childIndex = this._childControls.indexOf(control);\r\n\r\n            if (childIndex !== -1) {\r\n                this._childControls.splice(childIndex, 1);\r\n            }\r\n        }\r\n\r\n        delete this._cells[key];\r\n    }\r\n\r\n    private _offsetCell(previousKey: string, key: string) {\r\n        if (!this._cells[key]) {\r\n            return;\r\n        }\r\n\r\n        this._cells[previousKey] = this._cells[key];\r\n\r\n        for (var control of this._cells[previousKey].children) {\r\n            control._tag = previousKey;\r\n        }\r\n\r\n        delete this._cells[key];\r\n    }\r\n\r\n    /**\r\n     * Remove a column definition at specified index\r\n     * @param index defines the index of the column to remove\r\n     * @returns the current grid\r\n     */\r\n    public removeColumnDefinition(index: number): Grid {\r\n        if (index < 0 || index >= this._columnDefinitions.length) {\r\n            return this;\r\n        }\r\n\r\n        for (var x = 0; x < this._rowDefinitions.length; x++) {\r\n            let key = `${x}:${index}`;\r\n            let cell = this._cells[key];\r\n\r\n            this._removeCell(cell, key);\r\n        }\r\n\r\n        for (var x = 0; x < this._rowDefinitions.length; x++) {\r\n            for (var y = index + 1; y < this._columnDefinitions.length; y++) {\r\n                let previousKey = `${x}:${y - 1}`;\r\n                let key = `${x}:${y}`;\r\n\r\n                this._offsetCell(previousKey, key);\r\n            }\r\n        }\r\n\r\n        this._columnDefinitions.splice(index, 1);\r\n\r\n        this._markAsDirty();\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Remove a row definition at specified index\r\n     * @param index defines the index of the row to remove\r\n     * @returns the current grid\r\n     */\r\n    public removeRowDefinition(index: number): Grid {\r\n        if (index < 0 || index >= this._rowDefinitions.length) {\r\n            return this;\r\n        }\r\n\r\n        for (var y = 0; y < this._columnDefinitions.length; y++) {\r\n            let key = `${index}:${y}`;\r\n            let cell = this._cells[key];\r\n\r\n            this._removeCell(cell, key);\r\n        }\r\n\r\n        for (var y = 0; y < this._columnDefinitions.length; y++) {\r\n            for (var x = index + 1; x < this._rowDefinitions.length; x++) {\r\n                let previousKey = `${x - 1}:${y}`;\r\n                let key = `${x}:${y}`;\r\n\r\n                this._offsetCell(previousKey, key);\r\n            }\r\n        }\r\n\r\n        this._rowDefinitions.splice(index, 1);\r\n\r\n        this._markAsDirty();\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Adds a new control to the current grid\r\n     * @param control defines the control to add\r\n     * @param row defines the row where to add the control (0 by default)\r\n     * @param column defines the column where to add the control (0 by default)\r\n     * @returns the current grid\r\n     */\r\n    public addControl(control: Control, row: number = 0, column: number = 0): Grid {\r\n        if (this._rowDefinitions.length === 0) {\r\n            // Add default row definition\r\n            this.addRowDefinition(1, false);\r\n        }\r\n\r\n        if (this._columnDefinitions.length === 0) {\r\n            // Add default column definition\r\n            this.addColumnDefinition(1, false);\r\n        }\r\n\r\n        if (this._childControls.indexOf(control) !== -1) {\r\n            Tools.Warn(`Control (Name:${control.name}, UniqueId:${control.uniqueId}) is already associated with this grid. You must remove it before reattaching it`);\r\n            return this;\r\n        }\r\n\r\n        let x = Math.min(row, this._rowDefinitions.length - 1);\r\n        let y = Math.min(column, this._columnDefinitions.length - 1);\r\n        let key = `${x}:${y}`;\r\n        let goodContainer = this._cells[key];\r\n\r\n        if (!goodContainer) {\r\n            goodContainer = new Container(key);\r\n            this._cells[key] = goodContainer;\r\n            goodContainer.horizontalAlignment = Control.HORIZONTAL_ALIGNMENT_LEFT;\r\n            goodContainer.verticalAlignment = Control.VERTICAL_ALIGNMENT_TOP;\r\n            super.addControl(goodContainer);\r\n        }\r\n\r\n        goodContainer.addControl(control);\r\n        this._childControls.push(control);\r\n        control._tag = key;\r\n        control.parent = this;\r\n\r\n        this._markAsDirty();\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Removes a control from the current container\r\n     * @param control defines the control to remove\r\n     * @returns the current container\r\n     */\r\n    public removeControl(control: Control): Container {\r\n        var index = this._childControls.indexOf(control);\r\n\r\n        if (index !== -1) {\r\n            this._childControls.splice(index, 1);\r\n        }\r\n\r\n        let cell = this._cells[control._tag];\r\n\r\n        if (cell) {\r\n            cell.removeControl(control);\r\n            control._tag = null;\r\n        }\r\n\r\n        this._markAsDirty();\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Creates a new Grid\r\n     * @param name defines control name\r\n     */\r\n    constructor(public name?: string) {\r\n        super(name);\r\n    }\r\n\r\n    protected _getTypeName(): string {\r\n        return \"Grid\";\r\n    }\r\n\r\n    protected _getGridDefinitions(definitionCallback: (lefts: number[], tops: number[], widths: number[], heights: number[]) => void) {\r\n        let widths = [];\r\n        let heights = [];\r\n        let lefts = [];\r\n        let tops = [];\r\n\r\n        let availableWidth = this._currentMeasure.width;\r\n        let globalWidthPercentage = 0;\r\n        let availableHeight = this._currentMeasure.height;\r\n        let globalHeightPercentage = 0;\r\n\r\n        // Heights\r\n        let index = 0;\r\n        for (var value of this._rowDefinitions) {\r\n            if (value.isPixel) {\r\n                let height = value.getValue(this._host);\r\n                availableHeight -= height;\r\n                heights[index] = height;\r\n            } else {\r\n                globalHeightPercentage += value.internalValue;\r\n            }\r\n            index++;\r\n        }\r\n\r\n        let top = 0;\r\n        index = 0;\r\n        for (var value of this._rowDefinitions) {\r\n            tops.push(top);\r\n\r\n            if (!value.isPixel) {\r\n                let height = (value.internalValue / globalHeightPercentage) * availableHeight;\r\n                top += height;\r\n                heights[index] = height;\r\n            } else {\r\n                top += value.getValue(this._host);\r\n            }\r\n            index++;\r\n        }\r\n\r\n        // Widths\r\n        index = 0;\r\n        for (var value of this._columnDefinitions) {\r\n            if (value.isPixel) {\r\n                let width = value.getValue(this._host);\r\n                availableWidth -= width;\r\n                widths[index] = width;\r\n            } else {\r\n                globalWidthPercentage += value.internalValue;\r\n            }\r\n            index++;\r\n        }\r\n\r\n        let left = 0;\r\n        index = 0;\r\n        for (var value of this._columnDefinitions) {\r\n            lefts.push(left);\r\n            if (!value.isPixel) {\r\n                let width = (value.internalValue / globalWidthPercentage) * availableWidth;\r\n                left += width;\r\n                widths[index] = width;\r\n            } else {\r\n                left += value.getValue(this._host);\r\n            }\r\n            index++;\r\n        }\r\n\r\n        definitionCallback(lefts, tops, widths, heights);\r\n    }\r\n\r\n    protected _additionalProcessing(parentMeasure: Measure, context: CanvasRenderingContext2D): void {\r\n        this._getGridDefinitions((lefts: number[], tops: number[], widths: number[], heights: number[]) => {\r\n            // Setting child sizes\r\n            for (var key in this._cells) {\r\n                if (!this._cells.hasOwnProperty(key)) {\r\n                    continue;\r\n                }\r\n                let split = key.split(\":\");\r\n                let x = parseInt(split[0]);\r\n                let y = parseInt(split[1]);\r\n                let cell = this._cells[key];\r\n\r\n                cell.left = lefts[y] + \"px\";\r\n                cell.top = tops[x] + \"px\";\r\n                cell.width = widths[y] + \"px\";\r\n                cell.height = heights[x] + \"px\";\r\n                cell._left.ignoreAdaptiveScaling = true;\r\n                cell._top.ignoreAdaptiveScaling = true;\r\n                cell._width.ignoreAdaptiveScaling = true;\r\n                cell._height.ignoreAdaptiveScaling = true;\r\n            }\r\n        });\r\n\r\n        super._additionalProcessing(parentMeasure, context);\r\n    }\r\n\r\n    public _flagDescendantsAsMatrixDirty(): void {\r\n        for (var key in this._cells) {\r\n            if (!this._cells.hasOwnProperty(key)) {\r\n                continue;\r\n            }\r\n\r\n            let child = this._cells[key];\r\n            child._markMatrixAsDirty();\r\n        }\r\n    }\r\n\r\n    public _renderHighlightSpecific(context: CanvasRenderingContext2D): void {\r\n        super._renderHighlightSpecific(context);\r\n\r\n        this._getGridDefinitions((lefts: number[], tops: number[], widths: number[], heights: number[]) => {\r\n\r\n            // Columns\r\n            for (var index = 0; index < lefts.length; index++) {\r\n                const left = this._currentMeasure.left + lefts[index] + widths[index];\r\n                context.beginPath();\r\n                context.moveTo(left, this._currentMeasure.top);\r\n                context.lineTo(left, this._currentMeasure.top + this._currentMeasure.height);\r\n                context.stroke();\r\n            }\r\n\r\n            // Rows\r\n            for (var index = 0; index < tops.length; index++) {\r\n                const top = this._currentMeasure.top + tops[index] + heights[index];\r\n                context.beginPath();\r\n                context.moveTo(this._currentMeasure.left, top);\r\n                context.lineTo(this._currentMeasure.left + this._currentMeasure.width, top);\r\n                context.stroke();\r\n            }\r\n        });\r\n\r\n        context.restore();\r\n    }\r\n\r\n    /** Releases associated resources */\r\n    public dispose() {\r\n        super.dispose();\r\n\r\n        for (var control of this._childControls) {\r\n            control.dispose();\r\n        }\r\n\r\n        this._childControls = [];\r\n    }\r\n}\r\n_TypeStore.RegisteredTypes[\"BABYLON.GUI.Grid\"] = Grid;", "import { Observable } from \"@babylonjs/core/Misc/observable\";\nimport { Vector2 } from \"@babylonjs/core/Maths/math.vector\";\n\nimport { Control } from \"./control\";\nimport { Measure } from \"../measure\";\nimport { InputText } from \"./inputText\";\nimport { Rectangle } from \"./rectangle\";\nimport { Button } from \"./button\";\nimport { Grid } from \"./grid\";\nimport { AdvancedDynamicTexture } from \"../advancedDynamicTexture\";\nimport { TextBlock } from \"../controls/textBlock\";\nimport { _TypeStore } from '@babylonjs/core/Misc/typeStore';\nimport { Color3 } from '@babylonjs/core/Maths/math.color';\nimport { PointerInfoBase } from '@babylonjs/core/Events/pointerEvents';\n\n/** Class used to create color pickers */\nexport class ColorPicker extends Control {\n    private static _Epsilon = 0.000001;\n    private _colorWheelCanvas: HTMLCanvasElement;\n\n    private _value: Color3 = Color3.Red();\n    private _tmpColor = new Color3();\n\n    private _pointerStartedOnSquare = false;\n    private _pointerStartedOnWheel = false;\n\n    private _squareLeft = 0;\n    private _squareTop = 0;\n    private _squareSize = 0;\n\n    private _h = 360;\n    private _s = 1;\n    private _v = 1;\n\n    private _lastPointerDownID = -1;\n\n    /**\n     * Observable raised when the value changes\n     */\n    public onValueChangedObservable = new Observable<Color3>();\n\n    /** Gets or sets the color of the color picker */\n    public get value(): Color3 {\n        return this._value;\n    }\n\n    public set value(value: Color3) {\n        if (this._value.equals(value)) {\n            return;\n        }\n\n        this._value.copyFrom(value);\n\n        this._value.toHSVToRef(this._tmpColor);\n\n        this._h = this._tmpColor.r;\n        this._s = Math.max(this._tmpColor.g, 0.00001);\n        this._v = Math.max(this._tmpColor.b, 0.00001);\n\n        this._markAsDirty();\n\n        if (this._value.r <= ColorPicker._Epsilon) {\n            this._value.r = 0;\n        }\n\n        if (this._value.g <= ColorPicker._Epsilon) {\n            this._value.g = 0;\n        }\n\n        if (this._value.b <= ColorPicker._Epsilon) {\n            this._value.b = 0;\n        }\n\n        if (this._value.r >= 1.0 - ColorPicker._Epsilon) {\n            this._value.r = 1.0;\n        }\n\n        if (this._value.g >= 1.0 - ColorPicker._Epsilon) {\n            this._value.g = 1.0;\n        }\n\n        if (this._value.b >= 1.0 - ColorPicker._Epsilon) {\n            this._value.b = 1.0;\n        }\n\n        this.onValueChangedObservable.notifyObservers(this._value);\n    }\n\n    /**\n     * Gets or sets control width\n     * @see https://doc.babylonjs.com/how_to/gui#position-and-size\n     */\n    public get width(): string | number {\n        return this._width.toString(this._host);\n    }\n\n    public set width(value: string | number) {\n        if (this._width.toString(this._host) === value) {\n            return;\n        }\n\n        if (this._width.fromString(value)) {\n            this._height.fromString(value);\n            this._markAsDirty();\n        }\n    }\n\n    /**\n     * Gets or sets control height\n     * @see https://doc.babylonjs.com/how_to/gui#position-and-size\n     */\n    public get height(): string | number {\n        return this._height.toString(this._host);\n    }\n\n    /** Gets or sets control height */\n    public set height(value: string | number) {\n        if (this._height.toString(this._host) === value) {\n            return;\n        }\n\n        if (this._height.fromString(value)) {\n            this._width.fromString(value);\n            this._markAsDirty();\n        }\n    }\n\n    /** Gets or sets control size */\n    public get size(): string | number {\n        return this.width;\n    }\n\n    public set size(value: string | number) {\n        this.width = value;\n    }\n\n    /**\n     * Creates a new ColorPicker\n     * @param name defines the control name\n     */\n    constructor(public name?: string) {\n        super(name);\n        this.value = new Color3(.88, .1, .1);\n        this.size = \"200px\";\n        this.isPointerBlocker = true;\n    }\n\n    protected _getTypeName(): string {\n        return \"ColorPicker\";\n    }\n\n    /** @hidden */\n    protected _preMeasure(parentMeasure: Measure, context: CanvasRenderingContext2D): void {\n\n        if (parentMeasure.width < parentMeasure.height) {\n            this._currentMeasure.height = parentMeasure.width;\n        } else {\n            this._currentMeasure.width = parentMeasure.height;\n        }\n    }\n\n    private _updateSquareProps(): void {\n        var radius = Math.min(this._currentMeasure.width, this._currentMeasure.height) * .5;\n        var wheelThickness = radius * .2;\n        var innerDiameter = (radius - wheelThickness) * 2;\n        var squareSize = innerDiameter / (Math.sqrt(2));\n        var offset = radius - squareSize * .5;\n\n        this._squareLeft = this._currentMeasure.left + offset;\n        this._squareTop = this._currentMeasure.top + offset;\n        this._squareSize = squareSize;\n    }\n\n    private _drawGradientSquare(hueValue: number, left: number, top: number, width: number, height: number, context: CanvasRenderingContext2D) {\n        var lgh = context.createLinearGradient(left, top, width + left, top);\n        lgh.addColorStop(0, '#fff');\n        lgh.addColorStop(1, 'hsl(' + hueValue + ', 100%, 50%)');\n\n        context.fillStyle = lgh;\n        context.fillRect(left, top, width, height);\n\n        var lgv = context.createLinearGradient(left, top, left, height + top);\n        lgv.addColorStop(0, 'rgba(0,0,0,0)');\n        lgv.addColorStop(1, '#000');\n\n        context.fillStyle = lgv;\n        context.fillRect(left, top, width, height);\n    }\n\n    private _drawCircle(centerX: number, centerY: number, radius: number, context: CanvasRenderingContext2D) {\n        context.beginPath();\n        context.arc(centerX, centerY, radius + 1, 0, 2 * Math.PI, false);\n        context.lineWidth = 3;\n        context.strokeStyle = '#333333';\n        context.stroke();\n        context.beginPath();\n        context.arc(centerX, centerY, radius, 0, 2 * Math.PI, false);\n        context.lineWidth = 3;\n        context.strokeStyle = '#ffffff';\n        context.stroke();\n    }\n\n    private _createColorWheelCanvas(radius: number, thickness: number): HTMLCanvasElement {\n        var canvas = document.createElement(\"canvas\");\n        canvas.width = radius * 2;\n        canvas.height = radius * 2;\n        var context = <CanvasRenderingContext2D>canvas.getContext(\"2d\");\n        var image = context.getImageData(0, 0, radius * 2, radius * 2);\n        var data = image.data;\n\n        var color = this._tmpColor;\n        var maxDistSq = radius * radius;\n        var innerRadius = radius - thickness;\n        var minDistSq = innerRadius * innerRadius;\n\n        for (var x = -radius; x < radius; x++) {\n            for (var y = -radius; y < radius; y++) {\n\n                var distSq = x * x + y * y;\n\n                if (distSq > maxDistSq || distSq < minDistSq) {\n                    continue;\n                }\n\n                var dist = Math.sqrt(distSq);\n                var ang = Math.atan2(y, x);\n\n                Color3.HSVtoRGBToRef(ang * 180 / Math.PI + 180, dist / radius, 1, color);\n\n                var index = ((x + radius) + ((y + radius) * 2 * radius)) * 4;\n\n                data[index] = color.r * 255;\n                data[index + 1] = color.g * 255;\n                data[index + 2] = color.b * 255;\n                var alphaRatio = (dist - innerRadius) / (radius - innerRadius);\n\n                //apply less alpha to bigger color pickers\n                var alphaAmount = .2;\n                var maxAlpha = .2;\n                var minAlpha = .04;\n                var lowerRadius = 50;\n                var upperRadius = 150;\n\n                if (radius < lowerRadius) {\n                    alphaAmount = maxAlpha;\n                } else if (radius > upperRadius) {\n                    alphaAmount = minAlpha;\n                } else {\n                    alphaAmount = (minAlpha - maxAlpha) * (radius - lowerRadius) / (upperRadius - lowerRadius) + maxAlpha;\n                }\n\n                var alphaRatio = (dist - innerRadius) / (radius - innerRadius);\n\n                if (alphaRatio < alphaAmount) {\n                    data[index + 3] = 255 * (alphaRatio / alphaAmount);\n                } else if (alphaRatio > 1 - alphaAmount) {\n                    data[index + 3] = 255 * (1.0 - ((alphaRatio - (1 - alphaAmount)) / alphaAmount));\n                } else {\n                    data[index + 3] = 255;\n                }\n\n            }\n        }\n\n        context.putImageData(image, 0, 0);\n\n        return canvas;\n    }\n\n    /** @hidden */\n    public _draw(context: CanvasRenderingContext2D): void {\n        context.save();\n\n        this._applyStates(context);\n\n        var radius = Math.min(this._currentMeasure.width, this._currentMeasure.height) * .5;\n        var wheelThickness = radius * .2;\n        var left = this._currentMeasure.left;\n        var top = this._currentMeasure.top;\n\n        if (!this._colorWheelCanvas || this._colorWheelCanvas.width != radius * 2) {\n            this._colorWheelCanvas = this._createColorWheelCanvas(radius, wheelThickness);\n        }\n\n        this._updateSquareProps();\n\n        if (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) {\n            context.shadowColor = this.shadowColor;\n            context.shadowBlur = this.shadowBlur;\n            context.shadowOffsetX = this.shadowOffsetX;\n            context.shadowOffsetY = this.shadowOffsetY;\n\n            context.fillRect(this._squareLeft, this._squareTop, this._squareSize, this._squareSize);\n        }\n\n        context.drawImage(this._colorWheelCanvas, left, top);\n\n        if (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) {\n            context.shadowBlur = 0;\n            context.shadowOffsetX = 0;\n            context.shadowOffsetY = 0;\n        }\n\n        this._drawGradientSquare(this._h,\n            this._squareLeft,\n            this._squareTop,\n            this._squareSize,\n            this._squareSize,\n            context);\n\n        var cx = this._squareLeft + this._squareSize * this._s;\n        var cy = this._squareTop + this._squareSize * (1 - this._v);\n\n        this._drawCircle(cx, cy, radius * .04, context);\n\n        var dist = radius - wheelThickness * .5;\n        cx = left + radius + Math.cos((this._h - 180) * Math.PI / 180) * dist;\n        cy = top + radius + Math.sin((this._h - 180) * Math.PI / 180) * dist;\n        this._drawCircle(cx, cy, wheelThickness * .35, context);\n\n        context.restore();\n    }\n\n    // Events\n    private _pointerIsDown = false;\n\n    private _updateValueFromPointer(x: number, y: number): void {\n        if (this._pointerStartedOnWheel) {\n            var radius = Math.min(this._currentMeasure.width, this._currentMeasure.height) * .5;\n            var centerX = radius + this._currentMeasure.left;\n            var centerY = radius + this._currentMeasure.top;\n            this._h = Math.atan2(y - centerY, x - centerX) * 180 / Math.PI + 180;\n        }\n        else if (this._pointerStartedOnSquare) {\n            this._updateSquareProps();\n            this._s = (x - this._squareLeft) / this._squareSize;\n            this._v = 1 - (y - this._squareTop) / this._squareSize;\n            this._s = Math.min(this._s, 1);\n            this._s = Math.max(this._s, ColorPicker._Epsilon);\n            this._v = Math.min(this._v, 1);\n            this._v = Math.max(this._v, ColorPicker._Epsilon);\n        }\n\n        Color3.HSVtoRGBToRef(this._h, this._s, this._v, this._tmpColor);\n\n        this.value = this._tmpColor;\n    }\n\n    private _isPointOnSquare(x: number, y: number): boolean {\n        this._updateSquareProps();\n\n        var left = this._squareLeft;\n        var top = this._squareTop;\n        var size = this._squareSize;\n\n        if (x >= left && x <= left + size &&\n            y >= top && y <= top + size) {\n            return true;\n        }\n\n        return false;\n    }\n\n    private _isPointOnWheel(x: number, y: number): boolean {\n        var radius = Math.min(this._currentMeasure.width, this._currentMeasure.height) * .5;\n        var centerX = radius + this._currentMeasure.left;\n        var centerY = radius + this._currentMeasure.top;\n        var wheelThickness = radius * .2;\n        var innerRadius = radius - wheelThickness;\n        var radiusSq = radius * radius;\n        var innerRadiusSq = innerRadius * innerRadius;\n\n        var dx = x - centerX;\n        var dy = y - centerY;\n\n        var distSq = dx * dx + dy * dy;\n\n        if (distSq <= radiusSq && distSq >= innerRadiusSq) {\n            return true;\n        }\n\n        return false;\n    }\n\n    public _onPointerDown(target: Control, coordinates: Vector2, pointerId: number, buttonIndex: number, pi: PointerInfoBase): boolean {\n        if (!super._onPointerDown(target, coordinates, pointerId, buttonIndex, pi)) {\n            return false;\n        }\n\n        this._pointerIsDown = true;\n\n        this._pointerStartedOnSquare = false;\n        this._pointerStartedOnWheel = false;\n\n        // Invert transform\n        this._invertTransformMatrix.transformCoordinates(coordinates.x, coordinates.y, this._transformedPosition);\n\n        let x = this._transformedPosition.x;\n        let y = this._transformedPosition.y;\n\n        if (this._isPointOnSquare(x, y)) {\n            this._pointerStartedOnSquare = true;\n        } else if (this._isPointOnWheel(x, y)) {\n            this._pointerStartedOnWheel = true;\n        }\n\n        this._updateValueFromPointer(x, y);\n        this._host._capturingControl[pointerId] = this;\n        this._lastPointerDownID = pointerId;\n        return true;\n    }\n\n    public _onPointerMove(target: Control, coordinates: Vector2, pointerId: number, pi: PointerInfoBase): void {\n        // Only listen to pointer move events coming from the last pointer to click on the element (To support dual vr controller interaction)\n        if (pointerId != this._lastPointerDownID) {\n            return;\n        }\n        // Invert transform\n        this._invertTransformMatrix.transformCoordinates(coordinates.x, coordinates.y, this._transformedPosition);\n\n        let x = this._transformedPosition.x;\n        let y = this._transformedPosition.y;\n\n        if (this._pointerIsDown) {\n            this._updateValueFromPointer(x, y);\n        }\n\n        super._onPointerMove(target, coordinates, pointerId, pi);\n    }\n\n    public _onPointerUp(target: Control, coordinates: Vector2, pointerId: number, buttonIndex: number, notifyClick: boolean, pi: PointerInfoBase): void {\n        this._pointerIsDown = false;\n\n        delete this._host._capturingControl[pointerId];\n        super._onPointerUp(target, coordinates, pointerId, buttonIndex, notifyClick, pi);\n    }\n\n    public _onCanvasBlur() {\n        this._forcePointerUp();\n        super._onCanvasBlur();\n    }\n\n    /**\n     * This function expands the color picker by creating a color picker dialog with manual\n     * color value input and the ability to save colors into an array to be used later in\n     * subsequent launches of the dialogue.\n     * @param advancedTexture defines the AdvancedDynamicTexture the dialog is assigned to\n     * @param options defines size for dialog and options for saved colors. Also accepts last color picked as hex string and saved colors array as hex strings.\n     * @returns picked color as a hex string and the saved colors array as hex strings.\n     */\n    public static ShowPickerDialogAsync(advancedTexture: AdvancedDynamicTexture,\n        options: {\n            pickerWidth?: string,\n            pickerHeight?: string,\n            headerHeight?: string,\n            lastColor?: string,\n            swatchLimit?: number,\n            numSwatchesPerLine?: number,\n            savedColors?: Array<string>\n        }\n    ): Promise<{\n        savedColors?: string[],\n        pickedColor: string\n    }> {\n\n        return new Promise((resolve, reject) => {\n            // Default options\n            options.pickerWidth = options.pickerWidth || \"640px\";\n            options.pickerHeight = options.pickerHeight || \"400px\";\n            options.headerHeight = options.headerHeight || \"35px\";\n            options.lastColor = options.lastColor || \"#000000\";\n            options.swatchLimit = options.swatchLimit || 20;\n            options.numSwatchesPerLine = options.numSwatchesPerLine || 10;\n\n            // Window size settings\n            var drawerMaxRows: number = options.swatchLimit / options.numSwatchesPerLine;\n            var rawSwatchSize: number = parseFloat(<string>options.pickerWidth) / options.numSwatchesPerLine;\n            var gutterSize: number = Math.floor(rawSwatchSize * 0.25);\n            var colGutters: number = gutterSize * (options.numSwatchesPerLine + 1);\n            var swatchSize: number = Math.floor((parseFloat(<string>options.pickerWidth) - colGutters) / options.numSwatchesPerLine);\n            var drawerMaxSize: number = (swatchSize * drawerMaxRows) + (gutterSize * (drawerMaxRows + 1));\n            var containerSize: string = (parseInt(options.pickerHeight) + drawerMaxSize + Math.floor(swatchSize * 0.25)).toString() + \"px\";\n\n            // Button Colors\n            var buttonColor: string = \"#c0c0c0\";\n            var buttonBackgroundColor: string = \"#535353\";\n            var buttonBackgroundHoverColor: string = \"#414141\";\n            var buttonBackgroundClickColor: string = \"515151\";\n            var buttonDisabledColor: string = \"#555555\";\n            var buttonDisabledBackgroundColor: string = \"#454545\";\n            var currentSwatchesOutlineColor: string = \"#404040\";\n            var luminanceLimitColor: Color3 = Color3.FromHexString(\"#dddddd\");\n            var luminanceLimit: number = luminanceLimitColor.r + luminanceLimitColor.g + luminanceLimitColor.b;\n            var iconColorDark: string = \"#aaaaaa\";\n            var iconColorLight: string = \"#ffffff\";\n            var closeIconColor: Color3;\n\n            // Button settings\n            var buttonFontSize: number;\n            var butEdit: Button;\n            var buttonWidth: string;\n            var buttonHeight: string;\n\n            // Input Text Colors\n            var inputFieldLabels: string[] = [\"R\", \"G\", \"B\"];\n            var inputTextBackgroundColor: string = \"#454545\";\n            var inputTextColor: string = \"#f0f0f0\";\n\n            // This is the current color as set by either the picker or by entering a value\n            var currentColor: Color3;\n\n            // This int is used for naming swatches and serves as the index for calling them from the list\n            var swatchNumber: number;\n\n            // Menu Panel options. We need to know if the swatchDrawer exists so we can create it if needed.\n            var swatchDrawer: Grid;\n            var editSwatchMode: boolean = false;\n\n            // Color InputText fields that will be updated upon value change\n            var picker: ColorPicker;\n            var rValInt: InputText;\n            var gValInt: InputText;\n            var bValInt: InputText;\n            var rValDec: InputText;\n            var gValDec: InputText;\n            var bValDec: InputText;\n            var hexVal: InputText;\n            var newSwatch: Rectangle;\n            var lastVal: string;\n            var activeField: string;\n\n            /**\n            * Will update all values for InputText and ColorPicker controls based on the BABYLON.Color3 passed to this function.\n            * Each InputText control and the ColorPicker control will be tested to see if they are the activeField and if they\n            * are will receive no update. This is to prevent the input from the user being overwritten.\n            */\n            function updateValues(value: Color3, inputField: string) {\n                activeField = inputField;\n                var pickedColor: string = value.toHexString();\n                newSwatch.background = pickedColor;\n                if (rValInt.name != activeField) {\n                    rValInt.text = Math.floor(value.r * 255).toString();\n                }\n                if (gValInt.name != activeField) {\n                    gValInt.text = Math.floor(value.g * 255).toString();\n                }\n                if (bValInt.name != activeField) {\n                    bValInt.text = Math.floor(value.b * 255).toString();\n                }\n                if (rValDec.name != activeField) {\n                    rValDec.text = value.r.toString();\n                }\n                if (gValDec.name != activeField) {\n                    gValDec.text = value.g.toString();\n                }\n                if (bValDec.name != activeField) {\n                    bValDec.text = value.b.toString();\n                }\n                if (hexVal.name != activeField) {\n                    var minusPound: string[] = pickedColor.split(\"#\");\n                    hexVal.text = minusPound[1];\n                }\n                if (picker.name != activeField) {\n                    picker.value = value;\n                }\n            }\n\n            // When the user enters an integer for R, G, or B we check to make sure it is a valid number and replace if not.\n            function updateInt(field: InputText, channel: string) {\n                var newValue: string = field.text;\n                var checkVal: boolean = /[^0-9]/g.test(newValue);\n                if (checkVal) {\n                    field.text = lastVal;\n                    return;\n                }\n                else {\n                    if (newValue != \"\") {\n                        if (Math.floor(parseInt(newValue)) < 0) {\n                            newValue = \"0\";\n                        }\n                        else if (Math.floor(parseInt(newValue)) > 255) {\n                            newValue = \"255\";\n                        }\n                        else if (isNaN(parseInt(newValue))) {\n                            newValue = \"0\";\n                        }\n                    }\n                    if (activeField == field.name) {\n                        lastVal = newValue;\n                    }\n                }\n                if (newValue != \"\") {\n                    newValue = parseInt(newValue).toString();\n                    field.text = newValue;\n                    var newSwatchRGB: Color3 = Color3.FromHexString(newSwatch.background);\n                    if (activeField == field.name) {\n                        if (channel == \"r\") {\n                            updateValues(new Color3((parseInt(newValue)) / 255, newSwatchRGB.g, newSwatchRGB.b), field.name);\n                        }\n                        else if (channel == \"g\") {\n                            updateValues(new Color3(newSwatchRGB.r, (parseInt(newValue)) / 255, newSwatchRGB.b), field.name);\n                        }\n                        else {\n                            updateValues(new Color3(newSwatchRGB.r, newSwatchRGB.g, (parseInt(newValue)) / 255), field.name);\n                        }\n                    }\n                }\n            }\n\n            // When the user enters a float for R, G, or B we check to make sure it is a valid number and replace if not.\n            function updateFloat(field: InputText, channel: string) {\n                var newValue: string = field.text;\n                var checkVal: boolean = /[^0-9\\.]/g.test(newValue);\n                if (checkVal) {\n                    field.text = lastVal;\n                    return;\n                }\n                else {\n                    if (newValue != \"\" && newValue != \".\" && parseFloat(newValue) != 0) {\n                        if (parseFloat(newValue) < 0.0) {\n                            newValue = \"0.0\";\n                        }\n                        else if (parseFloat(newValue) > 1.0) {\n                            newValue = \"1.0\";\n                        }\n                        else if (isNaN(parseFloat(newValue))) {\n                            newValue = \"0.0\";\n                        }\n                    }\n                    if (activeField == field.name) {\n                        lastVal = newValue;\n                    }\n                }\n                if (newValue != \"\" && newValue != \".\" && parseFloat(newValue) != 0) {\n                    newValue = parseFloat(newValue).toString();\n                    field.text = newValue;\n                }\n                else {\n                    newValue = \"0.0\";\n                }\n                var newSwatchRGB = Color3.FromHexString(newSwatch.background);\n                if (activeField == field.name) {\n                    if (channel == \"r\") {\n                        updateValues(new Color3(parseFloat(newValue), newSwatchRGB.g, newSwatchRGB.b), field.name);\n                    }\n                    else if (channel == \"g\") {\n                        updateValues(new Color3(newSwatchRGB.r, parseFloat(newValue), newSwatchRGB.b), field.name);\n                    }\n                    else {\n                        updateValues(new Color3(newSwatchRGB.r, newSwatchRGB.g, parseFloat(newValue)), field.name);\n                    }\n                }\n\n            }\n\n            // Removes the current index from the savedColors array. Drawer can then be regenerated.\n            function deleteSwatch(index: number) {\n                if (options.savedColors) {\n                    options.savedColors.splice(index, 1);\n                }\n                if (options.savedColors && options.savedColors.length == 0) {\n                    setEditButtonVisibility(false);\n                    editSwatchMode = false;\n                }\n            }\n\n            // Creates and styles an individual swatch when updateSwatches is called.\n            function createSwatch() {\n                if (options.savedColors && options.savedColors[swatchNumber]) {\n                    if (editSwatchMode) {\n                        var icon: string = \"b\";\n                    }\n                    else {\n                        var icon: string = \"\";\n                    }\n                    var swatch: Button = Button.CreateSimpleButton(\"Swatch_\" + swatchNumber, icon);\n                    swatch.fontFamily = \"BabylonJSglyphs\";\n                    var swatchColor: Color3 = Color3.FromHexString(options.savedColors[swatchNumber]);\n                    var swatchLuminence: number = swatchColor.r + swatchColor.g + swatchColor.b;\n\n                    // Set color of outline and textBlock based on luminance of the color swatch so feedback always visible\n                    if (swatchLuminence > luminanceLimit) {\n                        swatch.color = iconColorDark;\n                    }\n                    else {\n                        swatch.color = iconColorLight;\n                    }\n                    swatch.fontSize = Math.floor(swatchSize * 0.7);\n                    swatch.textBlock!.verticalAlignment = Control.VERTICAL_ALIGNMENT_CENTER;\n                    swatch.height = swatch.width = (swatchSize).toString() + \"px\";\n                    swatch.background = options.savedColors[swatchNumber];\n                    swatch.thickness = 2;\n                    let metadata = swatchNumber;\n                    swatch.pointerDownAnimation = () => {\n                        swatch.thickness = 4;\n                    };\n                    swatch.pointerUpAnimation = () => {\n                        swatch.thickness = 3;\n                    };\n                    swatch.pointerEnterAnimation = () => {\n                        swatch.thickness = 3;\n                    };\n                    swatch.pointerOutAnimation = () => {\n                        swatch.thickness = 2;\n                    };\n                    swatch.onPointerClickObservable.add(() => {\n                        if (!editSwatchMode) {\n                            if (options.savedColors) {\n                                updateValues(Color3.FromHexString(options.savedColors[metadata]), swatch.name!);\n                            }\n                        }\n                        else {\n                            deleteSwatch(metadata);\n                            updateSwatches(\"\", butSave);\n                        }\n                    });\n                    return swatch;\n                }\n                else {\n                    return null;\n                }\n            }\n\n            // Mode switch to render button text and close symbols on swatch controls\n            function editSwatches(mode?: boolean) {\n                if (mode !== undefined) {\n                    editSwatchMode = mode;\n                }\n                if (editSwatchMode) {\n                    for (var i = 0; i < swatchDrawer.children.length; i++) {\n                        var thisButton: Button = swatchDrawer.children[i] as Button;\n                        thisButton.textBlock!.text = \"b\";\n                    }\n                    if (butEdit !== undefined) {\n                        butEdit.textBlock!.text = \"Done\";\n                    }\n                }\n                else {\n                    for (var i = 0; i < swatchDrawer.children.length; i++) {\n                        var thisButton: Button = swatchDrawer.children[i] as Button;\n                        thisButton.textBlock!.text = \"\";\n                    }\n                    if (butEdit !== undefined) {\n                        butEdit.textBlock!.text = \"Edit\";\n                    }\n                }\n            }\n\n            /**\n             * When Save Color button is pressed this function will first create a swatch drawer if one is not already\n             * made. Then all controls are removed from the drawer and we step through the savedColors array and\n             * creates one swatch per color. It will also set the height of the drawer control based on how many\n             * saved colors there are and how many can be stored per row.\n             */\n            function updateSwatches(color: string, button: Button) {\n                if (options.savedColors) {\n\n                    if (color != \"\") {\n                        options.savedColors.push(color);\n                    }\n                    swatchNumber = 0;\n                    swatchDrawer.clearControls();\n                    var rowCount: number = Math.ceil(options.savedColors.length / options.numSwatchesPerLine!);\n                    if (rowCount == 0) {\n                        var gutterCount: number = 0;\n                    }\n                    else {\n                        var gutterCount: number = rowCount + 1;\n                    }\n                    if (swatchDrawer.rowCount != rowCount + gutterCount) {\n                        var currentRows: number = swatchDrawer.rowCount;\n                        for (var i = 0; i < currentRows; i++) {\n                            swatchDrawer.removeRowDefinition(0);\n                        }\n                        for (var i = 0; i < rowCount + gutterCount; i++) {\n                            if (i % 2) {\n                                swatchDrawer.addRowDefinition(swatchSize, true);\n                            }\n                            else {\n                                swatchDrawer.addRowDefinition(gutterSize, true);\n                            }\n                        }\n                    }\n                    swatchDrawer.height = ((swatchSize * rowCount) + (gutterCount * gutterSize)).toString() + \"px\";\n\n                    for (var y = 1, thisRow = 1; y < rowCount + gutterCount; y += 2, thisRow++) {\n\n                        // Determine number of buttons to create per row based on the button limit per row and number of saved colors\n                        if (options.savedColors.length > thisRow * options.numSwatchesPerLine!) {\n                            var totalButtonsThisRow = options.numSwatchesPerLine!;\n                        }\n                        else {\n                            var totalButtonsThisRow = options.savedColors.length - ((thisRow - 1) * options.numSwatchesPerLine!);\n                        }\n                        var buttonIterations: number = (Math.min(Math.max(totalButtonsThisRow, 0), options.numSwatchesPerLine!));\n                        for (var x = 0, w = 1; x < buttonIterations; x++) {\n                            if (x > options.numSwatchesPerLine!) {\n                                continue;\n                            }\n                            var swatch: Button | null = createSwatch();\n                            if (swatch != null) {\n                                swatchDrawer.addControl(swatch, y, w);\n                                w += 2;\n                                swatchNumber++;\n                            }\n                            else {\n                                continue;\n                            }\n                        }\n                    }\n                    if (options.savedColors.length >= options.swatchLimit!) {\n                        disableButton(button, true);\n                    }\n                    else {\n                        disableButton(button, false);\n                    }\n                }\n            }\n\n            // Shows or hides edit swatches button depending on if there are saved swatches\n            function setEditButtonVisibility(enableButton: boolean) {\n                if (enableButton) {\n                    butEdit = Button.CreateSimpleButton(\"butEdit\", \"Edit\");\n                    butEdit.width = buttonWidth;\n                    butEdit.height = buttonHeight;\n                    butEdit.left = (Math.floor(parseInt(buttonWidth) * 0.1)).toString() + \"px\";\n                    butEdit.top = (parseFloat(butEdit.left) * -1).toString() + \"px\";\n                    butEdit.verticalAlignment = Control.VERTICAL_ALIGNMENT_BOTTOM;\n                    butEdit.horizontalAlignment = Control.HORIZONTAL_ALIGNMENT_LEFT;\n                    butEdit.thickness = 2;\n                    butEdit.color = buttonColor;\n                    butEdit.fontSize = buttonFontSize;\n                    butEdit.background = buttonBackgroundColor;\n                    butEdit.onPointerEnterObservable.add(() => {\n                        butEdit.background = buttonBackgroundHoverColor;\n                    });\n                    butEdit.onPointerOutObservable.add(() => {\n                        butEdit.background = buttonBackgroundColor;\n                    });\n                    butEdit.pointerDownAnimation = () => {\n                        butEdit.background = buttonBackgroundClickColor;\n                    };\n                    butEdit.pointerUpAnimation = () => {\n                        butEdit.background = buttonBackgroundHoverColor;\n                    };\n                    butEdit.onPointerClickObservable.add(() => {\n                        if (editSwatchMode) {\n                            editSwatchMode = false;\n                        }\n                        else {\n                            editSwatchMode = true;\n                        }\n                        editSwatches();\n                    });\n                    pickerGrid.addControl(butEdit, 1, 0);\n                }\n                else {\n                    pickerGrid.removeControl(butEdit);\n                }\n            }\n\n            // Called when the user hits the limit of saved colors in the drawer.\n            function disableButton(button: Button, disabled: boolean) {\n                if (disabled) {\n                    button.color = buttonDisabledColor;\n                    button.background = buttonDisabledBackgroundColor;\n                }\n                else {\n                    button.color = buttonColor;\n                    button.background = buttonBackgroundColor;\n                }\n            }\n\n            // Passes last chosen color back to scene and kills dialog by removing from AdvancedDynamicTexture\n            function closePicker(color: string) {\n                if (options.savedColors && options.savedColors.length > 0) {\n                    resolve({\n                        savedColors: options.savedColors,\n                        pickedColor: color\n                    });\n                }\n                else {\n                    resolve({\n                        pickedColor: color\n                    });\n                }\n                advancedTexture.removeControl(dialogContainer);\n            }\n\n            // Dialogue menu container which will contain both the main dialogue window and the swatch drawer which opens once a color is saved.\n            var dialogContainer: Grid = new Grid();\n            dialogContainer.name = \"Dialog Container\";\n            dialogContainer.width = options.pickerWidth;\n            if (options.savedColors) {\n                dialogContainer.height = containerSize;\n                var topRow: number = parseInt(options.pickerHeight) / parseInt(containerSize);\n                dialogContainer.addRowDefinition(topRow, false);\n                dialogContainer.addRowDefinition(1.0 - topRow, false);\n            }\n            else {\n                dialogContainer.height = options.pickerHeight;\n                dialogContainer.addRowDefinition(1.0, false);\n            }\n            advancedTexture.addControl(dialogContainer);\n\n            // Swatch drawer which contains all saved color buttons\n            if (options.savedColors) {\n                swatchDrawer = new Grid();\n                swatchDrawer.name = \"Swatch Drawer\";\n                swatchDrawer.verticalAlignment = Control.VERTICAL_ALIGNMENT_TOP;\n                swatchDrawer.background = buttonBackgroundColor;\n                swatchDrawer.width = options.pickerWidth!;\n                var initialRows: number = options.savedColors.length / options.numSwatchesPerLine;\n                if (initialRows == 0) {\n                    var gutterCount: number = 0;\n                }\n                else {\n                    var gutterCount: number = initialRows + 1;\n                }\n                swatchDrawer.height = ((swatchSize * initialRows) + (gutterCount * gutterSize)).toString() + \"px\";\n                swatchDrawer.top = Math.floor(swatchSize * 0.25).toString() + \"px\";\n                for (var i = 0; i < (Math.ceil(options.savedColors.length / options.numSwatchesPerLine) * 2) + 1; i++) {\n                    if (i % 2 != 0) {\n                        swatchDrawer.addRowDefinition(swatchSize, true);\n                    }\n                    else {\n                        swatchDrawer.addRowDefinition(gutterSize, true);\n                    }\n                }\n                for (var i = 0; i < options.numSwatchesPerLine! * 2 + 1; i++) {\n                    if (i % 2 != 0) {\n                        swatchDrawer.addColumnDefinition(swatchSize, true);\n                    }\n                    else {\n                        swatchDrawer.addColumnDefinition(gutterSize, true);\n                    }\n                }\n                dialogContainer.addControl(swatchDrawer, 1, 0);\n            }\n\n            // Picker container\n            var pickerPanel: Grid = new Grid();\n            pickerPanel.name = \"Picker Panel\";\n            pickerPanel.height = options.pickerHeight;\n            var panelHead: number = parseInt(options.headerHeight) / parseInt(options.pickerHeight);\n            var pickerPanelRows: number[] = [panelHead, 1.0 - panelHead];\n            pickerPanel.addRowDefinition(pickerPanelRows[0], false);\n            pickerPanel.addRowDefinition(pickerPanelRows[1], false);\n            dialogContainer.addControl(pickerPanel, 0, 0);\n\n            // Picker container header\n            var header: Rectangle = new Rectangle();\n            header.name = \"Dialogue Header Bar\";\n            header.background = \"#cccccc\";\n            header.thickness = 0;\n            pickerPanel.addControl(header, 0, 0);\n\n            // Header close button\n            var closeButton: Button = Button.CreateSimpleButton(\"closeButton\", \"a\");\n            closeButton.fontFamily = \"BabylonJSglyphs\";\n            var headerColor3: Color3 = Color3.FromHexString(header.background);\n            closeIconColor = new Color3(1.0 - headerColor3.r, 1.0 - headerColor3.g, 1.0 - headerColor3.b);\n            closeButton.color = closeIconColor.toHexString();\n            closeButton.fontSize = Math.floor(parseInt(options.headerHeight!) * 0.6);\n            closeButton.textBlock!.textVerticalAlignment = Control.VERTICAL_ALIGNMENT_CENTER;\n            closeButton.horizontalAlignment = Control.HORIZONTAL_ALIGNMENT_RIGHT;\n            closeButton.height = closeButton.width = options.headerHeight;\n            closeButton.background = header.background;\n            closeButton.thickness = 0;\n            closeButton.pointerDownAnimation = () => {\n            };\n            closeButton.pointerUpAnimation = () => {\n                closeButton.background = header.background;\n            };\n            closeButton.pointerEnterAnimation = () => {\n                closeButton.color = header.background;\n                closeButton.background = \"red\";\n            };\n            closeButton.pointerOutAnimation = () => {\n                closeButton.color = closeIconColor.toHexString();\n                closeButton.background = header.background;\n            };\n            closeButton.onPointerClickObservable.add(() => {\n                closePicker(currentSwatch.background);\n            });\n            pickerPanel.addControl(closeButton, 0, 0);\n\n            // Dialog container body\n            var dialogBody: Grid = new Grid();\n            dialogBody.name = \"Dialogue Body\";\n            dialogBody.background = buttonBackgroundColor;\n            var dialogBodyCols: number[] = [0.4375, 0.5625];\n            dialogBody.addRowDefinition(1.0, false);\n            dialogBody.addColumnDefinition(dialogBodyCols[0], false);\n            dialogBody.addColumnDefinition(dialogBodyCols[1], false);\n            pickerPanel.addControl(dialogBody, 1, 0);\n\n            // Picker grid\n            var pickerGrid: Grid = new Grid();\n            pickerGrid.name = \"Picker Grid\";\n            pickerGrid.addRowDefinition(0.85, false);\n            pickerGrid.addRowDefinition(0.15, false);\n            dialogBody.addControl(pickerGrid, 0, 0);\n\n            //  Picker control\n            picker = new ColorPicker();\n            picker.name = \"GUI Color Picker\";\n            if (options.pickerHeight < options.pickerWidth) {\n                picker.width = 0.89;\n            }\n            else {\n                picker.height = 0.89;\n            }\n            picker.value = Color3.FromHexString(options.lastColor);\n            picker.horizontalAlignment = Control.HORIZONTAL_ALIGNMENT_CENTER;\n            picker.verticalAlignment = Control.VERTICAL_ALIGNMENT_CENTER;\n            picker.onPointerDownObservable.add(() => {\n                activeField = picker.name!;\n                lastVal = \"\";\n                editSwatches(false);\n            });\n            picker.onValueChangedObservable.add(function(value) { // value is a color3\n                if (activeField == picker.name) {\n                    updateValues(value, picker.name);\n                }\n            });\n            pickerGrid.addControl(picker, 0, 0);\n\n            // Picker body right quarant\n            var pickerBodyRight: Grid = new Grid();\n            pickerBodyRight.name = \"Dialogue Right Half\";\n            pickerBodyRight.horizontalAlignment = Control.HORIZONTAL_ALIGNMENT_LEFT;\n            var pickerBodyRightRows: number[] = [0.514, 0.486];\n            pickerBodyRight.addRowDefinition(pickerBodyRightRows[0], false);\n            pickerBodyRight.addRowDefinition(pickerBodyRightRows[1], false);\n            dialogBody.addControl(pickerBodyRight, 1, 1);\n\n            // Picker container swatches and buttons\n            var pickerSwatchesButtons: Grid = new Grid();\n            pickerSwatchesButtons.name = \"Swatches and Buttons\";\n            var pickerButtonsCol: number[] = [0.417, 0.583];\n            pickerSwatchesButtons.addRowDefinition(1.0, false);\n            pickerSwatchesButtons.addColumnDefinition(pickerButtonsCol[0], false);\n            pickerSwatchesButtons.addColumnDefinition(pickerButtonsCol[1], false);\n            pickerBodyRight.addControl(pickerSwatchesButtons, 0, 0);\n\n            // Picker Swatches quadrant\n            var pickerSwatches: Grid = new Grid();\n            pickerSwatches.name = \"New and Current Swatches\";\n            var pickeSwatchesRows: number[] = [0.04, 0.16, 0.64, 0.16];\n            pickerSwatches.addRowDefinition(pickeSwatchesRows[0], false);\n            pickerSwatches.addRowDefinition(pickeSwatchesRows[1], false);\n            pickerSwatches.addRowDefinition(pickeSwatchesRows[2], false);\n            pickerSwatches.addRowDefinition(pickeSwatchesRows[3], false);\n            pickerSwatchesButtons.addControl(pickerSwatches, 0, 0);\n\n            // Active swatches\n            var activeSwatches: Grid = new Grid();\n            activeSwatches.name = \"Active Swatches\";\n            activeSwatches.width = 0.67;\n            activeSwatches.addRowDefinition(0.5, false);\n            activeSwatches.addRowDefinition(0.5, false);\n            pickerSwatches.addControl(activeSwatches, 2, 0);\n\n            var labelWidth: number = (Math.floor(parseInt(options.pickerWidth) * dialogBodyCols[1] * pickerButtonsCol[0] * 0.11));\n            var labelHeight: number = (Math.floor(parseInt(options.pickerHeight) * pickerPanelRows[1] * pickerBodyRightRows[0] * pickeSwatchesRows[1] * 0.5));\n\n            if (options.pickerWidth > options.pickerHeight) {\n                var labelTextSize: number = labelHeight;\n            }\n            else {\n                var labelTextSize: number = labelWidth;\n            }\n            // New color swatch and previous color button\n            var newText: TextBlock = new TextBlock();\n            newText.text = \"new\";\n            newText.name = \"New Color Label\";\n            newText.color = buttonColor;\n            newText.fontSize = labelTextSize;\n            pickerSwatches.addControl(newText, 1, 0);\n\n            newSwatch = new Rectangle();\n            newSwatch.name = \"New Color Swatch\";\n            newSwatch.background = options.lastColor;\n            newSwatch.thickness = 0;\n            activeSwatches.addControl(newSwatch, 0, 0);\n\n            var currentSwatch: Button = Button.CreateSimpleButton(\"currentSwatch\", \"\");\n            currentSwatch.background = options.lastColor;\n            currentSwatch.thickness = 0;\n            currentSwatch.onPointerClickObservable.add(() => {\n                var revertColor = Color3.FromHexString(currentSwatch.background);\n                updateValues(revertColor, currentSwatch.name!);\n                editSwatches(false);\n            });\n            currentSwatch.pointerDownAnimation = () => { };\n            currentSwatch.pointerUpAnimation = () => { };\n            currentSwatch.pointerEnterAnimation = () => { };\n            currentSwatch.pointerOutAnimation = () => { };\n            activeSwatches.addControl(currentSwatch, 1, 0);\n\n            var swatchOutline: Rectangle = new Rectangle();\n            swatchOutline.name = \"Swatch Outline\";\n            swatchOutline.width = 0.67;\n            swatchOutline.thickness = 2;\n            swatchOutline.color = currentSwatchesOutlineColor;\n            swatchOutline.isHitTestVisible = false;\n            pickerSwatches.addControl(swatchOutline, 2, 0);\n\n            var currentText: TextBlock = new TextBlock();\n            currentText.name = \"Current Color Label\";\n            currentText.text = \"current\";\n            currentText.color = buttonColor;\n            currentText.fontSize = labelTextSize;\n            pickerSwatches.addControl(currentText, 3, 0);\n\n            // Buttons grid\n            var buttonGrid: Grid = new Grid();\n            buttonGrid.name = \"Button Grid\";\n            buttonGrid.height = 0.8;\n            var buttonGridRows: number = 1 / 3;\n            buttonGrid.addRowDefinition(buttonGridRows, false);\n            buttonGrid.addRowDefinition(buttonGridRows, false);\n            buttonGrid.addRowDefinition(buttonGridRows, false);\n            pickerSwatchesButtons.addControl(buttonGrid, 0, 1);\n\n            // Determine pixel width and height for all buttons from overall panel dimensions\n            buttonWidth = (Math.floor(parseInt(options.pickerWidth) * dialogBodyCols[1] * pickerButtonsCol[1] * 0.67)).toString() + \"px\";\n            buttonHeight = (Math.floor(parseInt(options.pickerHeight) * pickerPanelRows[1] * pickerBodyRightRows[0] * (parseFloat(buttonGrid.height.toString()) / 100) * buttonGridRows * 0.7)).toString() + \"px\";\n\n            // Determine button type size\n            if (parseFloat(buttonWidth) > parseFloat(buttonHeight)) {\n                buttonFontSize = Math.floor(parseFloat(buttonHeight) * 0.45);\n            }\n            else {\n                buttonFontSize = Math.floor(parseFloat(buttonWidth) * 0.11);\n            }\n\n            // Panel Buttons\n            var butOK: Button = Button.CreateSimpleButton(\"butOK\", \"OK\");\n            butOK.width = buttonWidth;\n            butOK.height = buttonHeight;\n            butOK.verticalAlignment = Control.VERTICAL_ALIGNMENT_CENTER;\n            butOK.thickness = 2;\n            butOK.color = buttonColor;\n            butOK.fontSize = buttonFontSize;\n            butOK.background = buttonBackgroundColor;\n            butOK.onPointerEnterObservable.add(() => { butOK.background = buttonBackgroundHoverColor; });\n            butOK.onPointerOutObservable.add(() => { butOK.background = buttonBackgroundColor; });\n            butOK.pointerDownAnimation = () => {\n                butOK.background = buttonBackgroundClickColor;\n            };\n            butOK.pointerUpAnimation = () => {\n                butOK.background = buttonBackgroundHoverColor;\n            };\n            butOK.onPointerClickObservable.add(() => {\n                editSwatches(false);\n                closePicker(newSwatch.background);\n            });\n            buttonGrid.addControl(butOK, 0, 0);\n\n            var butCancel: Button = Button.CreateSimpleButton(\"butCancel\", \"Cancel\");\n            butCancel.width = buttonWidth;\n            butCancel.height = buttonHeight;\n            butCancel.verticalAlignment = Control.VERTICAL_ALIGNMENT_CENTER;\n            butCancel.thickness = 2;\n            butCancel.color = buttonColor;\n            butCancel.fontSize = buttonFontSize;\n            butCancel.background = buttonBackgroundColor;\n            butCancel.onPointerEnterObservable.add(() => { butCancel.background = buttonBackgroundHoverColor; });\n            butCancel.onPointerOutObservable.add(() => { butCancel.background = buttonBackgroundColor; });\n            butCancel.pointerDownAnimation = () => {\n                butCancel.background = buttonBackgroundClickColor;\n            };\n            butCancel.pointerUpAnimation = () => {\n                butCancel.background = buttonBackgroundHoverColor;\n            };\n            butCancel.onPointerClickObservable.add(() => {\n                editSwatches(false);\n                closePicker(currentSwatch.background);\n            });\n            buttonGrid.addControl(butCancel, 1, 0);\n\n            if (options.savedColors) {\n                var butSave: Button = Button.CreateSimpleButton(\"butSave\", \"Save\");\n                butSave.width = buttonWidth;\n                butSave.height = buttonHeight;\n                butSave.verticalAlignment = Control.VERTICAL_ALIGNMENT_CENTER;\n                butSave.thickness = 2;\n                butSave.fontSize = buttonFontSize;\n                if (options.savedColors.length < options.swatchLimit!) {\n                    butSave.color = buttonColor;\n                    butSave.background = buttonBackgroundColor;\n                }\n                else {\n                    disableButton(butSave, true);\n                }\n                butSave.onPointerEnterObservable.add(() => {\n                    if (options.savedColors) {\n                        if (options.savedColors.length < options.swatchLimit!) {\n                            butSave.background = buttonBackgroundHoverColor;\n                        }\n                    }\n                });\n                butSave.onPointerOutObservable.add(() => {\n                    if (options.savedColors) {\n                        if (options.savedColors.length < options.swatchLimit!) {\n                            butSave.background = buttonBackgroundColor;\n                        }\n                    }\n                });\n                butSave.pointerDownAnimation = () => {\n                    if (options.savedColors) {\n                        if (options.savedColors.length < options.swatchLimit!) {\n                            butSave.background = buttonBackgroundClickColor;\n                        }\n                    }\n                };\n                butSave.pointerUpAnimation = () => {\n                    if (options.savedColors) {\n                        if (options.savedColors.length < options.swatchLimit!) {\n                            butSave.background = buttonBackgroundHoverColor;\n                        }\n                    }\n                };\n                butSave.onPointerClickObservable.add(() => {\n                    if (options.savedColors) {\n                        if (options.savedColors.length == 0) {\n                            setEditButtonVisibility(true);\n                        }\n                        if (options.savedColors.length < options.swatchLimit!) {\n                            updateSwatches(newSwatch.background, butSave);\n                        }\n                        editSwatches(false);\n                    }\n                });\n                if (options.savedColors.length > 0) {\n                    setEditButtonVisibility(true);\n                }\n                buttonGrid.addControl(butSave, 2, 0);\n            }\n\n            // Picker color values input\n            var pickerColorValues: Grid = new Grid();\n            pickerColorValues.name = \"Dialog Lower Right\";\n            pickerColorValues.addRowDefinition(0.02, false);\n            pickerColorValues.addRowDefinition(0.63, false);\n            pickerColorValues.addRowDefinition(0.21, false);\n            pickerColorValues.addRowDefinition(0.14, false);\n            pickerBodyRight.addControl(pickerColorValues, 1, 0);\n\n            // RGB values text boxes\n            currentColor = Color3.FromHexString(options.lastColor);\n            var rgbValuesQuadrant: Grid = new Grid();\n            rgbValuesQuadrant.name = \"RGB Values\";\n            rgbValuesQuadrant.width = 0.82;\n            rgbValuesQuadrant.verticalAlignment = Control.VERTICAL_ALIGNMENT_CENTER;\n            rgbValuesQuadrant.addRowDefinition(1 / 3, false);\n            rgbValuesQuadrant.addRowDefinition(1 / 3, false);\n            rgbValuesQuadrant.addRowDefinition(1 / 3, false);\n            rgbValuesQuadrant.addColumnDefinition(0.1, false);\n            rgbValuesQuadrant.addColumnDefinition(0.2, false);\n            rgbValuesQuadrant.addColumnDefinition(0.7, false);\n            pickerColorValues.addControl(rgbValuesQuadrant, 1, 0);\n\n            for (var i = 0; i < inputFieldLabels.length; i++) {\n                var labelText: TextBlock = new TextBlock();\n                labelText.text = inputFieldLabels[i];\n                labelText.color = buttonColor;\n                labelText.fontSize = buttonFontSize;\n                rgbValuesQuadrant.addControl(labelText, i, 0);\n            }\n\n            // Input fields for RGB values\n            rValInt = new InputText();\n            rValInt.width = 0.83;\n            rValInt.height = 0.72;\n            rValInt.name = \"rIntField\";\n            rValInt.fontSize = buttonFontSize;\n            rValInt.text = (currentColor.r * 255).toString();\n            rValInt.color = inputTextColor;\n            rValInt.background = inputTextBackgroundColor;\n            rValInt.onFocusObservable.add(() => {\n                activeField = rValInt.name!;\n                lastVal = rValInt.text;\n                editSwatches(false);\n            });\n            rValInt.onBlurObservable.add(() => {\n                if (rValInt.text == \"\") {\n                    rValInt.text = \"0\";\n                }\n                updateInt(rValInt, \"r\");\n                if (activeField == rValInt.name) {\n                    activeField = \"\";\n                }\n            });\n            rValInt.onTextChangedObservable.add(() => {\n                if (activeField == rValInt.name) {\n                    updateInt(rValInt, \"r\");\n                }\n            });\n            rgbValuesQuadrant.addControl(rValInt, 0, 1);\n\n            gValInt = new InputText();\n            gValInt.width = 0.83;\n            gValInt.height = 0.72;\n            gValInt.name = \"gIntField\";\n            gValInt.fontSize = buttonFontSize;\n            gValInt.text = (currentColor.g * 255).toString();\n            gValInt.color = inputTextColor;\n            gValInt.background = inputTextBackgroundColor;\n            gValInt.onFocusObservable.add(() => {\n                activeField = gValInt.name!;\n                lastVal = gValInt.text;\n                editSwatches(false);\n            });\n            gValInt.onBlurObservable.add(() => {\n                if (gValInt.text == \"\") {\n                    gValInt.text = \"0\";\n                }\n                updateInt(gValInt, \"g\");\n                if (activeField == gValInt.name) {\n                    activeField = \"\";\n                }\n            });\n            gValInt.onTextChangedObservable.add(() => {\n                if (activeField == gValInt.name) {\n                    updateInt(gValInt, \"g\");\n                }\n            });\n            rgbValuesQuadrant.addControl(gValInt, 1, 1);\n\n            bValInt = new InputText();\n            bValInt.width = 0.83;\n            bValInt.height = 0.72;\n            bValInt.name = \"bIntField\";\n            bValInt.fontSize = buttonFontSize;\n            bValInt.text = (currentColor.b * 255).toString();\n            bValInt.color = inputTextColor;\n            bValInt.background = inputTextBackgroundColor;\n            bValInt.onFocusObservable.add(() => {\n                activeField = bValInt.name!;\n                lastVal = bValInt.text;\n                editSwatches(false);\n            });\n            bValInt.onBlurObservable.add(() => {\n                if (bValInt.text == \"\") {\n                    bValInt.text = \"0\";\n                }\n                updateInt(bValInt, \"b\");\n                if (activeField == bValInt.name) {\n                    activeField = \"\";\n                }\n            });\n            bValInt.onTextChangedObservable.add(() => {\n                if (activeField == bValInt.name) {\n                    updateInt(bValInt, \"b\");\n                }\n            });\n            rgbValuesQuadrant.addControl(bValInt, 2, 1);\n\n            rValDec = new InputText();\n            rValDec.width = 0.95;\n            rValDec.height = 0.72;\n            rValDec.name = \"rDecField\";\n            rValDec.fontSize = buttonFontSize;\n            rValDec.text = currentColor.r.toString();\n            rValDec.color = inputTextColor;\n            rValDec.background = inputTextBackgroundColor;\n            rValDec.onFocusObservable.add(() => {\n                activeField = rValDec.name!;\n                lastVal = rValDec.text;\n                editSwatches(false);\n            });\n            rValDec.onBlurObservable.add(() => {\n                if (parseFloat(rValDec.text) == 0 || rValDec.text == \"\") {\n                    rValDec.text = \"0\";\n                    updateFloat(rValDec, \"r\");\n                }\n                if (activeField == rValDec.name) {\n                    activeField = \"\";\n                }\n            });\n            rValDec.onTextChangedObservable.add(() => {\n                if (activeField == rValDec.name) {\n                    updateFloat(rValDec, \"r\");\n                }\n            });\n            rgbValuesQuadrant.addControl(rValDec, 0, 2);\n\n            gValDec = new InputText();\n            gValDec.width = 0.95;\n            gValDec.height = 0.72;\n            gValDec.name = \"gDecField\";\n            gValDec.fontSize = buttonFontSize;\n            gValDec.text = currentColor.g.toString();\n            gValDec.color = inputTextColor;\n            gValDec.background = inputTextBackgroundColor;\n            gValDec.onFocusObservable.add(() => {\n                activeField = gValDec.name!;\n                lastVal = gValDec.text;\n                editSwatches(false);\n            });\n            gValDec.onBlurObservable.add(() => {\n                if (parseFloat(gValDec.text) == 0 || gValDec.text == \"\") {\n                    gValDec.text = \"0\";\n                    updateFloat(gValDec, \"g\");\n                }\n                if (activeField == gValDec.name) {\n                    activeField = \"\";\n                }\n            });\n            gValDec.onTextChangedObservable.add(() => {\n                if (activeField == gValDec.name) {\n                    updateFloat(gValDec, \"g\");\n                }\n            });\n            rgbValuesQuadrant.addControl(gValDec, 1, 2);\n\n            bValDec = new InputText();\n            bValDec.width = 0.95;\n            bValDec.height = 0.72;\n            bValDec.name = \"bDecField\";\n            bValDec.fontSize = buttonFontSize;\n            bValDec.text = currentColor.b.toString();\n            bValDec.color = inputTextColor;\n            bValDec.background = inputTextBackgroundColor;\n            bValDec.onFocusObservable.add(() => {\n                activeField = bValDec.name!;\n                lastVal = bValDec.text;\n                editSwatches(false);\n            });\n            bValDec.onBlurObservable.add(() => {\n                if (parseFloat(bValDec.text) == 0 || bValDec.text == \"\") {\n                    bValDec.text = \"0\";\n                    updateFloat(bValDec, \"b\");\n                }\n                if (activeField == bValDec.name) {\n                    activeField = \"\";\n                }\n            });\n            bValDec.onTextChangedObservable.add(() => {\n                if (activeField == bValDec.name) {\n                    updateFloat(bValDec, \"b\");\n                }\n            });\n            rgbValuesQuadrant.addControl(bValDec, 2, 2);\n\n            // Hex value input\n            var hexValueQuadrant: Grid = new Grid();\n            hexValueQuadrant.name = \"Hex Value\";\n            hexValueQuadrant.width = 0.82;\n            hexValueQuadrant.addRowDefinition(1.0, false);\n            hexValueQuadrant.addColumnDefinition(0.1, false);\n            hexValueQuadrant.addColumnDefinition(0.9, false);\n            pickerColorValues.addControl(hexValueQuadrant, 2, 0);\n\n            var labelText: TextBlock = new TextBlock();\n            labelText.text = \"#\";\n            labelText.color = buttonColor;\n            labelText.fontSize = buttonFontSize;\n            hexValueQuadrant.addControl(labelText, 0, 0);\n\n            hexVal = new InputText();\n            hexVal.width = 0.96;\n            hexVal.height = 0.72;\n            hexVal.name = \"hexField\";\n            hexVal.horizontalAlignment = Control.HORIZONTAL_ALIGNMENT_CENTER;\n            hexVal.fontSize = buttonFontSize;\n            var minusPound = options.lastColor.split(\"#\");\n            hexVal.text = minusPound[1];\n            hexVal.color = inputTextColor;\n            hexVal.background = inputTextBackgroundColor;\n            hexVal.onFocusObservable.add(() => {\n                activeField = hexVal.name!;\n                lastVal = hexVal.text;\n                editSwatches(false);\n            });\n            hexVal.onBlurObservable.add(() => {\n                if (hexVal.text.length == 3) {\n                    var val = hexVal.text.split(\"\");\n                    hexVal.text = val[0] + val[0] + val[1] + val[1] + val[2] + val[2];\n                }\n                if (hexVal.text == \"\") {\n                    hexVal.text = \"000000\";\n                    updateValues(Color3.FromHexString(hexVal.text), \"b\");\n                }\n                if (activeField == hexVal.name) {\n                    activeField = \"\";\n                }\n            });\n            hexVal.onTextChangedObservable.add(() => {\n                var newHexValue: string = hexVal.text;\n                var checkHex: boolean = /[^0-9A-F]/i.test(newHexValue);\n                if ((hexVal.text.length > 6 || checkHex) && activeField == hexVal.name) {\n                    hexVal.text = lastVal;\n                }\n                else {\n                    if (hexVal.text.length < 6) {\n                        var leadingZero: Number = 6 - hexVal.text.length;\n                        for (var i = 0; i < leadingZero; i++) {\n                            newHexValue = \"0\" + newHexValue;\n                        }\n                    }\n                    if (hexVal.text.length == 3) {\n                        var val: string[] = hexVal.text.split(\"\");\n                        newHexValue = val[0] + val[0] + val[1] + val[1] + val[2] + val[2];\n                    }\n                    newHexValue = \"#\" + newHexValue;\n                    if (activeField == hexVal.name) {\n                        lastVal = hexVal.text;\n                        updateValues(Color3.FromHexString(newHexValue), hexVal.name);\n                    }\n                }\n            });\n            hexValueQuadrant.addControl(hexVal, 0, 1);\n\n            if (options.savedColors && options.savedColors.length > 0) {\n                updateSwatches(\"\", butSave!);\n            }\n        });\n    }\n}\n_TypeStore.RegisteredTypes[\"BABYLON.GUI.ColorPicker\"] = ColorPicker;", "import { Container } from \"./container\";\r\nimport { Control } from \"./control\";\r\nimport { Measure } from \"../measure\";\r\nimport { _TypeStore } from '@babylonjs/core/Misc/typeStore';\r\n\r\n/** Class used to create 2D ellipse containers */\r\nexport class Ellipse extends Container {\r\n    private _thickness = 1;\r\n\r\n    /** Gets or sets border thickness */\r\n    public get thickness(): number {\r\n        return this._thickness;\r\n    }\r\n\r\n    public set thickness(value: number) {\r\n        if (this._thickness === value) {\r\n            return;\r\n        }\r\n\r\n        this._thickness = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Creates a new Ellipse\r\n     * @param name defines the control name\r\n     */\r\n    constructor(public name?: string) {\r\n        super(name);\r\n    }\r\n\r\n    protected _getTypeName(): string {\r\n        return \"Ellipse\";\r\n    }\r\n\r\n    protected _localDraw(context: CanvasRenderingContext2D): void {\r\n        context.save();\r\n\r\n        if (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) {\r\n            context.shadowColor = this.shadowColor;\r\n            context.shadowBlur = this.shadowBlur;\r\n            context.shadowOffsetX = this.shadowOffsetX;\r\n            context.shadowOffsetY = this.shadowOffsetY;\r\n        }\r\n\r\n        Control.drawEllipse(this._currentMeasure.left + this._currentMeasure.width / 2, this._currentMeasure.top + this._currentMeasure.height / 2,\r\n            this._currentMeasure.width / 2 - this._thickness / 2, this._currentMeasure.height / 2 - this._thickness / 2, context);\r\n\r\n        if (this._background) {\r\n            context.fillStyle = this._background;\r\n\r\n            context.fill();\r\n        }\r\n\r\n        if (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) {\r\n            context.shadowBlur = 0;\r\n            context.shadowOffsetX = 0;\r\n            context.shadowOffsetY = 0;\r\n        }\r\n\r\n        if (this._thickness) {\r\n            if (this.color) {\r\n                context.strokeStyle = this.color;\r\n            }\r\n            context.lineWidth = this._thickness;\r\n\r\n            context.stroke();\r\n        }\r\n\r\n        context.restore();\r\n    }\r\n\r\n    protected _additionalProcessing(parentMeasure: Measure, context: CanvasRenderingContext2D): void {\r\n        super._additionalProcessing(parentMeasure, context);\r\n\r\n        this._measureForChildren.width -= 2 * this._thickness;\r\n        this._measureForChildren.height -= 2 * this._thickness;\r\n        this._measureForChildren.left += this._thickness;\r\n        this._measureForChildren.top += this._thickness;\r\n    }\r\n\r\n    protected _clipForChildren(context: CanvasRenderingContext2D) {\r\n\r\n        Control.drawEllipse(this._currentMeasure.left + this._currentMeasure.width / 2, this._currentMeasure.top + this._currentMeasure.height / 2, this._currentMeasure.width / 2, this._currentMeasure.height / 2, context);\r\n\r\n        context.clip();\r\n    }\r\n}\r\n_TypeStore.RegisteredTypes[\"BABYLON.GUI.Ellipse\"] = Ellipse;", "import { InputText } from \"./inputText\";\r\nimport { _TypeStore } from '@babylonjs/core/Misc/typeStore';\r\nimport { TextWrapper } from './textWrapper';\r\n\r\n/**\r\n * Class used to create a password control\r\n */\r\nexport class InputPassword extends InputText {\r\n    protected _beforeRenderText(textWrapper: TextWrapper): TextWrapper {\r\n        const pwdTextWrapper = new TextWrapper();\r\n        let txt = \"\";\r\n        for (let i = 0; i < textWrapper.length; i++) {\r\n            txt += \"\\u2022\";\r\n        }\r\n        pwdTextWrapper.text = txt;\r\n        return pwdTextWrapper;\r\n    }\r\n}\r\n_TypeStore.RegisteredTypes[\"BABYLON.GUI.InputPassword\"] = InputPassword;", "import { Nullable } from \"@babylonjs/core/types\";\r\nimport { Observer } from \"@babylonjs/core/Misc/observable\";\r\nimport { Vector3, Matrix } from \"@babylonjs/core/Maths/math.vector\";\r\nimport { Tools } from \"@babylonjs/core/Misc/tools\";\r\nimport { Scene } from \"@babylonjs/core/scene\";\r\n\r\nimport { Control } from \"./control\";\r\nimport { ValueAndUnit } from \"../valueAndUnit\";\r\nimport { Measure } from \"../measure\";\r\nimport { _TypeStore } from '@babylonjs/core/Misc/typeStore';\r\n\r\n/** Class used to render 2D lines */\r\nexport class Line extends Control {\r\n    private _lineWidth = 1;\r\n    private _x1 = new ValueAndUnit(0);\r\n    private _y1 = new ValueAndUnit(0);\r\n    private _x2 = new ValueAndUnit(0);\r\n    private _y2 = new ValueAndUnit(0);\r\n    private _dash = new Array<number>();\r\n    private _connectedControl: Control;\r\n    private _connectedControlDirtyObserver: Nullable<Observer<Control>>;\r\n\r\n    /** Gets or sets the dash pattern */\r\n    public get dash(): Array<number> {\r\n        return this._dash;\r\n    }\r\n\r\n    public set dash(value: Array<number>) {\r\n        if (this._dash === value) {\r\n            return;\r\n        }\r\n\r\n        this._dash = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets the control connected with the line end */\r\n    public get connectedControl(): Control {\r\n        return this._connectedControl;\r\n    }\r\n\r\n    public set connectedControl(value: Control) {\r\n        if (this._connectedControl === value) {\r\n            return;\r\n        }\r\n\r\n        if (this._connectedControlDirtyObserver && this._connectedControl) {\r\n            this._connectedControl.onDirtyObservable.remove(this._connectedControlDirtyObserver);\r\n            this._connectedControlDirtyObserver = null;\r\n        }\r\n\r\n        if (value) {\r\n            this._connectedControlDirtyObserver = value.onDirtyObservable.add(() => this._markAsDirty());\r\n        }\r\n\r\n        this._connectedControl = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets start coordinates on X axis */\r\n    public get x1(): string | number {\r\n        return this._x1.toString(this._host);\r\n    }\r\n\r\n    public set x1(value: string | number) {\r\n        if (this._x1.toString(this._host) === value) {\r\n            return;\r\n        }\r\n\r\n        if (this._x1.fromString(value)) {\r\n            this._markAsDirty();\r\n        }\r\n    }\r\n\r\n    /** Gets or sets start coordinates on Y axis */\r\n    public get y1(): string | number {\r\n        return this._y1.toString(this._host);\r\n    }\r\n\r\n    public set y1(value: string | number) {\r\n        if (this._y1.toString(this._host) === value) {\r\n            return;\r\n        }\r\n\r\n        if (this._y1.fromString(value)) {\r\n            this._markAsDirty();\r\n        }\r\n    }\r\n\r\n    /** Gets or sets end coordinates on X axis */\r\n    public get x2(): string | number {\r\n        return this._x2.toString(this._host);\r\n    }\r\n\r\n    public set x2(value: string | number) {\r\n        if (this._x2.toString(this._host) === value) {\r\n            return;\r\n        }\r\n\r\n        if (this._x2.fromString(value)) {\r\n            this._markAsDirty();\r\n        }\r\n    }\r\n\r\n    /** Gets or sets end coordinates on Y axis */\r\n    public get y2(): string | number {\r\n        return this._y2.toString(this._host);\r\n    }\r\n\r\n    public set y2(value: string | number) {\r\n        if (this._y2.toString(this._host) === value) {\r\n            return;\r\n        }\r\n\r\n        if (this._y2.fromString(value)) {\r\n            this._markAsDirty();\r\n        }\r\n    }\r\n\r\n    /** Gets or sets line width */\r\n    public get lineWidth(): number {\r\n        return this._lineWidth;\r\n    }\r\n\r\n    public set lineWidth(value: number) {\r\n        if (this._lineWidth === value) {\r\n            return;\r\n        }\r\n\r\n        this._lineWidth = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets horizontal alignment */\r\n    public set horizontalAlignment(value: number) {\r\n        return;\r\n    }\r\n\r\n    /** Gets or sets vertical alignment */\r\n    public set verticalAlignment(value: number) {\r\n        return;\r\n    }\r\n\r\n    private get _effectiveX2(): number {\r\n        return (this._connectedControl ? this._connectedControl.centerX : 0) + this._x2.getValue(this._host);\r\n    }\r\n\r\n    private get _effectiveY2(): number {\r\n        return (this._connectedControl ? this._connectedControl.centerY : 0) + this._y2.getValue(this._host);\r\n    }\r\n\r\n    /**\r\n     * Creates a new Line\r\n     * @param name defines the control name\r\n     */\r\n    constructor(public name?: string) {\r\n        super(name);\r\n\r\n        this._automaticSize = true;\r\n\r\n        this.isHitTestVisible = false;\r\n        this._horizontalAlignment = Control.HORIZONTAL_ALIGNMENT_LEFT;\r\n        this._verticalAlignment = Control.VERTICAL_ALIGNMENT_TOP;\r\n    }\r\n\r\n    protected _getTypeName(): string {\r\n        return \"Line\";\r\n    }\r\n\r\n    public _draw(context: CanvasRenderingContext2D): void {\r\n        context.save();\r\n\r\n        if (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) {\r\n            context.shadowColor = this.shadowColor;\r\n            context.shadowBlur = this.shadowBlur;\r\n            context.shadowOffsetX = this.shadowOffsetX;\r\n            context.shadowOffsetY = this.shadowOffsetY;\r\n        }\r\n\r\n        this._applyStates(context);\r\n        context.strokeStyle = this.color;\r\n        context.lineWidth = this._lineWidth;\r\n        context.setLineDash(this._dash);\r\n\r\n        context.beginPath();\r\n        context.moveTo(this._cachedParentMeasure.left + this._x1.getValue(this._host), this._cachedParentMeasure.top + this._y1.getValue(this._host));\r\n\r\n        context.lineTo(this._cachedParentMeasure.left + this._effectiveX2, this._cachedParentMeasure.top + this._effectiveY2);\r\n        context.stroke();\r\n\r\n        context.restore();\r\n    }\r\n\r\n    public _measure(): void {\r\n        // Width / Height\r\n        this._currentMeasure.width = Math.abs(this._x1.getValue(this._host) - this._effectiveX2) + this._lineWidth;\r\n        this._currentMeasure.height = Math.abs(this._y1.getValue(this._host) - this._effectiveY2) + this._lineWidth;\r\n    }\r\n\r\n    protected _computeAlignment(parentMeasure: Measure, context: CanvasRenderingContext2D): void {\r\n        this._currentMeasure.left = parentMeasure.left + Math.min(this._x1.getValue(this._host), this._effectiveX2) - this._lineWidth / 2;\r\n        this._currentMeasure.top = parentMeasure.top + Math.min(this._y1.getValue(this._host), this._effectiveY2) - this._lineWidth / 2;\r\n    }\r\n\r\n    /**\r\n     * Move one end of the line given 3D cartesian coordinates.\r\n     * @param position Targeted world position\r\n     * @param scene Scene\r\n     * @param end (opt) Set to true to assign x2 and y2 coordinates of the line. Default assign to x1 and y1.\r\n     */\r\n    public moveToVector3(position: Vector3, scene: Scene, end: boolean = false): void {\r\n        if (!this._host || this.parent !== this._host._rootContainer) {\r\n            Tools.Error(\"Cannot move a control to a vector3 if the control is not at root level\");\r\n            return;\r\n        }\r\n\r\n        var globalViewport = this._host._getGlobalViewport(scene);\r\n        var projectedPosition = Vector3.Project(position, Matrix.Identity(), scene.getTransformMatrix(), globalViewport);\r\n\r\n        this._moveToProjectedPosition(projectedPosition, end);\r\n\r\n        if (projectedPosition.z < 0 || projectedPosition.z > 1) {\r\n            this.notRenderable = true;\r\n            return;\r\n        }\r\n        this.notRenderable = false;\r\n    }\r\n\r\n    /**\r\n     * Move one end of the line to a position in screen absolute space.\r\n     * @param projectedPosition Position in screen absolute space (X, Y)\r\n     * @param end (opt) Set to true to assign x2 and y2 coordinates of the line. Default assign to x1 and y1.\r\n     */\r\n    public _moveToProjectedPosition(projectedPosition: Vector3, end: boolean = false): void {\r\n        let x: string = (projectedPosition.x + this._linkOffsetX.getValue(this._host)) + \"px\";\r\n        let y: string = (projectedPosition.y + this._linkOffsetY.getValue(this._host)) + \"px\";\r\n\r\n        if (end) {\r\n            this.x2 = x;\r\n            this.y2 = y;\r\n            this._x2.ignoreAdaptiveScaling = true;\r\n            this._y2.ignoreAdaptiveScaling = true;\r\n        } else {\r\n            this.x1 = x;\r\n            this.y1 = y;\r\n            this._x1.ignoreAdaptiveScaling = true;\r\n            this._y1.ignoreAdaptiveScaling = true;\r\n        }\r\n    }\r\n}\r\n_TypeStore.RegisteredTypes[\"BABYLON.GUI.Line\"] = Line;\r\n", "import { Nullable } from \"@babylonjs/core/types\";\r\nimport { Observer } from \"@babylonjs/core/Misc/observable\";\r\nimport { Vector3 } from \"@babylonjs/core/Maths/math.vector\";\r\nimport { Epsilon } from '@babylonjs/core/Maths/math.constants';\r\nimport { Camera } from \"@babylonjs/core/Cameras/camera\";\r\nimport { AbstractMesh } from \"@babylonjs/core/Meshes/abstractMesh\";\r\n\r\nimport { MultiLine } from \"./controls/multiLine\";\r\nimport { ValueAndUnit } from \"./valueAndUnit\";\r\nimport { Control } from \"./controls/control\";\r\n\r\n/**\r\n * Class used to store a point for a MultiLine object.\r\n * The point can be pure 2D coordinates, a mesh or a control\r\n */\r\nexport class MultiLinePoint {\r\n\r\n    private _multiLine: MultiLine;\r\n\r\n    private _x: ValueAndUnit;\r\n    private _y: ValueAndUnit;\r\n    private _control: Nullable<Control>;\r\n    private _mesh: Nullable<AbstractMesh>;\r\n\r\n    private _controlObserver: Nullable<Observer<Control>>;\r\n    private _meshObserver: Nullable<Observer<Camera>>;\r\n\r\n    /** @hidden */\r\n    public _point: Vector3;\r\n\r\n    /**\r\n     * Creates a new MultiLinePoint\r\n     * @param multiLine defines the source MultiLine object\r\n     */\r\n    constructor(multiLine: MultiLine) {\r\n        this._multiLine = multiLine;\r\n\r\n        this._x = new ValueAndUnit(0);\r\n        this._y = new ValueAndUnit(0);\r\n\r\n        this._point = new Vector3(0, 0, 0);\r\n    }\r\n\r\n    /** Gets or sets x coordinate */\r\n    public get x(): string | number {\r\n        return this._x.toString(this._multiLine._host);\r\n    }\r\n\r\n    public set x(value: string | number) {\r\n        if (this._x.toString(this._multiLine._host) === value) {\r\n            return;\r\n        }\r\n\r\n        if (this._x.fromString(value)) {\r\n            this._multiLine._markAsDirty();\r\n        }\r\n    }\r\n\r\n    /** Gets or sets y coordinate */\r\n    public get y(): string | number {\r\n        return this._y.toString(this._multiLine._host);\r\n    }\r\n\r\n    public set y(value: string | number) {\r\n        if (this._y.toString(this._multiLine._host) === value) {\r\n            return;\r\n        }\r\n\r\n        if (this._y.fromString(value)) {\r\n            this._multiLine._markAsDirty();\r\n        }\r\n    }\r\n\r\n    /** Gets or sets the control associated with this point */\r\n    public get control(): Nullable<Control> {\r\n        return this._control;\r\n    }\r\n\r\n    public set control(value: Nullable<Control>) {\r\n        if (this._control === value) {\r\n            return;\r\n        }\r\n\r\n        if (this._control && this._controlObserver) {\r\n            this._control.onDirtyObservable.remove(this._controlObserver);\r\n\r\n            this._controlObserver = null;\r\n        }\r\n\r\n        this._control = value;\r\n\r\n        if (this._control) {\r\n            this._controlObserver = this._control.onDirtyObservable.add(this._multiLine.onPointUpdate);\r\n        }\r\n\r\n        this._multiLine._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets the mesh associated with this point */\r\n    public get mesh(): Nullable<AbstractMesh> {\r\n        return this._mesh;\r\n    }\r\n\r\n    public set mesh(value: Nullable<AbstractMesh>) {\r\n        if (this._mesh === value) {\r\n            return;\r\n        }\r\n\r\n        if (this._mesh && this._meshObserver) {\r\n            this._mesh.getScene().onAfterCameraRenderObservable.remove(this._meshObserver);\r\n        }\r\n\r\n        this._mesh = value;\r\n\r\n        if (this._mesh) {\r\n            this._meshObserver = this._mesh.getScene().onAfterCameraRenderObservable.add(this._multiLine.onPointUpdate);\r\n        }\r\n\r\n        this._multiLine._markAsDirty();\r\n    }\r\n\r\n    /** Resets links */\r\n    public resetLinks(): void {\r\n        this.control = null;\r\n        this.mesh = null;\r\n    }\r\n\r\n    /**\r\n     * Gets a translation vector with Z component\r\n     * @returns the translation vector\r\n     */\r\n    public translate(): Vector3 {\r\n        this._point = this._translatePoint();\r\n\r\n        return this._point;\r\n    }\r\n\r\n    private _translatePoint(): Vector3 {\r\n        if (this._mesh != null) {\r\n            return this._multiLine._host.getProjectedPositionWithZ(this._mesh.getBoundingInfo().boundingSphere.center, this._mesh.getWorldMatrix());\r\n        }\r\n        else if (this._control != null) {\r\n            return new Vector3(this._control.centerX, this._control.centerY, 1. - Epsilon);\r\n        }\r\n        else {\r\n            var host: any = this._multiLine._host as any;\r\n\r\n            var xValue: number = this._x.getValueInPixel(host, Number(host._canvas.width));\r\n            var yValue: number = this._y.getValueInPixel(host, Number(host._canvas.height));\r\n\r\n            return new Vector3(xValue, yValue, 1. - Epsilon);\r\n        }\r\n    }\r\n\r\n    /** Release associated resources */\r\n    public dispose(): void {\r\n        this.resetLinks();\r\n    }\r\n\r\n}\r\n", "import { Nullable } from \"@babylonjs/core/types\";\r\nimport { AbstractMesh } from \"@babylonjs/core/Meshes/abstractMesh\";\r\n\r\nimport { Control } from \"./control\";\r\nimport { MultiLinePoint } from \"../multiLinePoint\";\r\nimport { Measure } from \"../measure\";\r\nimport { _TypeStore } from '@babylonjs/core/Misc/typeStore';\r\nimport { Vector3 } from \"@babylonjs/core/Maths/math.vector\";\r\n\r\n/**\r\n * Class used to create multi line control\r\n */\r\nexport class MultiLine extends Control {\r\n\r\n    private _lineWidth: number = 1;\r\n    private _dash: number[];\r\n    private _points: Nullable<MultiLinePoint>[];\r\n\r\n    private _minX: Nullable<number>;\r\n    private _minY: Nullable<number>;\r\n    private _maxX: Nullable<number>;\r\n    private _maxY: Nullable<number>;\r\n\r\n    /**\r\n     * Creates a new MultiLine\r\n     * @param name defines the control name\r\n     */\r\n    constructor(public name?: string) {\r\n        super(name);\r\n\r\n        this._automaticSize = true;\r\n        this.isHitTestVisible = false;\r\n        this._horizontalAlignment = Control.HORIZONTAL_ALIGNMENT_LEFT;\r\n        this._verticalAlignment = Control.VERTICAL_ALIGNMENT_TOP;\r\n\r\n        this._dash = [];\r\n        this._points = [];\r\n    }\r\n\r\n    /** Gets or sets dash pattern */\r\n    public get dash(): Array<number> {\r\n        return this._dash;\r\n    }\r\n\r\n    public set dash(value: Array<number>) {\r\n        if (this._dash === value) {\r\n            return;\r\n        }\r\n\r\n        this._dash = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Gets point stored at specified index\r\n     * @param index defines the index to look for\r\n     * @returns the requested point if found\r\n     */\r\n    public getAt(index: number): MultiLinePoint {\r\n        if (!this._points[index]) {\r\n            this._points[index] = new MultiLinePoint(this);\r\n        }\r\n\r\n        return this._points[index] as MultiLinePoint;\r\n    }\r\n\r\n    /** Function called when a point is updated */\r\n    public onPointUpdate = (): void => {\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Adds new points to the point collection\r\n     * @param items defines the list of items (mesh, control or 2d coordiantes) to add\r\n     * @returns the list of created MultiLinePoint\r\n     */\r\n    public add(...items: (AbstractMesh | Control | { x: string | number, y: string | number })[]): MultiLinePoint[] {\r\n        return items.map((item) => this.push(item));\r\n    }\r\n\r\n    /**\r\n     * Adds a new point to the point collection\r\n     * @param item defines the item (mesh, control or 2d coordiantes) to add\r\n     * @returns the created MultiLinePoint\r\n     */\r\n    public push(item?: (AbstractMesh | Control | { x: string | number, y: string | number })): MultiLinePoint {\r\n        var point: MultiLinePoint = this.getAt(this._points.length);\r\n\r\n        if (item == null) { return point; }\r\n\r\n        if (item instanceof AbstractMesh) {\r\n            point.mesh = item;\r\n        }\r\n        else if (item instanceof Control) {\r\n            point.control = item;\r\n        }\r\n        else if (item.x != null && item.y != null) {\r\n            point.x = item.x;\r\n            point.y = item.y;\r\n        }\r\n\r\n        return point;\r\n    }\r\n\r\n    /**\r\n     * Remove a specific value or point from the active point collection\r\n     * @param value defines the value or point to remove\r\n     */\r\n    public remove(value: number | MultiLinePoint): void {\r\n        var index: number;\r\n\r\n        if (value instanceof MultiLinePoint) {\r\n            index = this._points.indexOf(value);\r\n\r\n            if (index === -1) {\r\n                return;\r\n            }\r\n        }\r\n        else {\r\n            index = value;\r\n        }\r\n\r\n        var point: Nullable<MultiLinePoint> = this._points[index];\r\n\r\n        if (!point) {\r\n            return;\r\n        }\r\n\r\n        point.dispose();\r\n\r\n        this._points.splice(index, 1);\r\n    }\r\n\r\n    /**\r\n     * Resets this object to initial state (no point)\r\n     */\r\n    public reset(): void {\r\n        while (this._points.length > 0) {\r\n            this.remove(this._points.length - 1);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Resets all links\r\n     */\r\n    public resetLinks(): void {\r\n        this._points.forEach((point) => {\r\n            if (point != null) { point.resetLinks(); }\r\n        });\r\n    }\r\n\r\n    /** Gets or sets line width */\r\n    public get lineWidth(): number {\r\n        return this._lineWidth;\r\n    }\r\n\r\n    public set lineWidth(value: number) {\r\n        if (this._lineWidth === value) {\r\n            return;\r\n        }\r\n\r\n        this._lineWidth = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    public set horizontalAlignment(value: number) {\r\n        return;\r\n    }\r\n\r\n    public set verticalAlignment(value: number) {\r\n        return;\r\n    }\r\n\r\n    protected _getTypeName(): string {\r\n        return \"MultiLine\";\r\n    }\r\n\r\n    public _draw(context: CanvasRenderingContext2D, invalidatedRectangle?: Nullable<Measure>): void {\r\n        context.save();\r\n\r\n        if (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) {\r\n            context.shadowColor = this.shadowColor;\r\n            context.shadowBlur = this.shadowBlur;\r\n            context.shadowOffsetX = this.shadowOffsetX;\r\n            context.shadowOffsetY = this.shadowOffsetY;\r\n        }\r\n\r\n        this._applyStates(context);\r\n\r\n        context.strokeStyle = this.color;\r\n        context.lineWidth = this._lineWidth;\r\n        context.setLineDash(this._dash);\r\n\r\n        context.beginPath();\r\n\r\n        var first: boolean = true; //first index is not necessarily 0\r\n        var previousPoint: Vector3;\r\n\r\n        this._points.forEach((point) => {\r\n            if (!point) {\r\n                return;\r\n            }\r\n\r\n            if (first) {\r\n                context.moveTo(point._point.x, point._point.y);\r\n\r\n                first = false;\r\n            }\r\n            else {\r\n                if (point._point.z < 1 && previousPoint.z < 1) {\r\n                    context.lineTo(point._point.x, point._point.y);\r\n                } else {\r\n                    context.moveTo(point._point.x, point._point.y);\r\n                }\r\n            }\r\n            previousPoint = point._point;\r\n        });\r\n\r\n        context.stroke();\r\n\r\n        context.restore();\r\n    }\r\n\r\n    protected _additionalProcessing(parentMeasure: Measure, context: CanvasRenderingContext2D): void {\r\n        this._minX = null;\r\n        this._minY = null;\r\n        this._maxX = null;\r\n        this._maxY = null;\r\n\r\n        this._points.forEach((point, index) => {\r\n            if (!point) {\r\n                return;\r\n            }\r\n\r\n            point.translate();\r\n\r\n            if (this._minX == null || point._point.x < this._minX) { this._minX = point._point.x; }\r\n            if (this._minY == null || point._point.y < this._minY) { this._minY = point._point.y; }\r\n            if (this._maxX == null || point._point.x > this._maxX) { this._maxX = point._point.x; }\r\n            if (this._maxY == null || point._point.y > this._maxY) { this._maxY = point._point.y; }\r\n        });\r\n\r\n        if (this._minX == null) { this._minX = 0; }\r\n        if (this._minY == null) { this._minY = 0; }\r\n        if (this._maxX == null) { this._maxX = 0; }\r\n        if (this._maxY == null) { this._maxY = 0; }\r\n    }\r\n\r\n    public _measure(): void {\r\n        if (this._minX == null || this._maxX == null || this._minY == null || this._maxY == null) {\r\n            return;\r\n        }\r\n\r\n        this._currentMeasure.width = Math.abs(this._maxX - this._minX) + this._lineWidth;\r\n        this._currentMeasure.height = Math.abs(this._maxY - this._minY) + this._lineWidth;\r\n    }\r\n\r\n    protected _computeAlignment(parentMeasure: Measure, context: CanvasRenderingContext2D): void {\r\n        if (this._minX == null || this._minY == null) {\r\n            return;\r\n        }\r\n\r\n        this._currentMeasure.left = this._minX - this._lineWidth / 2;\r\n        this._currentMeasure.top = this._minY - this._lineWidth / 2;\r\n    }\r\n\r\n    public dispose(): void {\r\n        this.reset();\r\n\r\n        super.dispose();\r\n    }\r\n}\r\n_TypeStore.RegisteredTypes[\"BABYLON.GUI.MultiLine\"] = MultiLine;\r\n", "import { Observable } from \"@babylonjs/core/Misc/observable\";\r\nimport { Vector2 } from \"@babylonjs/core/Maths/math.vector\";\r\n\r\nimport { Control } from \"./control\";\r\nimport { StackPanel } from \"./stackPanel\";\r\nimport { TextBlock } from \"./textBlock\";\r\nimport { _TypeStore } from '@babylonjs/core/Misc/typeStore';\r\nimport { PointerInfoBase } from '@babylonjs/core/Events/pointerEvents';\r\n\r\n/**\r\n * Class used to create radio button controls\r\n */\r\nexport class RadioButton extends Control {\r\n    private _isChecked = false;\r\n    private _background = \"black\";\r\n    private _checkSizeRatio = 0.8;\r\n    private _thickness = 1;\r\n\r\n    /** Gets or sets border thickness */\r\n    public get thickness(): number {\r\n        return this._thickness;\r\n    }\r\n\r\n    public set thickness(value: number) {\r\n        if (this._thickness === value) {\r\n            return;\r\n        }\r\n\r\n        this._thickness = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets group name */\r\n    public group = \"\";\r\n\r\n    /** Observable raised when isChecked is changed */\r\n    public onIsCheckedChangedObservable = new Observable<boolean>();\r\n\r\n    /** Gets or sets a value indicating the ratio between overall size and check size */\r\n    public get checkSizeRatio(): number {\r\n        return this._checkSizeRatio;\r\n    }\r\n\r\n    public set checkSizeRatio(value: number) {\r\n        value = Math.max(Math.min(1, value), 0);\r\n\r\n        if (this._checkSizeRatio === value) {\r\n            return;\r\n        }\r\n\r\n        this._checkSizeRatio = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets background color */\r\n    public get background(): string {\r\n        return this._background;\r\n    }\r\n\r\n    public set background(value: string) {\r\n        if (this._background === value) {\r\n            return;\r\n        }\r\n\r\n        this._background = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets a boolean indicating if the checkbox is checked or not */\r\n    public get isChecked(): boolean {\r\n        return this._isChecked;\r\n    }\r\n\r\n    public set isChecked(value: boolean) {\r\n        if (this._isChecked === value) {\r\n            return;\r\n        }\r\n\r\n        this._isChecked = value;\r\n        this._markAsDirty();\r\n\r\n        this.onIsCheckedChangedObservable.notifyObservers(value);\r\n\r\n        if (this._isChecked && this._host) {\r\n            // Update all controls from same group\r\n            this._host.executeOnAllControls((control) => {\r\n                if (control === this) {\r\n                    return;\r\n                }\r\n\r\n                if ((<any>control).group === undefined) {\r\n                    return;\r\n                }\r\n                var childRadio = (<RadioButton>control);\r\n                if (childRadio.group === this.group) {\r\n                    childRadio.isChecked = false;\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Creates a new RadioButton\r\n     * @param name defines the control name\r\n     */\r\n    constructor(public name?: string) {\r\n        super(name);\r\n\r\n        this.isPointerBlocker = true;\r\n    }\r\n\r\n    protected _getTypeName(): string {\r\n        return \"RadioButton\";\r\n    }\r\n\r\n    public _draw(context: CanvasRenderingContext2D): void {\r\n        context.save();\r\n\r\n        this._applyStates(context);\r\n        let actualWidth = this._currentMeasure.width - this._thickness;\r\n        let actualHeight = this._currentMeasure.height - this._thickness;\r\n\r\n        if (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) {\r\n            context.shadowColor = this.shadowColor;\r\n            context.shadowBlur = this.shadowBlur;\r\n            context.shadowOffsetX = this.shadowOffsetX;\r\n            context.shadowOffsetY = this.shadowOffsetY;\r\n        }\r\n\r\n        // Outer\r\n        Control.drawEllipse(this._currentMeasure.left + this._currentMeasure.width / 2, this._currentMeasure.top + this._currentMeasure.height / 2,\r\n            this._currentMeasure.width / 2 - this._thickness / 2, this._currentMeasure.height / 2 - this._thickness / 2, context);\r\n\r\n        context.fillStyle = this._isEnabled ? this._background : this._disabledColor;\r\n        context.fill();\r\n\r\n        if (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) {\r\n            context.shadowBlur = 0;\r\n            context.shadowOffsetX = 0;\r\n            context.shadowOffsetY = 0;\r\n        }\r\n\r\n        context.strokeStyle = this.color;\r\n        context.lineWidth = this._thickness;\r\n\r\n        context.stroke();\r\n\r\n        // Inner\r\n        if (this._isChecked) {\r\n            context.fillStyle = this._isEnabled ? this.color : this._disabledColor;\r\n            let offsetWidth = actualWidth * this._checkSizeRatio;\r\n            let offseHeight = actualHeight * this._checkSizeRatio;\r\n\r\n            Control.drawEllipse(this._currentMeasure.left + this._currentMeasure.width / 2, this._currentMeasure.top + this._currentMeasure.height / 2,\r\n                offsetWidth / 2 - this._thickness / 2, offseHeight / 2 - this._thickness / 2, context);\r\n\r\n            context.fill();\r\n        }\r\n        context.restore();\r\n    }\r\n\r\n    // Events\r\n    public _onPointerDown(target: Control, coordinates: Vector2, pointerId: number, buttonIndex: number, pi: PointerInfoBase): boolean {\r\n        if (!super._onPointerDown(target, coordinates, pointerId, buttonIndex, pi)) {\r\n            return false;\r\n        }\r\n\r\n        if (!this.isChecked) {\r\n            this.isChecked = true;\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * Utility function to easily create a radio button with a header\r\n     * @param title defines the label to use for the header\r\n     * @param group defines the group to use for the radio button\r\n     * @param isChecked defines the initial state of the radio button\r\n     * @param onValueChanged defines the callback to call when value changes\r\n     * @returns a StackPanel containing the radio button and a textBlock\r\n     */\r\n    public static AddRadioButtonWithHeader(title: string, group: string, isChecked: boolean, onValueChanged: (button: RadioButton, value: boolean) => void): StackPanel {\r\n        var panel = new StackPanel();\r\n        panel.isVertical = false;\r\n        panel.height = \"30px\";\r\n\r\n        var radio = new RadioButton();\r\n        radio.width = \"20px\";\r\n        radio.height = \"20px\";\r\n        radio.isChecked = isChecked;\r\n        radio.color = \"green\";\r\n        radio.group = group;\r\n        radio.onIsCheckedChangedObservable.add((value) => onValueChanged(radio, value));\r\n        panel.addControl(radio);\r\n\r\n        var header = new TextBlock();\r\n        header.text = title;\r\n        header.width = \"180px\";\r\n        header.paddingLeft = \"5px\";\r\n        header.textHorizontalAlignment = Control.HORIZONTAL_ALIGNMENT_LEFT;\r\n        header.color = \"white\";\r\n        panel.addControl(header);\r\n\r\n        return panel;\r\n    }\r\n}\r\n_TypeStore.RegisteredTypes[\"BABYLON.GUI.RadioButton\"] = RadioButton;", "import { Observable } from \"@babylonjs/core/Misc/observable\";\r\nimport { Vector2 } from \"@babylonjs/core/Maths/math.vector\";\r\n\r\nimport { Control } from \"../control\";\r\nimport { ValueAndUnit } from \"../../valueAndUnit\";\r\nimport { PointerInfoBase } from '@babylonjs/core/Events/pointerEvents';\r\n\r\n/**\r\n * Class used to create slider controls\r\n */\r\nexport class BaseSlider extends Control {\r\n    protected _thumbWidth = new ValueAndUnit(20, ValueAndUnit.UNITMODE_PIXEL, false);\r\n    private _minimum = 0;\r\n    private _maximum = 100;\r\n    private _value = 50;\r\n    private _isVertical = false;\r\n    protected _barOffset = new ValueAndUnit(5, ValueAndUnit.UNITMODE_PIXEL, false);\r\n    private _isThumbClamped = false;\r\n    protected _displayThumb = true;\r\n    private _step = 0;\r\n\r\n    private _lastPointerDownID = -1;\r\n\r\n    // Shared rendering info\r\n    protected _effectiveBarOffset = 0;\r\n    protected _renderLeft: number;\r\n    protected _renderTop: number;\r\n    protected _renderWidth: number;\r\n    protected _renderHeight: number;\r\n    protected _backgroundBoxLength: number;\r\n    protected _backgroundBoxThickness: number;\r\n    protected _effectiveThumbThickness: number;\r\n\r\n    /** Observable raised when the sldier value changes */\r\n    public onValueChangedObservable = new Observable<number>();\r\n\r\n    /** Gets or sets a boolean indicating if the thumb must be rendered */\r\n    public get displayThumb(): boolean {\r\n        return this._displayThumb;\r\n    }\r\n\r\n    public set displayThumb(value: boolean) {\r\n        if (this._displayThumb === value) {\r\n            return;\r\n        }\r\n\r\n        this._displayThumb = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets a step to apply to values (0 by default) */\r\n    public get step(): number {\r\n        return this._step;\r\n    }\r\n\r\n    public set step(value: number) {\r\n        if (this._step === value) {\r\n            return;\r\n        }\r\n\r\n        this._step = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets main bar offset (ie. the margin applied to the value bar) */\r\n    public get barOffset(): string | number {\r\n        return this._barOffset.toString(this._host);\r\n    }\r\n\r\n    /** Gets main bar offset in pixels*/\r\n    public get barOffsetInPixels(): number {\r\n        return this._barOffset.getValueInPixel(this._host, this._cachedParentMeasure.width);\r\n    }\r\n\r\n    public set barOffset(value: string | number) {\r\n        if (this._barOffset.toString(this._host) === value) {\r\n            return;\r\n        }\r\n\r\n        if (this._barOffset.fromString(value)) {\r\n            this._markAsDirty();\r\n        }\r\n    }\r\n\r\n    /** Gets or sets thumb width */\r\n    public get thumbWidth(): string | number {\r\n        return this._thumbWidth.toString(this._host);\r\n    }\r\n\r\n    /** Gets thumb width in pixels */\r\n    public get thumbWidthInPixels(): number {\r\n        return this._thumbWidth.getValueInPixel(this._host, this._cachedParentMeasure.width);\r\n    }\r\n\r\n    public set thumbWidth(value: string | number) {\r\n        if (this._thumbWidth.toString(this._host) === value) {\r\n            return;\r\n        }\r\n\r\n        if (this._thumbWidth.fromString(value)) {\r\n            this._markAsDirty();\r\n        }\r\n    }\r\n\r\n    /** Gets or sets minimum value */\r\n    public get minimum(): number {\r\n        return this._minimum;\r\n    }\r\n\r\n    public set minimum(value: number) {\r\n        if (this._minimum === value) {\r\n            return;\r\n        }\r\n\r\n        this._minimum = value;\r\n        this._markAsDirty();\r\n\r\n        this.value = Math.max(Math.min(this.value, this._maximum), this._minimum);\r\n    }\r\n\r\n    /** Gets or sets maximum value */\r\n    public get maximum(): number {\r\n        return this._maximum;\r\n    }\r\n\r\n    public set maximum(value: number) {\r\n        if (this._maximum === value) {\r\n            return;\r\n        }\r\n\r\n        this._maximum = value;\r\n        this._markAsDirty();\r\n\r\n        this.value = Math.max(Math.min(this.value, this._maximum), this._minimum);\r\n    }\r\n\r\n    /** Gets or sets current value */\r\n    public get value(): number {\r\n        return this._value;\r\n    }\r\n\r\n    public set value(value: number) {\r\n        value = Math.max(Math.min(value, this._maximum), this._minimum);\r\n\r\n        if (this._value === value) {\r\n            return;\r\n        }\r\n\r\n        this._value = value;\r\n        this._markAsDirty();\r\n        this.onValueChangedObservable.notifyObservers(this._value);\r\n    }\r\n\r\n    /**Gets or sets a boolean indicating if the slider should be vertical or horizontal */\r\n    public get isVertical(): boolean {\r\n        return this._isVertical;\r\n    }\r\n\r\n    public set isVertical(value: boolean) {\r\n        if (this._isVertical === value) {\r\n            return;\r\n        }\r\n\r\n        this._isVertical = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets a value indicating if the thumb can go over main bar extends */\r\n    public get isThumbClamped(): boolean {\r\n        return this._isThumbClamped;\r\n    }\r\n\r\n    public set isThumbClamped(value: boolean) {\r\n        if (this._isThumbClamped === value) {\r\n            return;\r\n        }\r\n\r\n        this._isThumbClamped = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Creates a new BaseSlider\r\n     * @param name defines the control name\r\n     */\r\n    constructor(public name?: string) {\r\n        super(name);\r\n\r\n        this.isPointerBlocker = true;\r\n    }\r\n\r\n    protected _getTypeName(): string {\r\n        return \"BaseSlider\";\r\n    }\r\n\r\n    protected _getThumbPosition() {\r\n        if (this.isVertical) {\r\n            return ((this.maximum - this.value) / (this.maximum - this.minimum)) * this._backgroundBoxLength;\r\n        }\r\n\r\n        return ((this.value - this.minimum) / (this.maximum - this.minimum)) * this._backgroundBoxLength;\r\n    }\r\n\r\n    protected _getThumbThickness(type: string): number {\r\n        var thumbThickness = 0;\r\n        switch (type) {\r\n            case \"circle\":\r\n                if (this._thumbWidth.isPixel) {\r\n                    thumbThickness = Math.max(this._thumbWidth.getValue(this._host), this._backgroundBoxThickness);\r\n                }\r\n                else {\r\n                    thumbThickness = this._backgroundBoxThickness * this._thumbWidth.getValue(this._host);\r\n                }\r\n                break;\r\n            case \"rectangle\":\r\n                if (this._thumbWidth.isPixel) {\r\n                    thumbThickness = Math.min(this._thumbWidth.getValue(this._host), this._backgroundBoxThickness);\r\n                }\r\n                else {\r\n                    thumbThickness = this._backgroundBoxThickness * this._thumbWidth.getValue(this._host);\r\n                }\r\n        }\r\n        return thumbThickness;\r\n    }\r\n\r\n    protected _prepareRenderingData(type: string) {\r\n        // Main bar\r\n        this._effectiveBarOffset = 0;\r\n        this._renderLeft = this._currentMeasure.left;\r\n        this._renderTop = this._currentMeasure.top;\r\n        this._renderWidth = this._currentMeasure.width;\r\n        this._renderHeight = this._currentMeasure.height;\r\n\r\n        this._backgroundBoxLength = Math.max(this._currentMeasure.width, this._currentMeasure.height);\r\n        this._backgroundBoxThickness = Math.min(this._currentMeasure.width, this._currentMeasure.height);\r\n        this._effectiveThumbThickness = this._getThumbThickness(type);\r\n\r\n        if (this.displayThumb) {\r\n            this._backgroundBoxLength -= this._effectiveThumbThickness;\r\n        }\r\n        //throw error when height is less than width for vertical slider\r\n        if ((this.isVertical && this._currentMeasure.height < this._currentMeasure.width)) {\r\n            console.error(\"Height should be greater than width\");\r\n            return;\r\n        }\r\n        if (this._barOffset.isPixel) {\r\n            this._effectiveBarOffset = Math.min(this._barOffset.getValue(this._host), this._backgroundBoxThickness);\r\n        }\r\n        else {\r\n            this._effectiveBarOffset = this._backgroundBoxThickness * this._barOffset.getValue(this._host);\r\n        }\r\n\r\n        this._backgroundBoxThickness -= (this._effectiveBarOffset * 2);\r\n\r\n        if (this.isVertical) {\r\n            this._renderLeft += this._effectiveBarOffset;\r\n            if (!this.isThumbClamped && this.displayThumb) {\r\n                this._renderTop += (this._effectiveThumbThickness / 2);\r\n            }\r\n\r\n            this._renderHeight = this._backgroundBoxLength;\r\n            this._renderWidth = this._backgroundBoxThickness;\r\n\r\n        }\r\n        else {\r\n            this._renderTop += this._effectiveBarOffset;\r\n            if (!this.isThumbClamped && this.displayThumb) {\r\n                this._renderLeft += (this._effectiveThumbThickness / 2);\r\n            }\r\n            this._renderHeight = this._backgroundBoxThickness;\r\n            this._renderWidth = this._backgroundBoxLength;\r\n        }\r\n    }\r\n\r\n    // Events\r\n    private _pointerIsDown = false;\r\n\r\n    /** @hidden */\r\n    protected _updateValueFromPointer(x: number, y: number): void {\r\n        if (this.rotation != 0) {\r\n            this._invertTransformMatrix.transformCoordinates(x, y, this._transformedPosition);\r\n            x = this._transformedPosition.x;\r\n            y = this._transformedPosition.y;\r\n        }\r\n\r\n        let value: number;\r\n        if (this._isVertical) {\r\n            value = this._minimum + (1 - ((y - this._currentMeasure.top) / this._currentMeasure.height)) * (this._maximum - this._minimum);\r\n        }\r\n        else {\r\n            value = this._minimum + ((x - this._currentMeasure.left) / this._currentMeasure.width) * (this._maximum - this._minimum);\r\n        }\r\n\r\n        const mult = (1 / this._step) | 0;\r\n        this.value = this._step ? ((value * mult) | 0) / mult : value;\r\n    }\r\n\r\n    public _onPointerDown(target: Control, coordinates: Vector2, pointerId: number, buttonIndex: number, pi: PointerInfoBase): boolean {\r\n        if (!super._onPointerDown(target, coordinates, pointerId, buttonIndex, pi)) {\r\n            return false;\r\n        }\r\n\r\n        this._pointerIsDown = true;\r\n\r\n        this._updateValueFromPointer(coordinates.x, coordinates.y);\r\n        this._host._capturingControl[pointerId] = this;\r\n        this._lastPointerDownID = pointerId;\r\n        return true;\r\n    }\r\n\r\n    public _onPointerMove(target: Control, coordinates: Vector2, pointerId: number, pi: PointerInfoBase): void {\r\n        // Only listen to pointer move events coming from the last pointer to click on the element (To support dual vr controller interaction)\r\n        if (pointerId != this._lastPointerDownID) {\r\n            return;\r\n        }\r\n\r\n        if (this._pointerIsDown) {\r\n            this._updateValueFromPointer(coordinates.x, coordinates.y);\r\n        }\r\n\r\n        super._onPointerMove(target, coordinates, pointerId, pi);\r\n    }\r\n\r\n    public _onPointerUp(target: Control, coordinates: Vector2, pointerId: number, buttonIndex: number, notifyClick: boolean): void {\r\n        this._pointerIsDown = false;\r\n\r\n        delete this._host._capturingControl[pointerId];\r\n        super._onPointerUp(target, coordinates, pointerId, buttonIndex, notifyClick);\r\n    }\r\n\r\n    public _onCanvasBlur(): void {\r\n        this._forcePointerUp();\r\n        super._onCanvasBlur();\r\n    }\r\n\r\n}\r\n", "import { BaseSlider } from \"./baseSlider\";\r\nimport { _TypeStore } from '@babylonjs/core/Misc/typeStore';\r\nimport { Nullable } from '@babylonjs/core/types';\r\nimport { Measure } from '../../measure';\r\n\r\n/**\r\n * Class used to create slider controls\r\n */\r\nexport class Slider extends BaseSlider {\r\n    private _background = \"black\";\r\n    private _borderColor = \"white\";\r\n    private _thumbColor = \"\";\r\n    private _isThumbCircle = false;\r\n    protected _displayValueBar = true;\r\n\r\n    /** Gets or sets a boolean indicating if the value bar must be rendered */\r\n    public get displayValueBar(): boolean {\r\n        return this._displayValueBar;\r\n    }\r\n\r\n    public set displayValueBar(value: boolean) {\r\n        if (this._displayValueBar === value) {\r\n            return;\r\n        }\r\n\r\n        this._displayValueBar = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets border color */\r\n    public get borderColor(): string {\r\n        return this._borderColor;\r\n    }\r\n\r\n    public set borderColor(value: string) {\r\n        if (this._borderColor === value) {\r\n            return;\r\n        }\r\n\r\n        this._borderColor = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets background color */\r\n    public get background(): string {\r\n        return this._background;\r\n    }\r\n\r\n    public set background(value: string) {\r\n        if (this._background === value) {\r\n            return;\r\n        }\r\n\r\n        this._background = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets thumb's color */\r\n    public get thumbColor(): string {\r\n        return this._thumbColor;\r\n    }\r\n\r\n    public set thumbColor(value: string) {\r\n        if (this._thumbColor === value) {\r\n            return;\r\n        }\r\n\r\n        this._thumbColor = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets a boolean indicating if the thumb should be round or square */\r\n    public get isThumbCircle(): boolean {\r\n        return this._isThumbCircle;\r\n    }\r\n\r\n    public set isThumbCircle(value: boolean) {\r\n        if (this._isThumbCircle === value) {\r\n            return;\r\n        }\r\n\r\n        this._isThumbCircle = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Creates a new Slider\r\n     * @param name defines the control name\r\n     */\r\n    constructor(public name?: string) {\r\n        super(name);\r\n    }\r\n\r\n    protected _getTypeName(): string {\r\n        return \"Slider\";\r\n    }\r\n\r\n    public _draw(context: CanvasRenderingContext2D, invalidatedRectangle?: Nullable<Measure>): void {\r\n        context.save();\r\n\r\n        this._applyStates(context);\r\n        this._prepareRenderingData(this.isThumbCircle ? \"circle\" : \"rectangle\");\r\n        var left = this._renderLeft;\r\n        var top = this._renderTop;\r\n        var width = this._renderWidth;\r\n        var height = this._renderHeight;\r\n\r\n        var radius = 0;\r\n\r\n        if (this.isThumbClamped && this.isThumbCircle) {\r\n            if (this.isVertical) {\r\n                top += (this._effectiveThumbThickness / 2);\r\n            }\r\n            else {\r\n                left += (this._effectiveThumbThickness / 2);\r\n            }\r\n\r\n            radius = this._backgroundBoxThickness / 2;\r\n        }\r\n        else {\r\n            radius = (this._effectiveThumbThickness - this._effectiveBarOffset) / 2;\r\n        }\r\n\r\n        if (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) {\r\n            context.shadowColor = this.shadowColor;\r\n            context.shadowBlur = this.shadowBlur;\r\n            context.shadowOffsetX = this.shadowOffsetX;\r\n            context.shadowOffsetY = this.shadowOffsetY;\r\n        }\r\n\r\n        const thumbPosition = this._getThumbPosition();\r\n        context.fillStyle = this._background;\r\n\r\n        if (this.isVertical) {\r\n            if (this.isThumbClamped) {\r\n                if (this.isThumbCircle) {\r\n                    context.beginPath();\r\n                    context.arc(left + this._backgroundBoxThickness / 2, top, radius, Math.PI, 2 * Math.PI);\r\n                    context.fill();\r\n                    context.fillRect(left, top, width, height);\r\n                }\r\n                else {\r\n                    context.fillRect(left, top, width, height + this._effectiveThumbThickness);\r\n                }\r\n            }\r\n            else {\r\n                context.fillRect(left, top, width, height);\r\n            }\r\n        }\r\n        else {\r\n            if (this.isThumbClamped) {\r\n                if (this.isThumbCircle) {\r\n                    context.beginPath();\r\n                    context.arc(left + this._backgroundBoxLength, top + (this._backgroundBoxThickness / 2), radius, 0, 2 * Math.PI);\r\n                    context.fill();\r\n                    context.fillRect(left, top, width, height);\r\n                }\r\n                else {\r\n                    context.fillRect(left, top, width + this._effectiveThumbThickness, height);\r\n                }\r\n            }\r\n            else {\r\n                context.fillRect(left, top, width, height);\r\n            }\r\n        }\r\n\r\n        if (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) {\r\n            context.shadowBlur = 0;\r\n            context.shadowOffsetX = 0;\r\n            context.shadowOffsetY = 0;\r\n        }\r\n\r\n        // Value bar\r\n        context.fillStyle = this.color;\r\n        if (this._displayValueBar) {\r\n            if (this.isVertical) {\r\n                if (this.isThumbClamped) {\r\n                    if (this.isThumbCircle) {\r\n                        context.beginPath();\r\n                        context.arc(left + this._backgroundBoxThickness / 2, top + this._backgroundBoxLength, radius, 0, 2 * Math.PI);\r\n                        context.fill();\r\n                        context.fillRect(left, top + thumbPosition, width, height - thumbPosition);\r\n                    }\r\n                    else {\r\n                        context.fillRect(left, top + thumbPosition, width, height - thumbPosition + this._effectiveThumbThickness);\r\n                    }\r\n                }\r\n                else {\r\n                    context.fillRect(left, top + thumbPosition, width, height - thumbPosition);\r\n                }\r\n            }\r\n            else {\r\n                if (this.isThumbClamped) {\r\n                    if (this.isThumbCircle) {\r\n                        context.beginPath();\r\n                        context.arc(left, top + this._backgroundBoxThickness / 2, radius, 0, 2 * Math.PI);\r\n                        context.fill();\r\n                        context.fillRect(left, top, thumbPosition, height);\r\n                    }\r\n                    else {\r\n                        context.fillRect(left, top, thumbPosition, height);\r\n                    }\r\n                }\r\n                else {\r\n                    context.fillRect(left, top, thumbPosition, height);\r\n                }\r\n            }\r\n        }\r\n\r\n        // Thumb\r\n        context.fillStyle = this._thumbColor || this.color;\r\n        if (this.displayThumb) {\r\n            if (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) {\r\n                context.shadowColor = this.shadowColor;\r\n                context.shadowBlur = this.shadowBlur;\r\n                context.shadowOffsetX = this.shadowOffsetX;\r\n                context.shadowOffsetY = this.shadowOffsetY;\r\n            }\r\n            if (this._isThumbCircle) {\r\n                context.beginPath();\r\n                if (this.isVertical) {\r\n                    context.arc(left + this._backgroundBoxThickness / 2, top + thumbPosition, radius, 0, 2 * Math.PI);\r\n                }\r\n                else {\r\n                    context.arc(left + thumbPosition, top + (this._backgroundBoxThickness / 2), radius, 0, 2 * Math.PI);\r\n                }\r\n                context.fill();\r\n                if (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) {\r\n                    context.shadowBlur = 0;\r\n                    context.shadowOffsetX = 0;\r\n                    context.shadowOffsetY = 0;\r\n                }\r\n                context.strokeStyle = this._borderColor;\r\n                context.stroke();\r\n            }\r\n            else {\r\n                if (this.isVertical) {\r\n                    context.fillRect(left - this._effectiveBarOffset, this._currentMeasure.top + thumbPosition, this._currentMeasure.width, this._effectiveThumbThickness);\r\n                }\r\n                else {\r\n                    context.fillRect(this._currentMeasure.left + thumbPosition, this._currentMeasure.top, this._effectiveThumbThickness, this._currentMeasure.height);\r\n                }\r\n                if (this.shadowBlur || this.shadowOffsetX || this.shadowOffsetY) {\r\n                    context.shadowBlur = 0;\r\n                    context.shadowOffsetX = 0;\r\n                    context.shadowOffsetY = 0;\r\n                }\r\n                context.strokeStyle = this._borderColor;\r\n                if (this.isVertical) {\r\n                    context.strokeRect(left - this._effectiveBarOffset, this._currentMeasure.top + thumbPosition, this._currentMeasure.width, this._effectiveThumbThickness);\r\n                }\r\n                else {\r\n                    context.strokeRect(this._currentMeasure.left + thumbPosition, this._currentMeasure.top, this._effectiveThumbThickness, this._currentMeasure.height);\r\n                }\r\n            }\r\n        }\r\n        context.restore();\r\n    }\r\n}\r\n_TypeStore.RegisteredTypes[\"BABYLON.GUI.Slider\"] = Slider;", "import { Rectangle } from \"./rectangle\";\r\nimport { StackPanel } from \"./stackPanel\";\r\nimport { Control } from \"./control\";\r\nimport { TextBlock } from \"./textBlock\";\r\nimport { Checkbox } from \"./checkbox\";\r\nimport { RadioButton } from \"./radioButton\";\r\nimport { Slider } from \"./sliders/slider\";\r\nimport { Container } from \"./container\";\r\n\r\n/** Class used to create a RadioGroup\r\n * which contains groups of radio buttons\r\n*/\r\nexport class SelectorGroup {\r\n    private _groupPanel = new StackPanel();\r\n    private _selectors: StackPanel[] = new Array();\r\n    private _groupHeader: TextBlock;\r\n\r\n    /**\r\n     * Creates a new SelectorGroup\r\n     * @param name of group, used as a group heading\r\n     */\r\n    constructor(\r\n        /** name of SelectorGroup */\r\n        public name: string) {\r\n\r\n        this._groupPanel.verticalAlignment = Control.VERTICAL_ALIGNMENT_TOP;\r\n        this._groupPanel.horizontalAlignment = Control.HORIZONTAL_ALIGNMENT_LEFT;\r\n        this._groupHeader = this._addGroupHeader(name);\r\n    }\r\n\r\n    /** Gets the groupPanel of the SelectorGroup  */\r\n    public get groupPanel(): StackPanel {\r\n        return this._groupPanel;\r\n    }\r\n\r\n    /** Gets the selectors array */\r\n    public get selectors(): StackPanel[] {\r\n        return this._selectors;\r\n    }\r\n\r\n    /** Gets and sets the group header */\r\n    public get header() {\r\n        return this._groupHeader.text;\r\n    }\r\n\r\n    public set header(label: string) {\r\n        if (this._groupHeader.text === \"label\") {\r\n            return;\r\n        }\r\n\r\n        this._groupHeader.text = label;\r\n    }\r\n\r\n    /** @hidden */\r\n    private _addGroupHeader(text: string): TextBlock {\r\n        var groupHeading = new TextBlock(\"groupHead\", text);\r\n        groupHeading.width = 0.9;\r\n        groupHeading.height = \"30px\";\r\n        groupHeading.textWrapping = true;\r\n        groupHeading.color = \"black\";\r\n        groupHeading.horizontalAlignment = Control.HORIZONTAL_ALIGNMENT_LEFT;\r\n        groupHeading.textHorizontalAlignment = Control.HORIZONTAL_ALIGNMENT_LEFT;\r\n        groupHeading.left = \"2px\";\r\n        this._groupPanel.addControl(groupHeading);\r\n        return groupHeading;\r\n    }\r\n\r\n    /** @hidden*/\r\n    public _getSelector(selectorNb: number) {\r\n        if (selectorNb < 0 || selectorNb >= this._selectors.length) {\r\n            return;\r\n        }\r\n        return this._selectors[selectorNb];\r\n    }\r\n\r\n    /** Removes the selector at the given position\r\n    * @param selectorNb the position of the selector within the group\r\n   */\r\n    public removeSelector(selectorNb: number) {\r\n        if (selectorNb < 0 || selectorNb >= this._selectors.length) {\r\n            return;\r\n        }\r\n        this._groupPanel.removeControl(this._selectors[selectorNb]);\r\n        this._selectors.splice(selectorNb, 1);\r\n    }\r\n\r\n}\r\n\r\n/** Class used to create a CheckboxGroup\r\n * which contains groups of checkbox buttons\r\n*/\r\nexport class CheckboxGroup extends SelectorGroup {\r\n    /** Adds a checkbox as a control\r\n     * @param text is the label for the selector\r\n     * @param func is the function called when the Selector is checked\r\n     * @param checked is true when Selector is checked\r\n     */\r\n    public addCheckbox(text: string, func = (s: boolean) => { }, checked: boolean = false): void {\r\n        var checked = checked || false;\r\n        var button = new Checkbox();\r\n        button.width = \"20px\";\r\n        button.height = \"20px\";\r\n        button.color = \"#364249\";\r\n        button.background = \"#CCCCCC\";\r\n        button.horizontalAlignment = Control.HORIZONTAL_ALIGNMENT_LEFT;\r\n\r\n        button.onIsCheckedChangedObservable.add(function(state) {\r\n            func(state);\r\n        });\r\n\r\n        var _selector = Control.AddHeader(button, text, \"200px\", { isHorizontal: true, controlFirst: true });\r\n        _selector.height = \"30px\";\r\n        _selector.horizontalAlignment = Control.HORIZONTAL_ALIGNMENT_LEFT;\r\n        _selector.left = \"4px\";\r\n\r\n        this.groupPanel.addControl(_selector);\r\n        this.selectors.push(_selector);\r\n        button.isChecked = checked;\r\n\r\n        if (this.groupPanel.parent && this.groupPanel.parent.parent) {\r\n            button.color = (<SelectionPanel>this.groupPanel.parent.parent).buttonColor;\r\n            button.background = (<SelectionPanel>this.groupPanel.parent.parent).buttonBackground;\r\n        }\r\n    }\r\n\r\n    /** @hidden */\r\n    public _setSelectorLabel(selectorNb: number, label: string) {\r\n        (<TextBlock>this.selectors[selectorNb].children[1]).text = label;\r\n    }\r\n\r\n    /** @hidden */\r\n    public _setSelectorLabelColor(selectorNb: number, color: string) {\r\n        (<TextBlock>this.selectors[selectorNb].children[1]).color = color;\r\n    }\r\n\r\n    /** @hidden */\r\n    public _setSelectorButtonColor(selectorNb: number, color: string) {\r\n        this.selectors[selectorNb].children[0].color = color;\r\n    }\r\n\r\n    /** @hidden */\r\n    public _setSelectorButtonBackground(selectorNb: number, color: string) {\r\n        (<Checkbox>this.selectors[selectorNb].children[0]).background = color;\r\n    }\r\n}\r\n\r\n/** Class used to create a RadioGroup\r\n * which contains groups of radio buttons\r\n*/\r\nexport class RadioGroup extends SelectorGroup {\r\n    private _selectNb = 0;\r\n\r\n    /** Adds a radio button as a control\r\n     * @param label is the label for the selector\r\n     * @param func is the function called when the Selector is checked\r\n     * @param checked is true when Selector is checked\r\n     */\r\n    public addRadio(label: string, func = (n: number) => { }, checked = false): void {\r\n        var nb = this._selectNb++;\r\n        var button = new RadioButton();\r\n        button.name = label;\r\n        button.width = \"20px\";\r\n        button.height = \"20px\";\r\n        button.color = \"#364249\";\r\n        button.background = \"#CCCCCC\";\r\n        button.group = this.name;\r\n        button.horizontalAlignment = Control.HORIZONTAL_ALIGNMENT_LEFT;\r\n\r\n        button.onIsCheckedChangedObservable.add(function(state) {\r\n            if (state) {\r\n                func(nb);\r\n            }\r\n        });\r\n\r\n        var _selector = Control.AddHeader(button, label, \"200px\", { isHorizontal: true, controlFirst: true });\r\n        _selector.height = \"30px\";\r\n        _selector.horizontalAlignment = Control.HORIZONTAL_ALIGNMENT_LEFT;\r\n        _selector.left = \"4px\";\r\n        this.groupPanel.addControl(_selector);\r\n        this.selectors.push(_selector);\r\n        button.isChecked = checked;\r\n\r\n        if (this.groupPanel.parent && this.groupPanel.parent.parent) {\r\n            button.color = (<SelectionPanel>this.groupPanel.parent.parent).buttonColor;\r\n            button.background = (<SelectionPanel>this.groupPanel.parent.parent).buttonBackground;\r\n        }\r\n    }\r\n\r\n    /** @hidden */\r\n    public _setSelectorLabel(selectorNb: number, label: string) {\r\n        (<TextBlock>this.selectors[selectorNb].children[1]).text = label;\r\n    }\r\n\r\n    /** @hidden */\r\n    public _setSelectorLabelColor(selectorNb: number, color: string) {\r\n        (<TextBlock>this.selectors[selectorNb].children[1]).color = color;\r\n    }\r\n\r\n    /** @hidden */\r\n    public _setSelectorButtonColor(selectorNb: number, color: string) {\r\n        this.selectors[selectorNb].children[0].color = color;\r\n    }\r\n\r\n    /** @hidden */\r\n    public _setSelectorButtonBackground(selectorNb: number, color: string) {\r\n        (<RadioButton>this.selectors[selectorNb].children[0]).background = color;\r\n    }\r\n}\r\n\r\n/** Class used to create a SliderGroup\r\n * which contains groups of slider buttons\r\n*/\r\nexport class SliderGroup extends SelectorGroup {\r\n    /**\r\n     * Adds a slider to the SelectorGroup\r\n     * @param label is the label for the SliderBar\r\n     * @param func is the function called when the Slider moves\r\n     * @param unit is a string describing the units used, eg degrees or metres\r\n     * @param min is the minimum value for the Slider\r\n     * @param max is the maximum value for the Slider\r\n     * @param value is the start value for the Slider between min and max\r\n     * @param onValueChange is the function used to format the value displayed, eg radians to degrees\r\n     */\r\n    public addSlider(label: string, func = (v: number) => { }, unit: string = \"Units\", min: number = 0, max: number = 0, value: number = 0, onValueChange = (v: number) => { return v | 0; }): void {\r\n        var button = new Slider();\r\n        button.name = unit;\r\n        button.value = value;\r\n        button.minimum = min;\r\n        button.maximum = max;\r\n        button.width = 0.9;\r\n        button.height = \"20px\";\r\n        button.color = \"#364249\";\r\n        button.background = \"#CCCCCC\";\r\n        button.borderColor = \"black\";\r\n        button.horizontalAlignment = Control.HORIZONTAL_ALIGNMENT_LEFT;\r\n        button.left = \"4px\";\r\n        button.paddingBottom = \"4px\";\r\n\r\n        button.onValueChangedObservable.add(function(value) {\r\n            (<TextBlock>button.parent!.children[0]).text = button.parent!.children[0].name + \": \" + onValueChange(value) + \" \" + button.name;\r\n            func(value);\r\n        });\r\n\r\n        var _selector = Control.AddHeader(button, label + \": \" + onValueChange(value) + \" \" + unit, \"30px\", { isHorizontal: false, controlFirst: false });\r\n        _selector.height = \"60px\";\r\n        _selector.horizontalAlignment = Control.HORIZONTAL_ALIGNMENT_LEFT;\r\n        _selector.left = \"4px\";\r\n        _selector.children[0].name = label;\r\n        this.groupPanel.addControl(_selector);\r\n        this.selectors.push(_selector);\r\n\r\n        if (this.groupPanel.parent && this.groupPanel.parent.parent) {\r\n            button.color = (<SelectionPanel>this.groupPanel.parent.parent).buttonColor;\r\n            button.background = (<SelectionPanel>this.groupPanel.parent.parent).buttonBackground;\r\n        }\r\n    }\r\n\r\n    /** @hidden */\r\n    public _setSelectorLabel(selectorNb: number, label: string) {\r\n        this.selectors[selectorNb].children[0].name = label;\r\n        (<TextBlock>this.selectors[selectorNb].children[0]).text = label + \": \" + (<Slider>this.selectors[selectorNb].children[1]).value + \" \" + this.selectors[selectorNb].children[1].name;\r\n    }\r\n\r\n    /** @hidden */\r\n    public _setSelectorLabelColor(selectorNb: number, color: string) {\r\n        (<TextBlock>this.selectors[selectorNb].children[0]).color = color;\r\n    }\r\n\r\n    /** @hidden */\r\n    public _setSelectorButtonColor(selectorNb: number, color: string) {\r\n        this.selectors[selectorNb].children[1].color = color;\r\n    }\r\n\r\n    /** @hidden */\r\n    public _setSelectorButtonBackground(selectorNb: number, color: string) {\r\n        (<Slider>this.selectors[selectorNb].children[1]).background = color;\r\n    }\r\n}\r\n\r\n/** Class used to hold the controls for the checkboxes, radio buttons and sliders\r\n * @see https://doc.babylonjs.com/how_to/selector\r\n*/\r\nexport class SelectionPanel extends Rectangle {\r\n    private _panel: StackPanel;\r\n    private _buttonColor: string = \"#364249\";\r\n    private _buttonBackground: string = \"#CCCCCC\";\r\n    private _headerColor: string = \"black\";\r\n    private _barColor: string = \"white\";\r\n    private _barHeight: string = \"2px\";\r\n    private _spacerHeight: string = \"20px\";\r\n    private _labelColor: string;\r\n    private _groups: SelectorGroup[];\r\n    private _bars: any[] = new Array();\r\n\r\n    /**\r\n    * Creates a new SelectionPanel\r\n    * @param name of SelectionPanel\r\n    * @param groups is an array of SelectionGroups\r\n    */\r\n    constructor(\r\n        /** name of SelectionPanel */\r\n        public name: string,\r\n        /** an array of SelectionGroups */\r\n        public groups: SelectorGroup[] = []) {\r\n        super(name);\r\n        this._groups = groups;\r\n        this.thickness = 2;\r\n        this._panel = new StackPanel();\r\n        this._panel.verticalAlignment = Control.VERTICAL_ALIGNMENT_TOP;\r\n        this._panel.horizontalAlignment = Control.HORIZONTAL_ALIGNMENT_LEFT;\r\n        this._panel.top = 5;\r\n        this._panel.left = 5;\r\n        this._panel.width = 0.95;\r\n        if (groups.length > 0) {\r\n            for (var i = 0; i < groups.length - 1; i++) {\r\n                this._panel.addControl(groups[i].groupPanel);\r\n                this._addSpacer();\r\n            }\r\n            this._panel.addControl(groups[groups.length - 1].groupPanel);\r\n        }\r\n        this.addControl(this._panel);\r\n    }\r\n\r\n    protected _getTypeName(): string {\r\n        return \"SelectionPanel\";\r\n    }\r\n\r\n    /** Gets the (stack) panel of the SelectionPanel  */\r\n    public get panel(): StackPanel {\r\n        return this._panel;\r\n    }\r\n\r\n    /** Gets or sets the headerColor */\r\n    public get headerColor(): string {\r\n        return this._headerColor;\r\n    }\r\n\r\n    public set headerColor(color: string) {\r\n        if (this._headerColor === color) {\r\n            return;\r\n        }\r\n        this._headerColor = color;\r\n        this._setHeaderColor();\r\n\r\n    }\r\n\r\n    private _setHeaderColor() {\r\n        for (var i = 0; i < this._groups.length; i++) {\r\n            this._groups[i].groupPanel.children[0].color = this._headerColor;\r\n        }\r\n    }\r\n\r\n    /** Gets or sets the button color */\r\n    public get buttonColor(): string {\r\n        return this._buttonColor;\r\n    }\r\n\r\n    public set buttonColor(color: string) {\r\n        if (this._buttonColor === color) {\r\n            return;\r\n        }\r\n\r\n        this._buttonColor = color;\r\n        this._setbuttonColor();\r\n\r\n    }\r\n\r\n    private _setbuttonColor() {\r\n        for (var i = 0; i < this._groups.length; i++) {\r\n            for (var j = 0; j < this._groups[i].selectors.length; j++) {\r\n                (<CheckboxGroup | RadioGroup | SliderGroup>this._groups[i])._setSelectorButtonColor(j, this._buttonColor);\r\n            }\r\n        }\r\n    }\r\n\r\n    /** Gets or sets the label color */\r\n    public get labelColor(): string {\r\n        return this._labelColor;\r\n    }\r\n\r\n    public set labelColor(color: string) {\r\n        if (this._labelColor === color) {\r\n            return;\r\n        }\r\n        this._labelColor = color;\r\n        this._setLabelColor();\r\n    }\r\n\r\n    private _setLabelColor() {\r\n        for (var i = 0; i < this._groups.length; i++) {\r\n            for (var j = 0; j < this._groups[i].selectors.length; j++) {\r\n                (<CheckboxGroup | RadioGroup | SliderGroup>this._groups[i])._setSelectorLabelColor(j, this._labelColor);\r\n            }\r\n        }\r\n    }\r\n\r\n    /** Gets or sets the button background */\r\n    public get buttonBackground(): string {\r\n        return this._buttonBackground;\r\n    }\r\n\r\n    public set buttonBackground(color: string) {\r\n        if (this._buttonBackground === color) {\r\n            return;\r\n        }\r\n\r\n        this._buttonBackground = color;\r\n        this._setButtonBackground();\r\n\r\n    }\r\n\r\n    private _setButtonBackground() {\r\n        for (var i = 0; i < this._groups.length; i++) {\r\n            for (var j = 0; j < this._groups[i].selectors.length; j++) {\r\n                (<CheckboxGroup | RadioGroup | SliderGroup>this._groups[i])._setSelectorButtonBackground(j, this._buttonBackground);\r\n            }\r\n        }\r\n    }\r\n\r\n    /** Gets or sets the color of separator bar */\r\n    public get barColor(): string {\r\n        return this._barColor;\r\n    }\r\n\r\n    public set barColor(color: string) {\r\n        if (this._barColor === color) {\r\n            return;\r\n        }\r\n\r\n        this._barColor = color;\r\n        this._setBarColor();\r\n    }\r\n\r\n    private _setBarColor() {\r\n        for (var i = 0; i < this._bars.length; i++) {\r\n            this._bars[i].children[0].background = this._barColor;\r\n        }\r\n    }\r\n\r\n    /** Gets or sets the height of separator bar */\r\n    public get barHeight(): string {\r\n        return this._barHeight;\r\n    }\r\n\r\n    public set barHeight(value: string) {\r\n        if (this._barHeight === value) {\r\n            return;\r\n        }\r\n\r\n        this._barHeight = value;\r\n        this._setBarHeight();\r\n    }\r\n\r\n    private _setBarHeight() {\r\n        for (var i = 0; i < this._bars.length; i++) {\r\n            this._bars[i].children[0].height = this._barHeight;\r\n        }\r\n    }\r\n\r\n    /** Gets or sets the height of spacers*/\r\n    public get spacerHeight(): string {\r\n        return this._spacerHeight;\r\n    }\r\n\r\n    public set spacerHeight(value: string) {\r\n        if (this._spacerHeight === value) {\r\n            return;\r\n        }\r\n\r\n        this._spacerHeight = value;\r\n        this._setSpacerHeight();\r\n    }\r\n\r\n    private _setSpacerHeight() {\r\n        for (var i = 0; i < this._bars.length; i++) {\r\n            this._bars[i].height = this._spacerHeight;\r\n        }\r\n    }\r\n\r\n    /** Adds a bar between groups */\r\n    private _addSpacer(): void {\r\n        var separator = new Container();\r\n        separator.width = 1;\r\n        separator.height = this._spacerHeight;\r\n        separator.horizontalAlignment = Control.HORIZONTAL_ALIGNMENT_LEFT;\r\n\r\n        var bar = new Rectangle();\r\n        bar.width = 1;\r\n        bar.height = this._barHeight;\r\n        bar.horizontalAlignment = Control.HORIZONTAL_ALIGNMENT_LEFT;\r\n        bar.verticalAlignment = Control.VERTICAL_ALIGNMENT_CENTER;\r\n        bar.background = this._barColor;\r\n        bar.color = \"transparent\";\r\n        separator.addControl(bar);\r\n\r\n        this._panel.addControl(separator);\r\n        this._bars.push(separator);\r\n    }\r\n\r\n    /** Add a group to the selection panel\r\n     * @param group is the selector group to add\r\n     */\r\n    public addGroup(group: SelectorGroup): void {\r\n        if (this._groups.length > 0) {\r\n            this._addSpacer();\r\n        }\r\n        this._panel.addControl(group.groupPanel);\r\n        this._groups.push(group);\r\n        group.groupPanel.children[0].color = this._headerColor;\r\n        for (var j = 0; j < group.selectors.length; j++) {\r\n            (<CheckboxGroup | RadioGroup | SliderGroup>group)._setSelectorButtonColor(j, this._buttonColor);\r\n            (<CheckboxGroup | RadioGroup | SliderGroup>group)._setSelectorButtonBackground(j, this._buttonBackground);\r\n        }\r\n    }\r\n\r\n    /** Remove the group from the given position\r\n     * @param groupNb is the position of the group in the list\r\n     */\r\n    public removeGroup(groupNb: number): void {\r\n        if (groupNb < 0 || groupNb >= this._groups.length) {\r\n            return;\r\n        }\r\n        var group = this._groups[groupNb];\r\n        this._panel.removeControl(group.groupPanel);\r\n        this._groups.splice(groupNb, 1);\r\n        if (groupNb < this._bars.length) {\r\n            this._panel.removeControl(this._bars[groupNb]);\r\n            this._bars.splice(groupNb, 1);\r\n        }\r\n    }\r\n\r\n    /** Change a group header label\r\n     * @param label is the new group header label\r\n     * @param groupNb is the number of the group to relabel\r\n     * */\r\n    public setHeaderName(label: string, groupNb: number) {\r\n        if (groupNb < 0 || groupNb >= this._groups.length) {\r\n            return;\r\n        }\r\n        var group = this._groups[groupNb];\r\n        (<TextBlock>group.groupPanel.children[0]).text = label;\r\n    }\r\n\r\n    /** Change selector label to the one given\r\n     * @param label is the new selector label\r\n     * @param groupNb is the number of the groupcontaining the selector\r\n     * @param selectorNb is the number of the selector within a group to relabel\r\n     * */\r\n    public relabel(label: string, groupNb: number, selectorNb: number): void {\r\n        if (groupNb < 0 || groupNb >= this._groups.length) {\r\n            return;\r\n        }\r\n        var group = this._groups[groupNb];\r\n        if (selectorNb < 0 || selectorNb >= group.selectors.length) {\r\n            return;\r\n        }\r\n        (<CheckboxGroup | RadioGroup | SliderGroup>group)._setSelectorLabel(selectorNb, label);\r\n    }\r\n\r\n    /** For a given group position remove the selector at the given position\r\n     * @param groupNb is the number of the group to remove the selector from\r\n     * @param selectorNb is the number of the selector within the group\r\n     */\r\n    public removeFromGroupSelector(groupNb: number, selectorNb: number): void {\r\n        if (groupNb < 0 || groupNb >= this._groups.length) {\r\n            return;\r\n        }\r\n        var group = this._groups[groupNb];\r\n        if (selectorNb < 0 || selectorNb >= group.selectors.length) {\r\n            return;\r\n        }\r\n        group.removeSelector(selectorNb);\r\n    }\r\n\r\n    /** For a given group position of correct type add a checkbox button\r\n     * @param groupNb is the number of the group to remove the selector from\r\n     * @param label is the label for the selector\r\n     * @param func is the function called when the Selector is checked\r\n     * @param checked is true when Selector is checked\r\n     */\r\n    public addToGroupCheckbox(groupNb: number, label: string, func = () => { }, checked: boolean = false): void {\r\n        if (groupNb < 0 || groupNb >= this._groups.length) {\r\n            return;\r\n        }\r\n        var group = this._groups[groupNb];\r\n        (<CheckboxGroup>group).addCheckbox(label, func, checked);\r\n    }\r\n\r\n    /** For a given group position of correct type add a radio button\r\n     * @param groupNb is the number of the group to remove the selector from\r\n     * @param label is the label for the selector\r\n     * @param func is the function called when the Selector is checked\r\n     * @param checked is true when Selector is checked\r\n     */\r\n    public addToGroupRadio(groupNb: number, label: string, func = () => { }, checked: boolean = false): void {\r\n        if (groupNb < 0 || groupNb >= this._groups.length) {\r\n            return;\r\n        }\r\n        var group = this._groups[groupNb];\r\n        (<RadioGroup>group).addRadio(label, func, checked);\r\n    }\r\n\r\n    /**\r\n     * For a given slider group add a slider\r\n     * @param groupNb is the number of the group to add the slider to\r\n     * @param label is the label for the Slider\r\n     * @param func is the function called when the Slider moves\r\n     * @param unit is a string describing the units used, eg degrees or metres\r\n     * @param min is the minimum value for the Slider\r\n     * @param max is the maximum value for the Slider\r\n     * @param value is the start value for the Slider between min and max\r\n     * @param onVal is the function used to format the value displayed, eg radians to degrees\r\n     */\r\n    public addToGroupSlider(groupNb: number, label: string, func = () => { }, unit: string = \"Units\", min: number = 0, max: number = 0, value: number = 0, onVal = (v: number) => { return v | 0; }): void {\r\n        if (groupNb < 0 || groupNb >= this._groups.length) {\r\n            return;\r\n        }\r\n        var group = this._groups[groupNb];\r\n        (<SliderGroup>group).addSlider(label, func, unit, min, max, value, onVal);\r\n    }\r\n\r\n}", "import { Measure } from \"../../measure\";\r\nimport { Container } from \"../container\";\r\nimport { ValueAndUnit } from \"../../valueAndUnit\";\r\nimport { Control } from \"../control\";\r\n\r\n/**\r\n * Class used to hold a the container for ScrollViewer\r\n * @hidden\r\n*/\r\nexport class _ScrollViewerWindow extends Container {\r\n    public parentClientWidth: number;\r\n    public parentClientHeight: number;\r\n\r\n    private _freezeControls = false;\r\n    private _parentMeasure: Measure;\r\n    private _oldLeft: number | null;\r\n    private _oldTop: number | null;\r\n\r\n    public get freezeControls(): boolean {\r\n        return this._freezeControls;\r\n    }\r\n\r\n    public set freezeControls(value: boolean) {\r\n        if (this._freezeControls === value) {\r\n            return;\r\n        }\r\n\r\n        if (!value) {\r\n            this._restoreMeasures();\r\n        }\r\n\r\n        // trigger a full normal layout calculation to be sure all children have their measures up to date\r\n        this._freezeControls = false;\r\n\r\n        var textureSize = this.host.getSize();\r\n        var renderWidth = textureSize.width;\r\n        var renderHeight = textureSize.height;\r\n\r\n        var context = this.host.getContext();\r\n\r\n        var measure = new Measure(0, 0, renderWidth, renderHeight);\r\n\r\n        this.host._numLayoutCalls = 0;\r\n\r\n        this.host._rootContainer._layout(measure, context);\r\n\r\n        // in freeze mode, prepare children measures accordingly\r\n        if (value) {\r\n            this._updateMeasures();\r\n            if (this._useBuckets()) {\r\n                this._makeBuckets();\r\n            }\r\n        }\r\n\r\n        this._freezeControls = value;\r\n\r\n        this.host.markAsDirty(); // redraw with the (new) current settings\r\n    }\r\n\r\n    private _bucketWidth: number = 0;\r\n    private _bucketHeight: number = 0;\r\n    private _buckets: { [key: number]: Array<Control> } = {};\r\n    private _bucketLen: number;\r\n\r\n    public get bucketWidth(): number {\r\n        return this._bucketWidth;\r\n    }\r\n\r\n    public get bucketHeight(): number {\r\n        return this._bucketHeight;\r\n    }\r\n\r\n    public setBucketSizes(width: number, height: number): void {\r\n        this._bucketWidth = width;\r\n        this._bucketHeight = height;\r\n\r\n        if (this._useBuckets()) {\r\n            if (this._freezeControls) {\r\n                this._makeBuckets();\r\n            }\r\n        } else {\r\n            this._buckets = {};\r\n        }\r\n    }\r\n\r\n    private _useBuckets(): boolean {\r\n        return this._bucketWidth > 0 && this._bucketHeight > 0;\r\n    }\r\n\r\n    private _makeBuckets(): void {\r\n        this._buckets = {};\r\n        this._bucketLen = Math.ceil(this.widthInPixels / this._bucketWidth);\r\n        this._dispatchInBuckets(this._children);\r\n        this._oldLeft = null;\r\n        this._oldTop = null;\r\n    }\r\n\r\n    private _dispatchInBuckets(children: Control[]): void {\r\n        for (let i = 0; i < children.length; ++i) {\r\n            let child = children[i];\r\n\r\n            let bStartX = Math.max(0, Math.floor((child._customData._origLeft - this._customData.origLeft) / this._bucketWidth)),\r\n                bEndX = Math.floor((child._customData._origLeft - this._customData.origLeft + child._currentMeasure.width - 1) / this._bucketWidth),\r\n                bStartY = Math.max(0, Math.floor((child._customData._origTop - this._customData.origTop) / this._bucketHeight)),\r\n                bEndY = Math.floor((child._customData._origTop - this._customData.origTop + child._currentMeasure.height - 1) / this._bucketHeight);\r\n\r\n            while (bStartY <= bEndY) {\r\n                for (let x = bStartX; x <= bEndX; ++x) {\r\n                    let bucket = bStartY * this._bucketLen + x,\r\n                        lstc = this._buckets[bucket];\r\n\r\n                    if (!lstc) {\r\n                        lstc = [];\r\n                        this._buckets[bucket] = lstc;\r\n                    }\r\n\r\n                    lstc.push(child);\r\n                }\r\n                bStartY++;\r\n            }\r\n\r\n            if (child instanceof Container && child._children.length > 0) {\r\n                this._dispatchInBuckets(child._children);\r\n            }\r\n        }\r\n    }\r\n\r\n    // reset left and top measures for the window and all its children\r\n    private _updateMeasures(): void {\r\n        let left = this.leftInPixels | 0,\r\n            top = this.topInPixels | 0;\r\n\r\n        this._measureForChildren.left -= left;\r\n        this._measureForChildren.top -= top;\r\n        this._currentMeasure.left -= left;\r\n        this._currentMeasure.top -= top;\r\n\r\n        this._customData.origLeftForChildren = this._measureForChildren.left;\r\n        this._customData.origTopForChildren = this._measureForChildren.top;\r\n        this._customData.origLeft = this._currentMeasure.left;\r\n        this._customData.origTop = this._currentMeasure.top;\r\n\r\n        this._updateChildrenMeasures(this._children, left, top);\r\n    }\r\n\r\n    private _updateChildrenMeasures(children: Control[], left: number, top: number): void {\r\n        for (let i = 0; i < children.length; ++i) {\r\n            let child = children[i];\r\n\r\n            child._currentMeasure.left -= left;\r\n            child._currentMeasure.top -= top;\r\n\r\n            child._customData._origLeft = child._currentMeasure.left; // save the original left and top values for each child\r\n            child._customData._origTop = child._currentMeasure.top;\r\n\r\n            if (child instanceof Container && child._children.length > 0) {\r\n                this._updateChildrenMeasures(child._children, left, top);\r\n            }\r\n        }\r\n    }\r\n\r\n    private _restoreMeasures(): void {\r\n        let left = this.leftInPixels | 0,\r\n            top = this.topInPixels | 0;\r\n\r\n        this._measureForChildren.left = this._customData.origLeftForChildren + left;\r\n        this._measureForChildren.top = this._customData.origTopForChildren + top;\r\n        this._currentMeasure.left = this._customData.origLeft + left;\r\n        this._currentMeasure.top = this._customData.origTop + top;\r\n    }\r\n\r\n    /**\r\n    * Creates a new ScrollViewerWindow\r\n    * @param name of ScrollViewerWindow\r\n    */\r\n    constructor(name?: string) {\r\n        super(name);\r\n    }\r\n\r\n    protected _getTypeName(): string {\r\n        return \"ScrollViewerWindow\";\r\n    }\r\n\r\n    /** @hidden */\r\n    protected _additionalProcessing(parentMeasure: Measure, context: CanvasRenderingContext2D): void {\r\n        super._additionalProcessing(parentMeasure, context);\r\n\r\n        this._parentMeasure = parentMeasure;\r\n\r\n        this._measureForChildren.left = this._currentMeasure.left;\r\n        this._measureForChildren.top = this._currentMeasure.top;\r\n\r\n        this._measureForChildren.width = parentMeasure.width;\r\n        this._measureForChildren.height = parentMeasure.height;\r\n    }\r\n\r\n    /** @hidden */\r\n    public _layout(parentMeasure: Measure, context: CanvasRenderingContext2D): boolean {\r\n        if (this._freezeControls) {\r\n            this.invalidateRect(); // will trigger a redraw of the window\r\n            return false;\r\n        }\r\n\r\n        return super._layout(parentMeasure, context);\r\n    }\r\n\r\n    private _scrollChildren(children: Control[], left: number, top: number): void {\r\n        for (let i = 0; i < children.length; ++i) {\r\n            let child = children[i];\r\n\r\n            child._currentMeasure.left = child._customData._origLeft + left;\r\n            child._currentMeasure.top = child._customData._origTop + top;\r\n            child._isClipped = false; // clipping will be handled by _draw and the call to _intersectsRect()\r\n\r\n            if (child instanceof Container && child._children.length > 0) {\r\n                this._scrollChildren(child._children, left, top);\r\n            }\r\n        }\r\n    }\r\n\r\n    private _scrollChildrenWithBuckets(left: number, top: number, scrollLeft: number, scrollTop: number): void {\r\n        let bStartX = Math.max(0, Math.floor(-left / this._bucketWidth)),\r\n            bEndX = Math.floor((-left + this._parentMeasure.width - 1) / this._bucketWidth),\r\n            bStartY = Math.max(0, Math.floor(-top / this._bucketHeight)),\r\n            bEndY = Math.floor((-top + this._parentMeasure.height - 1) / this._bucketHeight);\r\n\r\n        while (bStartY <= bEndY) {\r\n            for (let x = bStartX; x <= bEndX; ++x) {\r\n                let bucket = bStartY * this._bucketLen + x,\r\n                    lstc = this._buckets[bucket];\r\n\r\n                if (lstc) {\r\n                    for (let i = 0; i < lstc.length; ++i) {\r\n                        let child = lstc[i];\r\n                        child._currentMeasure.left = child._customData._origLeft + scrollLeft;\r\n                        child._currentMeasure.top = child._customData._origTop + scrollTop;\r\n                        child._isClipped = false; // clipping will be handled by _draw and the call to _intersectsRect()\r\n                    }\r\n                }\r\n            }\r\n            bStartY++;\r\n        }\r\n    }\r\n\r\n    /** @hidden */\r\n    public _draw(context: CanvasRenderingContext2D, invalidatedRectangle?: Measure): void {\r\n        if (!this._freezeControls) {\r\n            super._draw(context, invalidatedRectangle);\r\n            return;\r\n        }\r\n\r\n        this._localDraw(context);\r\n\r\n        if (this.clipChildren) {\r\n            this._clipForChildren(context);\r\n        }\r\n\r\n        let left = this.leftInPixels | 0,\r\n            top = this.topInPixels | 0;\r\n\r\n        if (this._useBuckets()) {\r\n            if (this._oldLeft !== null && this._oldTop !== null) {\r\n                this._scrollChildrenWithBuckets(this._oldLeft, this._oldTop, left, top);\r\n                this._scrollChildrenWithBuckets(left, top, left, top);\r\n            } else {\r\n                this._scrollChildren(this._children, left, top);\r\n            }\r\n        } else {\r\n            this._scrollChildren(this._children, left, top);\r\n        }\r\n\r\n        this._oldLeft = left;\r\n        this._oldTop = top;\r\n\r\n        for (var child of this._children) {\r\n            if (!child._intersectsRect(this._parentMeasure)) {\r\n                continue;\r\n            }\r\n            child._render(context, this._parentMeasure);\r\n        }\r\n    }\r\n\r\n    protected _postMeasure(): void {\r\n        if (this._freezeControls) {\r\n            super._postMeasure();\r\n            return;\r\n        }\r\n\r\n        var maxWidth = this.parentClientWidth;\r\n        var maxHeight = this.parentClientHeight;\r\n        for (var child of this.children) {\r\n            if (!child.isVisible || child.notRenderable) {\r\n                continue;\r\n            }\r\n\r\n            if (child.horizontalAlignment === Control.HORIZONTAL_ALIGNMENT_CENTER) {\r\n                child._offsetLeft(this._currentMeasure.left - child._currentMeasure.left);\r\n            }\r\n\r\n            if (child.verticalAlignment === Control.VERTICAL_ALIGNMENT_CENTER) {\r\n                child._offsetTop(this._currentMeasure.top - child._currentMeasure.top);\r\n            }\r\n\r\n            maxWidth = Math.max(maxWidth, child._currentMeasure.left - this._currentMeasure.left + child._currentMeasure.width + child.paddingRightInPixels);\r\n            maxHeight = Math.max(maxHeight, child._currentMeasure.top - this._currentMeasure.top + child._currentMeasure.height + child.paddingBottomInPixels);\r\n        }\r\n\r\n        if (this._currentMeasure.width !== maxWidth) {\r\n            this._width.updateInPlace(maxWidth, ValueAndUnit.UNITMODE_PIXEL);\r\n            this._currentMeasure.width = maxWidth;\r\n            this._rebuildLayout = true;\r\n            this._isDirty = true;\r\n        }\r\n\r\n        if (this._currentMeasure.height !== maxHeight) {\r\n            this._height.updateInPlace(maxHeight, ValueAndUnit.UNITMODE_PIXEL);\r\n            this._currentMeasure.height = maxHeight;\r\n            this._rebuildLayout = true;\r\n            this._isDirty = true;\r\n        }\r\n\r\n        super._postMeasure();\r\n    }\r\n\r\n}", "import { Vector2 } from \"@babylonjs/core/Maths/math.vector\";\r\nimport { BaseSlider } from \"./baseSlider\";\r\nimport { Control } from \"../control\";\r\nimport { Measure } from \"../../measure\";\r\nimport { PointerInfoBase } from '@babylonjs/core/Events/pointerEvents';\r\n\r\n/**\r\n * Class used to create slider controls\r\n */\r\nexport class ScrollBar extends BaseSlider {\r\n    private _background = \"black\";\r\n    private _borderColor = \"white\";\r\n    private _tempMeasure = new Measure(0, 0, 0, 0);\r\n\r\n    /** Gets or sets border color */\r\n    public get borderColor(): string {\r\n        return this._borderColor;\r\n    }\r\n\r\n    public set borderColor(value: string) {\r\n        if (this._borderColor === value) {\r\n            return;\r\n        }\r\n\r\n        this._borderColor = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets background color */\r\n    public get background(): string {\r\n        return this._background;\r\n    }\r\n\r\n    public set background(value: string) {\r\n        if (this._background === value) {\r\n            return;\r\n        }\r\n\r\n        this._background = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Creates a new Slider\r\n     * @param name defines the control name\r\n     */\r\n    constructor(public name?: string) {\r\n        super(name);\r\n    }\r\n\r\n    protected _getTypeName(): string {\r\n        return \"Scrollbar\";\r\n    }\r\n\r\n    protected _getThumbThickness(): number {\r\n        var thumbThickness = 0;\r\n        if (this._thumbWidth.isPixel) {\r\n            thumbThickness = this._thumbWidth.getValue(this._host);\r\n        }\r\n        else {\r\n            thumbThickness = this._backgroundBoxThickness * this._thumbWidth.getValue(this._host);\r\n        }\r\n        return thumbThickness;\r\n    }\r\n\r\n    public _draw(context: CanvasRenderingContext2D): void {\r\n        context.save();\r\n\r\n        this._applyStates(context);\r\n        this._prepareRenderingData(\"rectangle\");\r\n        var left = this._renderLeft;\r\n\r\n        const thumbPosition = this._getThumbPosition();\r\n        context.fillStyle = this._background;\r\n\r\n        context.fillRect(this._currentMeasure.left, this._currentMeasure.top, this._currentMeasure.width, this._currentMeasure.height);\r\n\r\n        // Value bar\r\n        context.fillStyle = this.color;\r\n\r\n        // Thumb\r\n        if (this.isVertical) {\r\n            this._tempMeasure.left = left - this._effectiveBarOffset;\r\n            this._tempMeasure.top = this._currentMeasure.top + thumbPosition;\r\n            this._tempMeasure.width = this._currentMeasure.width;\r\n            this._tempMeasure.height = this._effectiveThumbThickness;\r\n        }\r\n        else {\r\n            this._tempMeasure.left = this._currentMeasure.left + thumbPosition;\r\n            this._tempMeasure.top = this._currentMeasure.top;\r\n            this._tempMeasure.width = this._effectiveThumbThickness;\r\n            this._tempMeasure.height = this._currentMeasure.height;\r\n        }\r\n\r\n        context.fillRect(this._tempMeasure.left, this._tempMeasure.top, this._tempMeasure.width, this._tempMeasure.height);\r\n\r\n        context.restore();\r\n    }\r\n\r\n    private _first: boolean;\r\n    private _originX: number;\r\n    private _originY: number;\r\n\r\n    /** @hidden */\r\n    protected _updateValueFromPointer(x: number, y: number): void {\r\n        if (this.rotation != 0) {\r\n            this._invertTransformMatrix.transformCoordinates(x, y, this._transformedPosition);\r\n            x = this._transformedPosition.x;\r\n            y = this._transformedPosition.y;\r\n        }\r\n\r\n        if (this._first) {\r\n            this._first = false;\r\n            this._originX = x;\r\n            this._originY = y;\r\n\r\n            // Check if move is required\r\n            if (x < this._tempMeasure.left || x > this._tempMeasure.left + this._tempMeasure.width || y < this._tempMeasure.top || y > this._tempMeasure.top + this._tempMeasure.height) {\r\n                if (this.isVertical) {\r\n                    this.value = this.minimum + (1 - ((y - this._currentMeasure.top) / this._currentMeasure.height)) * (this.maximum - this.minimum);\r\n                }\r\n                else {\r\n                    this.value = this.minimum + ((x - this._currentMeasure.left) / this._currentMeasure.width) * (this.maximum - this.minimum);\r\n                }\r\n            }\r\n        }\r\n\r\n        // Delta mode\r\n        let delta = 0;\r\n        if (this.isVertical) {\r\n            delta = -((y - this._originY) / (this._currentMeasure.height - this._effectiveThumbThickness));\r\n        }\r\n        else {\r\n            delta = (x - this._originX) / (this._currentMeasure.width - this._effectiveThumbThickness);\r\n        }\r\n\r\n        this.value += delta * (this.maximum - this.minimum);\r\n\r\n        this._originX = x;\r\n        this._originY = y;\r\n    }\r\n\r\n    public _onPointerDown(target: Control, coordinates: Vector2, pointerId: number, buttonIndex: number, pi: PointerInfoBase): boolean {\r\n        this._first = true;\r\n\r\n        return super._onPointerDown(target, coordinates, pointerId, buttonIndex, pi);\r\n    }\r\n}\r\n", "import { Vector2 } from \"@babylonjs/core/Maths/math.vector\";\r\nimport { BaseSlider } from \"./baseSlider\";\r\nimport { Control } from \"../control\";\r\nimport { Image } from \"../image\";\r\nimport { Measure } from \"../../measure\";\r\nimport { PointerInfoBase } from '@babylonjs/core/Events/pointerEvents';\r\n\r\n/**\r\n * Class used to create slider controls\r\n */\r\nexport class ImageScrollBar extends BaseSlider {\r\n    private _backgroundBaseImage: Image;\r\n    private _backgroundImage: Image;\r\n    private _thumbImage: Image;\r\n    private _thumbBaseImage: Image;\r\n    private _thumbLength: number = 0.5;\r\n    private _thumbHeight: number = 1;\r\n    private _barImageHeight: number = 1;\r\n    private _tempMeasure = new Measure(0, 0, 0, 0);\r\n\r\n    /** Number of 90\u00B0 rotation to apply on the images when in vertical mode */\r\n    public num90RotationInVerticalMode = 1;\r\n\r\n    /**\r\n     * Gets or sets the image used to render the background for horizontal bar\r\n     */\r\n    public get backgroundImage(): Image {\r\n        return this._backgroundBaseImage;\r\n    }\r\n\r\n    public set backgroundImage(value: Image) {\r\n        if (this._backgroundBaseImage === value) {\r\n            return;\r\n        }\r\n\r\n        this._backgroundBaseImage = value;\r\n\r\n        if (this.isVertical && this.num90RotationInVerticalMode !== 0) {\r\n            if (!value.isLoaded) {\r\n                value.onImageLoadedObservable.addOnce(() => {\r\n                    const rotatedValue = value._rotate90(this.num90RotationInVerticalMode, true);\r\n                    this._backgroundImage = rotatedValue;\r\n                    if (!rotatedValue.isLoaded) {\r\n                        rotatedValue.onImageLoadedObservable.addOnce(() => {\r\n                            this._markAsDirty();\r\n                        });\r\n                    }\r\n                    this._markAsDirty();\r\n                });\r\n            } else {\r\n                this._backgroundImage = value._rotate90(this.num90RotationInVerticalMode, true);\r\n                this._markAsDirty();\r\n            }\r\n        }\r\n        else {\r\n            this._backgroundImage = value;\r\n            if (value && !value.isLoaded) {\r\n                value.onImageLoadedObservable.addOnce(() => {\r\n                    this._markAsDirty();\r\n                });\r\n            }\r\n\r\n            this._markAsDirty();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the image used to render the thumb\r\n     */\r\n    public get thumbImage(): Image {\r\n        return this._thumbBaseImage;\r\n    }\r\n\r\n    public set thumbImage(value: Image) {\r\n        if (this._thumbBaseImage === value) {\r\n            return;\r\n        }\r\n\r\n        this._thumbBaseImage = value;\r\n\r\n        if (this.isVertical && this.num90RotationInVerticalMode !== 0) {\r\n            if (!value.isLoaded) {\r\n                value.onImageLoadedObservable.addOnce(() => {\r\n                    var rotatedValue = value._rotate90(-this.num90RotationInVerticalMode, true);\r\n                    this._thumbImage = rotatedValue;\r\n                    if (!rotatedValue.isLoaded) {\r\n                        rotatedValue.onImageLoadedObservable.addOnce(() => {\r\n                            this._markAsDirty();\r\n                        });\r\n                    }\r\n                    this._markAsDirty();\r\n                });\r\n            } else {\r\n                this._thumbImage = value._rotate90(-this.num90RotationInVerticalMode, true);\r\n                this._markAsDirty();\r\n            }\r\n        }\r\n        else {\r\n            this._thumbImage = value;\r\n            if (value && !value.isLoaded) {\r\n                value.onImageLoadedObservable.addOnce(() => {\r\n                    this._markAsDirty();\r\n                });\r\n            }\r\n\r\n            this._markAsDirty();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the length of the thumb\r\n     */\r\n    public get thumbLength(): number {\r\n        return this._thumbLength;\r\n    }\r\n\r\n    public set thumbLength(value: number) {\r\n        if (this._thumbLength === value) {\r\n            return;\r\n        }\r\n\r\n        this._thumbLength = value;\r\n\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the height of the thumb\r\n     */\r\n    public get thumbHeight(): number {\r\n        return this._thumbHeight;\r\n    }\r\n\r\n    public set thumbHeight(value: number) {\r\n        if (this._thumbLength === value) {\r\n            return;\r\n        }\r\n\r\n        this._thumbHeight = value;\r\n\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the height of the bar image\r\n     */\r\n    public get barImageHeight(): number {\r\n        return this._barImageHeight;\r\n    }\r\n\r\n    public set barImageHeight(value: number) {\r\n        if (this._barImageHeight === value) {\r\n            return;\r\n        }\r\n\r\n        this._barImageHeight = value;\r\n\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Creates a new ImageScrollBar\r\n     * @param name defines the control name\r\n     */\r\n    constructor(public name?: string) {\r\n        super(name);\r\n    }\r\n\r\n    protected _getTypeName(): string {\r\n        return \"ImageScrollBar\";\r\n    }\r\n\r\n    protected _getThumbThickness(): number {\r\n        var thumbThickness = 0;\r\n        if (this._thumbWidth.isPixel) {\r\n            thumbThickness = this._thumbWidth.getValue(this._host);\r\n        }\r\n        else {\r\n            thumbThickness = this._backgroundBoxThickness * this._thumbWidth.getValue(this._host);\r\n        }\r\n        return thumbThickness;\r\n    }\r\n\r\n    public _draw(context: CanvasRenderingContext2D): void {\r\n        context.save();\r\n\r\n        this._applyStates(context);\r\n\r\n        this._prepareRenderingData(\"rectangle\");\r\n        const thumbPosition = this._getThumbPosition();\r\n        var left = this._renderLeft;\r\n        var top = this._renderTop;\r\n        var width = this._renderWidth;\r\n        var height = this._renderHeight;\r\n\r\n        // Background\r\n        if (this._backgroundImage) {\r\n            this._tempMeasure.copyFromFloats(left, top, width, height);\r\n            if (this.isVertical) {\r\n                this._tempMeasure.copyFromFloats(left + width * (1 - this._barImageHeight) * 0.5, this._currentMeasure.top, width * this._barImageHeight, height);\r\n                this._tempMeasure.height += this._effectiveThumbThickness;\r\n                this._backgroundImage._currentMeasure.copyFrom(this._tempMeasure);\r\n            }\r\n            else {\r\n                this._tempMeasure.copyFromFloats(this._currentMeasure.left, top + height * (1 - this._barImageHeight) * 0.5, width, height * this._barImageHeight);\r\n                this._tempMeasure.width += this._effectiveThumbThickness;\r\n                this._backgroundImage._currentMeasure.copyFrom(this._tempMeasure);\r\n            }\r\n            this._backgroundImage._draw(context);\r\n        }\r\n\r\n        // Thumb\r\n        if (this.isVertical) {\r\n            this._tempMeasure.copyFromFloats(left - this._effectiveBarOffset + this._currentMeasure.width * (1 - this._thumbHeight) * 0.5, this._currentMeasure.top + thumbPosition, this._currentMeasure.width * this._thumbHeight, this._effectiveThumbThickness);\r\n        }\r\n        else {\r\n            this._tempMeasure.copyFromFloats(this._currentMeasure.left + thumbPosition, this._currentMeasure.top + this._currentMeasure.height * (1 - this._thumbHeight) * 0.5, this._effectiveThumbThickness, this._currentMeasure.height * this._thumbHeight);\r\n        }\r\n\r\n        if (this._thumbImage) {\r\n            this._thumbImage._currentMeasure.copyFrom(this._tempMeasure);\r\n            this._thumbImage._draw(context);\r\n        }\r\n\r\n        context.restore();\r\n    }\r\n\r\n    private _first: boolean;\r\n    private _originX: number;\r\n    private _originY: number;\r\n\r\n    /** @hidden */\r\n    protected _updateValueFromPointer(x: number, y: number): void {\r\n        if (this.rotation != 0) {\r\n            this._invertTransformMatrix.transformCoordinates(x, y, this._transformedPosition);\r\n            x = this._transformedPosition.x;\r\n            y = this._transformedPosition.y;\r\n        }\r\n\r\n        if (this._first) {\r\n            this._first = false;\r\n            this._originX = x;\r\n            this._originY = y;\r\n\r\n            // Check if move is required\r\n            if (x < this._tempMeasure.left || x > this._tempMeasure.left + this._tempMeasure.width || y < this._tempMeasure.top || y > this._tempMeasure.top + this._tempMeasure.height) {\r\n                if (this.isVertical) {\r\n                    this.value = this.minimum + (1 - ((y - this._currentMeasure.top) / this._currentMeasure.height)) * (this.maximum - this.minimum);\r\n                }\r\n                else {\r\n                    this.value = this.minimum + ((x - this._currentMeasure.left) / this._currentMeasure.width) * (this.maximum - this.minimum);\r\n                }\r\n            }\r\n        }\r\n\r\n        // Delta mode\r\n        let delta = 0;\r\n        if (this.isVertical) {\r\n            delta = -((y - this._originY) / (this._currentMeasure.height - this._effectiveThumbThickness));\r\n        }\r\n        else {\r\n            delta = (x - this._originX) / (this._currentMeasure.width - this._effectiveThumbThickness);\r\n        }\r\n\r\n        this.value += delta * (this.maximum - this.minimum);\r\n\r\n        this._originX = x;\r\n        this._originY = y;\r\n    }\r\n\r\n    public _onPointerDown(target: Control, coordinates: Vector2, pointerId: number, buttonIndex: number, pi: PointerInfoBase): boolean {\r\n        this._first = true;\r\n\r\n        return super._onPointerDown(target, coordinates, pointerId, buttonIndex, pi);\r\n    }\r\n}\r\n", "import { Nullable } from \"@babylonjs/core/types\";\r\nimport { Observer } from \"@babylonjs/core/Misc/observable\";\r\nimport { Vector2 } from \"@babylonjs/core/Maths/math\";\r\nimport { Rectangle } from \"../rectangle\";\r\nimport { Grid } from \"../grid\";\r\nimport { Image } from \"../image\";\r\nimport { Control } from \"../control\";\r\nimport { Container } from \"../container\";\r\nimport { Measure } from \"../../measure\";\r\nimport { AdvancedDynamicTexture } from \"../../advancedDynamicTexture\";\r\nimport { _ScrollViewerWindow } from \"./scrollViewerWindow\";\r\nimport { ScrollBar } from \"../sliders/scrollBar\";\r\nimport { ImageScrollBar } from \"../sliders/imageScrollBar\";\r\nimport { _TypeStore } from '@babylonjs/core/Misc/typeStore';\r\n\r\n/**\r\n * Class used to hold a viewer window and sliders in a grid\r\n*/\r\nexport class ScrollViewer extends Rectangle {\r\n    private _grid: Grid;\r\n    private _horizontalBarSpace: Rectangle;\r\n    private _verticalBarSpace: Rectangle;\r\n    private _dragSpace: Rectangle;\r\n    private _horizontalBar: ScrollBar | ImageScrollBar;\r\n    private _verticalBar: ScrollBar | ImageScrollBar;\r\n    private _barColor: string;\r\n    private _barBackground: string;\r\n    private _barImage: Image;\r\n    private _horizontalBarImage: Image;\r\n    private _verticalBarImage: Image;\r\n    private _barBackgroundImage: Image;\r\n    private _horizontalBarBackgroundImage: Image;\r\n    private _verticalBarBackgroundImage: Image;\r\n    private _barSize: number = 20;\r\n    private _window: _ScrollViewerWindow;\r\n    private _pointerIsOver: Boolean = false;\r\n    private _wheelPrecision: number = 0.05;\r\n    private _onWheelObserver: Nullable<Observer<Vector2>>;\r\n    private _clientWidth: number;\r\n    private _clientHeight: number;\r\n    private _useImageBar: Boolean;\r\n    private _thumbLength: number = 0.5;\r\n    private _thumbHeight: number = 1;\r\n    private _barImageHeight: number = 1;\r\n    private _horizontalBarImageHeight: number = 1;\r\n    private _verticalBarImageHeight: number = 1;\r\n    private _oldWindowContentsWidth: number = 0;\r\n    private _oldWindowContentsHeight: number = 0;\r\n\r\n    /**\r\n     * Gets the horizontal scrollbar\r\n     */\r\n    public get horizontalBar(): ScrollBar | ImageScrollBar {\r\n        return this._horizontalBar;\r\n    }\r\n\r\n    /**\r\n     * Gets the vertical scrollbar\r\n     */\r\n    public get verticalBar(): ScrollBar | ImageScrollBar {\r\n        return this._verticalBar;\r\n    }\r\n\r\n    /**\r\n     * Adds a new control to the current container\r\n     * @param control defines the control to add\r\n     * @returns the current container\r\n     */\r\n    public addControl(control: Nullable<Control>): Container {\r\n        if (!control) {\r\n            return this;\r\n        }\r\n\r\n        this._window.addControl(control);\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Removes a control from the current container\r\n     * @param control defines the control to remove\r\n     * @returns the current container\r\n     */\r\n    public removeControl(control: Control): Container {\r\n        this._window.removeControl(control);\r\n        return this;\r\n    }\r\n\r\n    /** Gets the list of children */\r\n    public get children(): Control[] {\r\n        return this._window.children;\r\n    }\r\n\r\n    public _flagDescendantsAsMatrixDirty(): void {\r\n        for (var child of this._children) {\r\n            child._markMatrixAsDirty();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Freezes or unfreezes the controls in the window.\r\n     * When controls are frozen, the scroll viewer can render a lot more quickly but updates to positions/sizes of controls\r\n     * are not taken into account. If you want to change positions/sizes, unfreeze, perform the changes then freeze again\r\n     */\r\n    public get freezeControls(): boolean {\r\n        return this._window.freezeControls;\r\n    }\r\n\r\n    public set freezeControls(value: boolean) {\r\n        this._window.freezeControls = value;\r\n    }\r\n\r\n    /** Gets the bucket width */\r\n    public get bucketWidth(): number {\r\n        return this._window.bucketWidth;\r\n    }\r\n\r\n    /** Gets the bucket height */\r\n    public get bucketHeight(): number {\r\n        return this._window.bucketHeight;\r\n    }\r\n\r\n    /**\r\n     * Sets the bucket sizes.\r\n     * When freezeControls is true, setting a non-zero bucket size will improve performances by updating only\r\n     * controls that are visible. The bucket sizes is used to subdivide (internally) the window area to smaller areas into which\r\n     * controls are dispatched. So, the size should be roughly equals to the mean size of all the controls of\r\n     * the window. To disable the usage of buckets, sets either width or height (or both) to 0.\r\n     * Please note that using this option will raise the memory usage (the higher the bucket sizes, the less memory\r\n     * used), that's why it is not enabled by default.\r\n     * @param width width of the bucket\r\n     * @param height height of the bucket\r\n     */\r\n    public setBucketSizes(width: number, height: number): void {\r\n        this._window.setBucketSizes(width, height);\r\n    }\r\n\r\n    private _forceHorizontalBar: boolean = false;\r\n    private _forceVerticalBar: boolean = false;\r\n\r\n    /**\r\n     * Forces the horizontal scroll bar to be displayed\r\n     */\r\n    public get forceHorizontalBar(): boolean {\r\n        return this._forceHorizontalBar;\r\n    }\r\n\r\n    public set forceHorizontalBar(value: boolean) {\r\n        this._grid.setRowDefinition(1, value ? this._barSize : 0, true);\r\n        this._horizontalBar.isVisible = value;\r\n        this._forceHorizontalBar = value;\r\n    }\r\n\r\n    /**\r\n     * Forces the vertical scroll bar to be displayed\r\n     */\r\n    public get forceVerticalBar(): boolean {\r\n        return this._forceVerticalBar;\r\n    }\r\n\r\n    public set forceVerticalBar(value: boolean) {\r\n        this._grid.setColumnDefinition(1, value ? this._barSize : 0, true);\r\n        this._verticalBar.isVisible = value;\r\n        this._forceVerticalBar = value;\r\n    }\r\n\r\n    /**\r\n    * Creates a new ScrollViewer\r\n    * @param name of ScrollViewer\r\n    */\r\n    constructor(name?: string, isImageBased?: boolean) {\r\n        super(name);\r\n\r\n        this._useImageBar = isImageBased ? isImageBased : false;\r\n\r\n        this.onDirtyObservable.add(() => {\r\n            this._horizontalBarSpace.color = this.color;\r\n            this._verticalBarSpace.color = this.color;\r\n            this._dragSpace.color = this.color;\r\n        });\r\n\r\n        this.onPointerEnterObservable.add(() => {\r\n            this._pointerIsOver = true;\r\n        });\r\n\r\n        this.onPointerOutObservable.add(() => {\r\n            this._pointerIsOver = false;\r\n        });\r\n\r\n        this._grid = new Grid();\r\n        if (this._useImageBar) {\r\n            this._horizontalBar = new ImageScrollBar();\r\n            this._verticalBar = new ImageScrollBar();\r\n        }\r\n        else {\r\n            this._horizontalBar = new ScrollBar();\r\n            this._verticalBar = new ScrollBar();\r\n        }\r\n\r\n        this._window = new _ScrollViewerWindow(\"scrollViewer_window\");\r\n        this._window.horizontalAlignment = Control.HORIZONTAL_ALIGNMENT_LEFT;\r\n        this._window.verticalAlignment = Control.VERTICAL_ALIGNMENT_TOP;\r\n\r\n        this._grid.addColumnDefinition(1);\r\n        this._grid.addColumnDefinition(0, true);\r\n        this._grid.addRowDefinition(1);\r\n        this._grid.addRowDefinition(0, true);\r\n\r\n        super.addControl(this._grid);\r\n        this._grid.addControl(this._window, 0, 0);\r\n\r\n        this._verticalBarSpace = new Rectangle();\r\n        this._verticalBarSpace.horizontalAlignment = Control.HORIZONTAL_ALIGNMENT_LEFT;\r\n        this._verticalBarSpace.verticalAlignment = Control.VERTICAL_ALIGNMENT_TOP;\r\n        this._verticalBarSpace.thickness = 1;\r\n        this._grid.addControl(this._verticalBarSpace, 0, 1);\r\n        this._addBar(this._verticalBar, this._verticalBarSpace, true, Math.PI);\r\n\r\n        this._horizontalBarSpace = new Rectangle();\r\n        this._horizontalBarSpace.horizontalAlignment = Control.HORIZONTAL_ALIGNMENT_LEFT;\r\n        this._horizontalBarSpace.verticalAlignment = Control.VERTICAL_ALIGNMENT_TOP;\r\n        this._horizontalBarSpace.thickness = 1;\r\n        this._grid.addControl(this._horizontalBarSpace, 1, 0);\r\n        this._addBar(this._horizontalBar, this._horizontalBarSpace, false, 0);\r\n\r\n        this._dragSpace = new Rectangle();\r\n        this._dragSpace.thickness = 1;\r\n        this._grid.addControl(this._dragSpace, 1, 1);\r\n\r\n        // Colors\r\n        if (!this._useImageBar) {\r\n            this.barColor = \"grey\";\r\n            this.barBackground = \"transparent\";\r\n        }\r\n    }\r\n\r\n    /** Reset the scroll viewer window to initial size */\r\n    public resetWindow() {\r\n        this._window.width = \"100%\";\r\n        this._window.height = \"100%\";\r\n    }\r\n\r\n    protected _getTypeName(): string {\r\n        return \"ScrollViewer\";\r\n    }\r\n\r\n    private _buildClientSizes() {\r\n        let ratio = this.host.idealRatio;\r\n\r\n        this._window.parentClientWidth = this._currentMeasure.width - (this._verticalBar.isVisible || this.forceVerticalBar ? this._barSize * ratio : 0) - 2 * this.thickness;\r\n        this._window.parentClientHeight = this._currentMeasure.height - (this._horizontalBar.isVisible || this.forceHorizontalBar ? this._barSize * ratio : 0) - 2 * this.thickness;\r\n\r\n        this._clientWidth = this._window.parentClientWidth;\r\n        this._clientHeight = this._window.parentClientHeight;\r\n    }\r\n\r\n    protected _additionalProcessing(parentMeasure: Measure, context: CanvasRenderingContext2D): void {\r\n        super._additionalProcessing(parentMeasure, context);\r\n\r\n        this._buildClientSizes();\r\n    }\r\n\r\n    protected _postMeasure(): void {\r\n        super._postMeasure();\r\n\r\n        this._updateScroller();\r\n\r\n        this._setWindowPosition(false);\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the mouse wheel precision\r\n     * from 0 to 1 with a default value of 0.05\r\n     * */\r\n    public get wheelPrecision(): number {\r\n        return this._wheelPrecision;\r\n    }\r\n\r\n    public set wheelPrecision(value: number) {\r\n        if (this._wheelPrecision === value) {\r\n            return;\r\n        }\r\n\r\n        if (value < 0) {\r\n            value = 0;\r\n        }\r\n\r\n        if (value > 1) {\r\n            value = 1;\r\n        }\r\n\r\n        this._wheelPrecision = value;\r\n    }\r\n\r\n    /** Gets or sets the scroll bar container background color */\r\n    public get scrollBackground(): string {\r\n        return this._horizontalBarSpace.background;\r\n    }\r\n\r\n    public set scrollBackground(color: string) {\r\n        if (this._horizontalBarSpace.background === color) {\r\n            return;\r\n        }\r\n        this._horizontalBarSpace.background = color;\r\n        this._verticalBarSpace.background = color;\r\n    }\r\n\r\n    /** Gets or sets the bar color */\r\n    public get barColor(): string {\r\n        return this._barColor;\r\n    }\r\n\r\n    public set barColor(color: string) {\r\n        if (this._barColor === color) {\r\n            return;\r\n        }\r\n\r\n        this._barColor = color;\r\n        this._horizontalBar.color = color;\r\n        this._verticalBar.color = color;\r\n    }\r\n\r\n    /** Gets or sets the bar image */\r\n    public get thumbImage(): Image {\r\n        return this._barImage;\r\n    }\r\n\r\n    public set thumbImage(value: Image) {\r\n        if (this._barImage === value) {\r\n            return;\r\n        }\r\n\r\n        this._barImage = value;\r\n        let hb = <ImageScrollBar>this._horizontalBar;\r\n        let vb = <ImageScrollBar>this._verticalBar;\r\n        hb.thumbImage = value;\r\n        vb.thumbImage = value;\r\n    }\r\n\r\n    /** Gets or sets the horizontal bar image */\r\n    public get horizontalThumbImage(): Image {\r\n        return this._horizontalBarImage;\r\n    }\r\n\r\n    public set horizontalThumbImage(value: Image) {\r\n        if (this._horizontalBarImage === value) {\r\n            return;\r\n        }\r\n\r\n        this._horizontalBarImage = value;\r\n        let hb = <ImageScrollBar>this._horizontalBar;\r\n        hb.thumbImage = value;\r\n    }\r\n\r\n    /** Gets or sets the vertical bar image */\r\n    public get verticalThumbImage(): Image {\r\n        return this._verticalBarImage;\r\n    }\r\n\r\n    public set verticalThumbImage(value: Image) {\r\n        if (this._verticalBarImage === value) {\r\n            return;\r\n        }\r\n\r\n        this._verticalBarImage = value;\r\n        let vb = <ImageScrollBar>this._verticalBar;\r\n        vb.thumbImage = value;\r\n    }\r\n\r\n    /** Gets or sets the size of the bar */\r\n    public get barSize(): number {\r\n        return this._barSize;\r\n    }\r\n\r\n    public set barSize(value: number) {\r\n        if (this._barSize === value) {\r\n            return;\r\n        }\r\n\r\n        this._barSize = value;\r\n        this._markAsDirty();\r\n\r\n        if (this._horizontalBar.isVisible) {\r\n            this._grid.setRowDefinition(1, this._barSize, true);\r\n        }\r\n        if (this._verticalBar.isVisible) {\r\n            this._grid.setColumnDefinition(1, this._barSize, true);\r\n        }\r\n    }\r\n\r\n    /** Gets or sets the length of the thumb */\r\n    public get thumbLength(): number {\r\n        return this._thumbLength;\r\n    }\r\n\r\n    public set thumbLength(value: number) {\r\n        if (this._thumbLength === value) {\r\n            return;\r\n        }\r\n        if (value <= 0) {\r\n            value = 0.1;\r\n        }\r\n        if (value > 1) {\r\n            value = 1;\r\n        }\r\n        this._thumbLength = value;\r\n        var hb = <ImageScrollBar>this._horizontalBar;\r\n        var vb = <ImageScrollBar>this._verticalBar;\r\n        hb.thumbLength = value;\r\n        vb.thumbLength = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets the height of the thumb */\r\n    public get thumbHeight(): number {\r\n        return this._thumbHeight;\r\n    }\r\n\r\n    public set thumbHeight(value: number) {\r\n        if (this._thumbHeight === value) {\r\n            return;\r\n        }\r\n        if (value <= 0) {\r\n            value = 0.1;\r\n        }\r\n        if (value > 1) {\r\n            value = 1;\r\n        }\r\n        this._thumbHeight = value;\r\n        var hb = <ImageScrollBar>this._horizontalBar;\r\n        var vb = <ImageScrollBar>this._verticalBar;\r\n        hb.thumbHeight = value;\r\n        vb.thumbHeight = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets the height of the bar image */\r\n    public get barImageHeight(): number {\r\n        return this._barImageHeight;\r\n    }\r\n\r\n    public set barImageHeight(value: number) {\r\n        if (this._barImageHeight === value) {\r\n            return;\r\n        }\r\n        if (value <= 0) {\r\n            value = 0.1;\r\n        }\r\n        if (value > 1) {\r\n            value = 1;\r\n        }\r\n        this._barImageHeight = value;\r\n        var hb = <ImageScrollBar>this._horizontalBar;\r\n        var vb = <ImageScrollBar>this._verticalBar;\r\n        hb.barImageHeight = value;\r\n        vb.barImageHeight = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets the height of the horizontal bar image */\r\n    public get horizontalBarImageHeight(): number {\r\n        return this._horizontalBarImageHeight;\r\n    }\r\n\r\n    public set horizontalBarImageHeight(value: number) {\r\n        if (this._horizontalBarImageHeight === value) {\r\n            return;\r\n        }\r\n        if (value <= 0) {\r\n            value = 0.1;\r\n        }\r\n        if (value > 1) {\r\n            value = 1;\r\n        }\r\n        this._horizontalBarImageHeight = value;\r\n        var hb = <ImageScrollBar>this._horizontalBar;\r\n        hb.barImageHeight = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets the height of the vertical bar image */\r\n    public get verticalBarImageHeight(): number {\r\n        return this._verticalBarImageHeight;\r\n    }\r\n\r\n    public set verticalBarImageHeight(value: number) {\r\n        if (this._verticalBarImageHeight === value) {\r\n            return;\r\n        }\r\n        if (value <= 0) {\r\n            value = 0.1;\r\n        }\r\n        if (value > 1) {\r\n            value = 1;\r\n        }\r\n        this._verticalBarImageHeight = value;\r\n        var vb = <ImageScrollBar>this._verticalBar;\r\n        vb.barImageHeight = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets the bar background */\r\n    public get barBackground(): string {\r\n        return this._barBackground;\r\n    }\r\n\r\n    public set barBackground(color: string) {\r\n        if (this._barBackground === color) {\r\n            return;\r\n        }\r\n\r\n        this._barBackground = color;\r\n        let hb = <ScrollBar>this._horizontalBar;\r\n        let vb = <ScrollBar>this._verticalBar;\r\n        hb.background = color;\r\n        vb.background = color;\r\n        this._dragSpace.background = color;\r\n    }\r\n\r\n    /** Gets or sets the bar background image */\r\n    public get barImage(): Image {\r\n        return this._barBackgroundImage;\r\n    }\r\n\r\n    public set barImage(value: Image) {\r\n        if (this._barBackgroundImage === value) {\r\n        }\r\n\r\n        this._barBackgroundImage = value;\r\n        let hb = <ImageScrollBar>this._horizontalBar;\r\n        let vb = <ImageScrollBar>this._verticalBar;\r\n        hb.backgroundImage = value;\r\n        vb.backgroundImage = value;\r\n    }\r\n\r\n    /** Gets or sets the horizontal bar background image */\r\n    public get horizontalBarImage(): Image {\r\n        return this._horizontalBarBackgroundImage;\r\n    }\r\n\r\n    public set horizontalBarImage(value: Image) {\r\n        if (this._horizontalBarBackgroundImage === value) {\r\n        }\r\n\r\n        this._horizontalBarBackgroundImage = value;\r\n        let hb = <ImageScrollBar>this._horizontalBar;\r\n        hb.backgroundImage = value;\r\n    }\r\n\r\n    /** Gets or sets the vertical bar background image */\r\n    public get verticalBarImage(): Image {\r\n        return this._verticalBarBackgroundImage;\r\n    }\r\n\r\n    public set verticalBarImage(value: Image) {\r\n        if (this._verticalBarBackgroundImage === value) {\r\n        }\r\n\r\n        this._verticalBarBackgroundImage = value;\r\n        let vb = <ImageScrollBar>this._verticalBar;\r\n        vb.backgroundImage = value;\r\n    }\r\n\r\n    private _setWindowPosition(force = true): void {\r\n        let ratio = this.host.idealRatio;\r\n        let windowContentsWidth = this._window._currentMeasure.width;\r\n        let windowContentsHeight = this._window._currentMeasure.height;\r\n\r\n        if (!force && this._oldWindowContentsWidth === windowContentsWidth && this._oldWindowContentsHeight === windowContentsHeight) {\r\n            return;\r\n        }\r\n\r\n        this._oldWindowContentsWidth = windowContentsWidth;\r\n        this._oldWindowContentsHeight = windowContentsHeight;\r\n\r\n        const _endLeft = this._clientWidth - windowContentsWidth;\r\n        const _endTop = this._clientHeight - windowContentsHeight;\r\n\r\n        const newLeft = (this._horizontalBar.value / ratio) * _endLeft + \"px\";\r\n        const newTop = (this._verticalBar.value / ratio) * _endTop + \"px\";\r\n\r\n        if (newLeft !== this._window.left) {\r\n            this._window.left = newLeft;\r\n            if (!this.freezeControls) {\r\n                this._rebuildLayout = true;\r\n            }\r\n        }\r\n\r\n        if (newTop !== this._window.top) {\r\n            this._window.top = newTop;\r\n            if (!this.freezeControls) {\r\n                this._rebuildLayout = true;\r\n            }\r\n        }\r\n    }\r\n\r\n    /** @hidden */\r\n    private _updateScroller(): void {\r\n        let windowContentsWidth = this._window._currentMeasure.width;\r\n        let windowContentsHeight = this._window._currentMeasure.height;\r\n\r\n        if (this._horizontalBar.isVisible && windowContentsWidth <= this._clientWidth && !this.forceHorizontalBar) {\r\n            this._grid.setRowDefinition(1, 0, true);\r\n            this._horizontalBar.isVisible = false;\r\n            this._horizontalBar.value = 0;\r\n            this._rebuildLayout = true;\r\n        }\r\n        else if (!this._horizontalBar.isVisible && (windowContentsWidth > this._clientWidth || this.forceHorizontalBar)) {\r\n            this._grid.setRowDefinition(1, this._barSize, true);\r\n            this._horizontalBar.isVisible = true;\r\n            this._rebuildLayout = true;\r\n        }\r\n\r\n        if (this._verticalBar.isVisible && windowContentsHeight <= this._clientHeight && !this.forceVerticalBar) {\r\n            this._grid.setColumnDefinition(1, 0, true);\r\n            this._verticalBar.isVisible = false;\r\n            this._verticalBar.value = 0;\r\n            this._rebuildLayout = true;\r\n        }\r\n        else if (!this._verticalBar.isVisible && (windowContentsHeight > this._clientHeight || this.forceVerticalBar)) {\r\n            this._grid.setColumnDefinition(1, this._barSize, true);\r\n            this._verticalBar.isVisible = true;\r\n            this._rebuildLayout = true;\r\n        }\r\n\r\n        this._buildClientSizes();\r\n\r\n        let ratio = this.host.idealRatio;\r\n\r\n        this._horizontalBar.thumbWidth = this._thumbLength * 0.9 * (this._clientWidth / ratio) + \"px\";\r\n        this._verticalBar.thumbWidth = this._thumbLength *  0.9 * (this._clientHeight / ratio) + \"px\";\r\n    }\r\n\r\n    public _link(host: AdvancedDynamicTexture): void {\r\n        super._link(host);\r\n\r\n        this._attachWheel();\r\n    }\r\n\r\n    /** @hidden */\r\n    private _addBar(barControl: ScrollBar | ImageScrollBar, barContainer: Rectangle, isVertical: boolean, rotation: number) {\r\n        barControl.paddingLeft = 0;\r\n        barControl.width = \"100%\";\r\n        barControl.height = \"100%\";\r\n        barControl.barOffset = 0;\r\n        barControl.value = 0;\r\n        barControl.maximum = 1;\r\n        barControl.horizontalAlignment = Control.HORIZONTAL_ALIGNMENT_CENTER;\r\n        barControl.verticalAlignment = Control.VERTICAL_ALIGNMENT_CENTER;\r\n        barControl.isVertical = isVertical;\r\n        barControl.rotation = rotation;\r\n        barControl.isVisible = false;\r\n\r\n        barContainer.addControl(barControl);\r\n\r\n        barControl.onValueChangedObservable.add((value) => {\r\n            this._setWindowPosition();\r\n        });\r\n    }\r\n\r\n    /** @hidden */\r\n    private _attachWheel() {\r\n        if (!this._host || this._onWheelObserver) {\r\n            return;\r\n        }\r\n\r\n        this._onWheelObserver = this.onWheelObservable.add((pi) => {\r\n            if (!this._pointerIsOver) {\r\n                return;\r\n            }\r\n            if (this._verticalBar.isVisible == true) {\r\n                if (pi.y < 0 && this._verticalBar.value > 0) {\r\n                    this._verticalBar.value -= this._wheelPrecision;\r\n                } else if (pi.y > 0 && this._verticalBar.value < this._verticalBar.maximum) {\r\n                    this._verticalBar.value += this._wheelPrecision;\r\n                }\r\n            }\r\n            if (this._horizontalBar.isVisible == true) {\r\n                if (pi.x < 0 && this._horizontalBar.value < this._horizontalBar.maximum) {\r\n                    this._horizontalBar.value += this._wheelPrecision;\r\n                } else if (pi.x > 0 && this._horizontalBar.value > 0) {\r\n                    this._horizontalBar.value -= this._wheelPrecision;\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    public _renderHighlightSpecific(context: CanvasRenderingContext2D): void {\r\n        if (!this.isHighlighted) {\r\n            return;\r\n        }\r\n\r\n        super._renderHighlightSpecific(context);\r\n\r\n        this._grid._renderHighlightSpecific(context);\r\n\r\n        context.restore();\r\n    }\r\n\r\n    /** Releases associated resources */\r\n    public dispose() {\r\n        this.onWheelObservable.remove(this._onWheelObserver);\r\n        this._onWheelObserver = null;\r\n        super.dispose();\r\n    }\r\n}\r\n_TypeStore.RegisteredTypes[\"BABYLON.GUI.ScrollViewer\"] = ScrollViewer;", "import { Nullable } from \"@babylonjs/core/types\";\r\nimport { Observable, Observer } from \"@babylonjs/core/Misc/observable\";\r\n\r\nimport { StackPanel } from \"./stackPanel\";\r\nimport { Button } from \"./button\";\r\nimport { Container } from \"./container\";\r\nimport { TextBlock } from \"./textBlock\";\r\nimport { InputText } from \"./inputText\";\r\nimport { _TypeStore } from '@babylonjs/core/Misc/typeStore';\r\n\r\n/**\r\n * Class used to store key control properties\r\n */\r\nexport class KeyPropertySet {\r\n    /** Width */\r\n    width?: string;\r\n    /** Height */\r\n    height?: string;\r\n    /** Left padding */\r\n    paddingLeft?: string;\r\n    /** Right padding */\r\n    paddingRight?: string;\r\n    /** Top padding */\r\n    paddingTop?: string;\r\n    /** Bottom padding */\r\n    paddingBottom?: string;\r\n    /** Foreground color */\r\n    color?: string;\r\n    /** Background color */\r\n    background?: string;\r\n}\r\n\r\ntype ConnectedInputText = {\r\n    input: InputText,\r\n    onFocusObserver: Nullable<Observer<InputText>>,\r\n    onBlurObserver: Nullable<Observer<InputText>>\r\n};\r\n\r\n/**\r\n * Class used to create virtual keyboard\r\n */\r\nexport class VirtualKeyboard extends StackPanel {\r\n    /** Observable raised when a key is pressed */\r\n    public onKeyPressObservable = new Observable<string>();\r\n\r\n    /** Gets or sets default key button width */\r\n    public defaultButtonWidth = \"40px\";\r\n    /** Gets or sets default key button height */\r\n    public defaultButtonHeight = \"40px\";\r\n\r\n    /** Gets or sets default key button left padding */\r\n    public defaultButtonPaddingLeft = \"2px\";\r\n    /** Gets or sets default key button right padding */\r\n    public defaultButtonPaddingRight = \"2px\";\r\n    /** Gets or sets default key button top padding */\r\n    public defaultButtonPaddingTop = \"2px\";\r\n    /** Gets or sets default key button bottom padding */\r\n    public defaultButtonPaddingBottom = \"2px\";\r\n\r\n    /** Gets or sets default key button foreground color */\r\n    public defaultButtonColor = \"#DDD\";\r\n    /** Gets or sets default key button background color */\r\n    public defaultButtonBackground = \"#070707\";\r\n\r\n    /** Gets or sets shift button foreground color */\r\n    public shiftButtonColor = \"#7799FF\";\r\n    /** Gets or sets shift button thickness*/\r\n    public selectedShiftThickness = 1;\r\n\r\n    /** Gets shift key state */\r\n    public shiftState = 0;\r\n\r\n    protected _getTypeName(): string {\r\n        return \"VirtualKeyboard\";\r\n    }\r\n\r\n    private _createKey(key: string, propertySet: Nullable<KeyPropertySet>) {\r\n        var button = Button.CreateSimpleButton(key, key);\r\n\r\n        button.width = propertySet && propertySet.width ? propertySet.width : this.defaultButtonWidth;\r\n        button.height = propertySet && propertySet.height ? propertySet.height : this.defaultButtonHeight;\r\n        button.color = propertySet && propertySet.color ? propertySet.color : this.defaultButtonColor;\r\n        button.background = propertySet && propertySet.background ? propertySet.background : this.defaultButtonBackground;\r\n        button.paddingLeft = propertySet && propertySet.paddingLeft ? propertySet.paddingLeft : this.defaultButtonPaddingLeft;\r\n        button.paddingRight = propertySet && propertySet.paddingRight ? propertySet.paddingRight : this.defaultButtonPaddingRight;\r\n        button.paddingTop = propertySet && propertySet.paddingTop ? propertySet.paddingTop : this.defaultButtonPaddingTop;\r\n        button.paddingBottom = propertySet && propertySet.paddingBottom ? propertySet.paddingBottom : this.defaultButtonPaddingBottom;\r\n\r\n        button.thickness = 0;\r\n        button.isFocusInvisible = true;\r\n\r\n        button.shadowColor = this.shadowColor;\r\n        button.shadowBlur = this.shadowBlur;\r\n        button.shadowOffsetX = this.shadowOffsetX;\r\n        button.shadowOffsetY = this.shadowOffsetY;\r\n\r\n        button.onPointerUpObservable.add(() => {\r\n            this.onKeyPressObservable.notifyObservers(key);\r\n        });\r\n\r\n        return button;\r\n    }\r\n\r\n    /**\r\n     * Adds a new row of keys\r\n     * @param keys defines the list of keys to add\r\n     * @param propertySets defines the associated property sets\r\n     */\r\n    public addKeysRow(keys: Array<string>, propertySets?: Array<KeyPropertySet>): void {\r\n        let panel = new StackPanel();\r\n        panel.isVertical = false;\r\n        panel.isFocusInvisible = true;\r\n\r\n        var maxKey: Nullable<Button> = null;\r\n        for (var i = 0; i < keys.length; i++) {\r\n            let properties = null;\r\n\r\n            if (propertySets && propertySets.length === keys.length) {\r\n                properties = propertySets[i];\r\n            }\r\n\r\n            var key = this._createKey(keys[i], properties);\r\n            if (!maxKey || key.heightInPixels > maxKey.heightInPixels) {\r\n                maxKey = key;\r\n            }\r\n\r\n            panel.addControl(key);\r\n        }\r\n\r\n        panel.height = maxKey ? maxKey.height : this.defaultButtonHeight;\r\n\r\n        this.addControl(panel);\r\n    }\r\n\r\n    /**\r\n     * Set the shift key to a specific state\r\n     * @param shiftState defines the new shift state\r\n     */\r\n    public applyShiftState(shiftState: number): void {\r\n        if (!this.children) {\r\n            return;\r\n        }\r\n\r\n        for (var i = 0; i < this.children.length; i++) {\r\n            let row = this.children[i];\r\n            if (!row || !(<Container>row).children) {\r\n                continue;\r\n            }\r\n\r\n            let rowContainer = <Container>row;\r\n            for (var j = 0; j < rowContainer.children.length; j++) {\r\n                let button = rowContainer.children[j] as Button;\r\n\r\n                if (!button || !button.children[0]) {\r\n                    continue;\r\n                }\r\n\r\n                let button_tblock = button.children[0] as TextBlock;\r\n\r\n                if (button_tblock.text === \"\\u21E7\") {\r\n                    button.color = (shiftState ? this.shiftButtonColor : this.defaultButtonColor);\r\n                    button.thickness = (shiftState > 1 ? this.selectedShiftThickness : 0);\r\n                }\r\n\r\n                button_tblock.text = (shiftState > 0 ? button_tblock.text.toUpperCase() : button_tblock.text.toLowerCase());\r\n            }\r\n        }\r\n    }\r\n\r\n    private _currentlyConnectedInputText: Nullable<InputText> = null;\r\n    private _connectedInputTexts: ConnectedInputText[] = [];\r\n    private _onKeyPressObserver: Nullable<Observer<string>> = null;\r\n\r\n    /** Gets the input text control currently attached to the keyboard */\r\n    public get connectedInputText(): Nullable<InputText> {\r\n        return this._currentlyConnectedInputText;\r\n    }\r\n\r\n    /**\r\n     * Connects the keyboard with an input text control\r\n     *\r\n     * @param input defines the target control\r\n     */\r\n    public connect(input: InputText): void {\r\n        const inputTextAlreadyConnected = this._connectedInputTexts.some((a) => a.input === input);\r\n        if (inputTextAlreadyConnected) {\r\n            return;\r\n        }\r\n\r\n        if (this._onKeyPressObserver === null) {\r\n            this._onKeyPressObserver = this.onKeyPressObservable.add((key) => {\r\n                if (!this._currentlyConnectedInputText) {\r\n                    return;\r\n                }\r\n\r\n                this._currentlyConnectedInputText._host.focusedControl = this._currentlyConnectedInputText;\r\n\r\n                switch (key) {\r\n                    case \"\\u21E7\":\r\n                        this.shiftState++;\r\n                        if (this.shiftState > 2) {\r\n                            this.shiftState = 0;\r\n                        }\r\n                        this.applyShiftState(this.shiftState);\r\n                        return;\r\n                    case \"\\u2190\":\r\n                        this._currentlyConnectedInputText.processKey(8);\r\n                        return;\r\n                    case \"\\u21B5\":\r\n                        this._currentlyConnectedInputText.processKey(13);\r\n                        return;\r\n                }\r\n                this._currentlyConnectedInputText.processKey(-1, (this.shiftState ? key.toUpperCase() : key));\r\n\r\n                if (this.shiftState === 1) {\r\n                    this.shiftState = 0;\r\n                    this.applyShiftState(this.shiftState);\r\n                }\r\n            });\r\n        }\r\n\r\n        this.isVisible = false;\r\n        this._currentlyConnectedInputText = input;\r\n        input._connectedVirtualKeyboard = this;\r\n\r\n        // Events hooking\r\n        const onFocusObserver: Nullable<Observer<InputText>> = input.onFocusObservable.add(() => {\r\n            this._currentlyConnectedInputText = input;\r\n            input._connectedVirtualKeyboard = this;\r\n            this.isVisible = true;\r\n        });\r\n\r\n        const onBlurObserver: Nullable<Observer<InputText>> = input.onBlurObservable.add(() => {\r\n            input._connectedVirtualKeyboard = null;\r\n            this._currentlyConnectedInputText = null;\r\n            this.isVisible = false;\r\n        });\r\n\r\n        this._connectedInputTexts.push({\r\n            input,\r\n            onBlurObserver,\r\n            onFocusObserver\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Disconnects the keyboard from connected InputText controls\r\n     *\r\n     * @param input optionally defines a target control, otherwise all are disconnected\r\n     */\r\n    public disconnect(input?: InputText): void {\r\n        if (input) {\r\n            // .find not available on IE\r\n            let filtered = this._connectedInputTexts.filter((a) => a.input === input);\r\n            if (filtered.length === 1) {\r\n                this._removeConnectedInputObservables(filtered[0]);\r\n\r\n                this._connectedInputTexts = this._connectedInputTexts.filter((a) => a.input !== input);\r\n                if (this._currentlyConnectedInputText === input) {\r\n                    this._currentlyConnectedInputText = null;\r\n                }\r\n            }\r\n        } else {\r\n            this._connectedInputTexts.forEach((connectedInputText: ConnectedInputText) => {\r\n                this._removeConnectedInputObservables(connectedInputText);\r\n            });\r\n            this._connectedInputTexts = [];\r\n        }\r\n\r\n        if (this._connectedInputTexts.length === 0) {\r\n            this._currentlyConnectedInputText = null;\r\n            this.onKeyPressObservable.remove(this._onKeyPressObserver);\r\n            this._onKeyPressObserver = null;\r\n        }\r\n    }\r\n\r\n    private _removeConnectedInputObservables(connectedInputText: ConnectedInputText): void {\r\n        connectedInputText.input._connectedVirtualKeyboard = null;\r\n        connectedInputText.input.onFocusObservable.remove(connectedInputText.onFocusObserver);\r\n        connectedInputText.input.onBlurObservable.remove(connectedInputText.onBlurObserver);\r\n    }\r\n\r\n    /**\r\n     * Release all resources\r\n     */\r\n    public dispose(): void {\r\n        super.dispose();\r\n\r\n        this.disconnect();\r\n    }\r\n\r\n    // Statics\r\n\r\n    /**\r\n     * Creates a new keyboard using a default layout\r\n     *\r\n     * @param name defines control name\r\n     * @returns a new VirtualKeyboard\r\n     */\r\n    public static CreateDefaultLayout(name?: string): VirtualKeyboard {\r\n        let returnValue = new VirtualKeyboard(name);\r\n\r\n        returnValue.addKeysRow([\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"0\", \"\\u2190\"]);\r\n        returnValue.addKeysRow([\"q\", \"w\", \"e\", \"r\", \"t\", \"y\", \"u\", \"i\", \"o\", \"p\"]);\r\n        returnValue.addKeysRow([\"a\", \"s\", \"d\", \"f\", \"g\", \"h\", \"j\", \"k\", \"l\", \";\", \"'\", \"\\u21B5\"]);\r\n        returnValue.addKeysRow([\"\\u21E7\", \"z\", \"x\", \"c\", \"v\", \"b\", \"n\", \"m\", \",\", \".\", \"/\"]);\r\n        returnValue.addKeysRow([\" \"], [{ width: \"200px\" }]);\r\n\r\n        return returnValue;\r\n    }\r\n}\r\n\r\n_TypeStore.RegisteredTypes[\"BABYLON.GUI.VirtualKeyboard\"] = VirtualKeyboard;\r\n", "import { Control } from \"./control\";\r\nimport { _TypeStore } from '@babylonjs/core/Misc/typeStore';\r\nimport { Nullable } from '@babylonjs/core/types';\r\nimport { Measure } from '../measure';\r\n\r\n/** Class used to render a grid  */\r\nexport class DisplayGrid extends Control {\r\n    private _cellWidth = 20;\r\n    private _cellHeight = 20;\r\n\r\n    private _minorLineTickness = 1;\r\n    private _minorLineColor = \"DarkGray\";\r\n\r\n    private _majorLineTickness = 2;\r\n    private _majorLineColor = \"White\";\r\n\r\n    private _majorLineFrequency = 5;\r\n\r\n    private _background = \"Black\";\r\n\r\n    private _displayMajorLines = true;\r\n    private _displayMinorLines = true;\r\n\r\n    /** Gets or sets a boolean indicating if minor lines must be rendered (true by default)) */\r\n    public get displayMinorLines(): boolean {\r\n        return this._displayMinorLines;\r\n    }\r\n\r\n    public set displayMinorLines(value: boolean) {\r\n        if (this._displayMinorLines === value) {\r\n            return;\r\n        }\r\n\r\n        this._displayMinorLines = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets a boolean indicating if major lines must be rendered (true by default)) */\r\n    public get displayMajorLines(): boolean {\r\n        return this._displayMajorLines;\r\n    }\r\n\r\n    public set displayMajorLines(value: boolean) {\r\n        if (this._displayMajorLines === value) {\r\n            return;\r\n        }\r\n\r\n        this._displayMajorLines = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets background color (Black by default) */\r\n    public get background(): string {\r\n        return this._background;\r\n    }\r\n\r\n    public set background(value: string) {\r\n        if (this._background === value) {\r\n            return;\r\n        }\r\n\r\n        this._background = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets the width of each cell (20 by default) */\r\n    public get cellWidth(): number {\r\n        return this._cellWidth;\r\n    }\r\n\r\n    public set cellWidth(value: number) {\r\n        this._cellWidth = value;\r\n\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets the height of each cell (20 by default) */\r\n    public get cellHeight(): number {\r\n        return this._cellHeight;\r\n    }\r\n\r\n    public set cellHeight(value: number) {\r\n        this._cellHeight = value;\r\n\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets the tickness of minor lines (1 by default) */\r\n    public get minorLineTickness(): number {\r\n        return this._minorLineTickness;\r\n    }\r\n\r\n    public set minorLineTickness(value: number) {\r\n        this._minorLineTickness = value;\r\n\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets the color of minor lines (DarkGray by default) */\r\n    public get minorLineColor(): string {\r\n        return this._minorLineColor;\r\n    }\r\n\r\n    public set minorLineColor(value: string) {\r\n        this._minorLineColor = value;\r\n\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets the tickness of major lines (2 by default) */\r\n    public get majorLineTickness(): number {\r\n        return this._majorLineTickness;\r\n    }\r\n\r\n    public set majorLineTickness(value: number) {\r\n        this._majorLineTickness = value;\r\n\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets the color of major lines (White by default) */\r\n    public get majorLineColor(): string {\r\n        return this._majorLineColor;\r\n    }\r\n\r\n    public set majorLineColor(value: string) {\r\n        this._majorLineColor = value;\r\n\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /** Gets or sets the frequency of major lines (default is 1 every 5 minor lines)*/\r\n    public get majorLineFrequency(): number {\r\n        return this._majorLineFrequency;\r\n    }\r\n\r\n    public set majorLineFrequency(value: number) {\r\n        this._majorLineFrequency = value;\r\n\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Creates a new GridDisplayRectangle\r\n     * @param name defines the control name\r\n     */\r\n    constructor(public name?: string) {\r\n        super(name);\r\n    }\r\n\r\n    public _draw(context: CanvasRenderingContext2D, invalidatedRectangle?: Nullable<Measure>): void {\r\n        context.save();\r\n\r\n        this._applyStates(context);\r\n\r\n        if (this._isEnabled) {\r\n\r\n            if (this._background) {\r\n                context.fillStyle = this._background;\r\n                context.fillRect(this._currentMeasure.left, this._currentMeasure.top, this._currentMeasure.width, this._currentMeasure.height);\r\n            }\r\n\r\n            let cellCountX = this._currentMeasure.width / this._cellWidth;\r\n            let cellCountY = this._currentMeasure.height / this._cellHeight;\r\n\r\n            // Minor lines\r\n            const left = this._currentMeasure.left + this._currentMeasure.width / 2;\r\n            const top = this._currentMeasure.top + this._currentMeasure.height / 2;\r\n\r\n            if (this._displayMinorLines) {\r\n                context.strokeStyle = this._minorLineColor;\r\n                context.lineWidth = this._minorLineTickness;\r\n\r\n                for (var x = -cellCountX / 2; x < cellCountX / 2; x++) {\r\n                    const cellX = left + x * this.cellWidth;\r\n\r\n                    context.beginPath();\r\n                    context.moveTo(cellX, this._currentMeasure.top);\r\n                    context.lineTo(cellX, this._currentMeasure.top + this._currentMeasure.height);\r\n\r\n                    context.stroke();\r\n                }\r\n\r\n                for (var y = -cellCountY / 2; y < cellCountY / 2; y++) {\r\n                    const cellY = top + y * this.cellHeight;\r\n\r\n                    context.beginPath();\r\n                    context.moveTo(this._currentMeasure.left, cellY);\r\n                    context.lineTo(this._currentMeasure.left + this._currentMeasure.width, cellY);\r\n                    context.stroke();\r\n                }\r\n            }\r\n\r\n            // Major lines\r\n            if (this._displayMajorLines) {\r\n                context.strokeStyle = this._majorLineColor;\r\n                context.lineWidth = this._majorLineTickness;\r\n\r\n                for (var x = -cellCountX / 2 + this._majorLineFrequency; x < cellCountX / 2; x += this._majorLineFrequency) {\r\n                    let cellX = left + x * this.cellWidth;\r\n\r\n                    context.beginPath();\r\n                    context.moveTo(cellX, this._currentMeasure.top);\r\n                    context.lineTo(cellX, this._currentMeasure.top + this._currentMeasure.height);\r\n                    context.stroke();\r\n                }\r\n\r\n                for (var y = -cellCountY / 2 + this._majorLineFrequency; y < cellCountY / 2; y += this._majorLineFrequency) {\r\n                    let cellY = top + y * this.cellHeight;\r\n                    context.moveTo(this._currentMeasure.left, cellY);\r\n                    context.lineTo(this._currentMeasure.left + this._currentMeasure.width, cellY);\r\n                    context.closePath();\r\n                    context.stroke();\r\n                }\r\n            }\r\n        }\r\n\r\n        context.restore();\r\n    }\r\n\r\n    protected _getTypeName(): string {\r\n        return \"DisplayGrid\";\r\n    }\r\n}\r\n_TypeStore.RegisteredTypes[\"BABYLON.GUI.DisplayGrid\"] = DisplayGrid;", "import { BaseSlider } from \"./baseSlider\";\r\nimport { Measure } from \"../../measure\";\r\nimport { Image } from \"../image\";\r\nimport { _TypeStore } from '@babylonjs/core/Misc/typeStore';\r\nimport { Nullable } from '@babylonjs/core/types';\r\n\r\n/**\r\n * Class used to create slider controls based on images\r\n */\r\nexport class ImageBasedSlider extends BaseSlider {\r\n    private _backgroundImage: Image;\r\n    private _thumbImage: Image;\r\n    private _valueBarImage: Image;\r\n\r\n    private _tempMeasure = new Measure(0, 0, 0, 0);\r\n\r\n    public get displayThumb(): boolean {\r\n        return this._displayThumb && this.thumbImage != null;\r\n    }\r\n\r\n    public set displayThumb(value: boolean) {\r\n        if (this._displayThumb === value) {\r\n            return;\r\n        }\r\n\r\n        this._displayThumb = value;\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the image used to render the background\r\n     */\r\n    public get backgroundImage(): Image {\r\n        return this._backgroundImage;\r\n    }\r\n\r\n    public set backgroundImage(value: Image) {\r\n        if (this._backgroundImage === value) {\r\n            return;\r\n        }\r\n\r\n        this._backgroundImage = value;\r\n\r\n        if (value && !value.isLoaded) {\r\n            value.onImageLoadedObservable.addOnce(() => this._markAsDirty());\r\n        }\r\n\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the image used to render the value bar\r\n     */\r\n    public get valueBarImage(): Image {\r\n        return this._valueBarImage;\r\n    }\r\n\r\n    public set valueBarImage(value: Image) {\r\n        if (this._valueBarImage === value) {\r\n            return;\r\n        }\r\n\r\n        this._valueBarImage = value;\r\n\r\n        if (value && !value.isLoaded) {\r\n            value.onImageLoadedObservable.addOnce(() => this._markAsDirty());\r\n        }\r\n\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the image used to render the thumb\r\n     */\r\n    public get thumbImage(): Image {\r\n        return this._thumbImage;\r\n    }\r\n\r\n    public set thumbImage(value: Image) {\r\n        if (this._thumbImage === value) {\r\n            return;\r\n        }\r\n\r\n        this._thumbImage = value;\r\n\r\n        if (value && !value.isLoaded) {\r\n            value.onImageLoadedObservable.addOnce(() => this._markAsDirty());\r\n        }\r\n\r\n        this._markAsDirty();\r\n    }\r\n\r\n    /**\r\n     * Creates a new ImageBasedSlider\r\n     * @param name defines the control name\r\n     */\r\n    constructor(public name?: string) {\r\n        super(name);\r\n    }\r\n\r\n    protected _getTypeName(): string {\r\n        return \"ImageBasedSlider\";\r\n    }\r\n\r\n    public _draw(context: CanvasRenderingContext2D, invalidatedRectangle?: Nullable<Measure>): void {\r\n        context.save();\r\n\r\n        this._applyStates(context);\r\n\r\n        this._prepareRenderingData(\"rectangle\");\r\n        const thumbPosition = this._getThumbPosition();\r\n        var left = this._renderLeft;\r\n        var top = this._renderTop;\r\n        var width = this._renderWidth;\r\n        var height = this._renderHeight;\r\n\r\n        // Background\r\n        if (this._backgroundImage) {\r\n            this._tempMeasure.copyFromFloats(left, top, width, height);\r\n            if (this.isThumbClamped && this.displayThumb) {\r\n                if (this.isVertical) {\r\n                    this._tempMeasure.height += this._effectiveThumbThickness;\r\n                } else {\r\n                    this._tempMeasure.width += this._effectiveThumbThickness;\r\n                }\r\n            }\r\n            this._backgroundImage._currentMeasure.copyFrom(this._tempMeasure);\r\n            this._backgroundImage._draw(context);\r\n        }\r\n\r\n        // Bar\r\n        if (this._valueBarImage) {\r\n            if (this.isVertical) {\r\n                if (this.isThumbClamped && this.displayThumb) {\r\n                    this._tempMeasure.copyFromFloats(left, top + thumbPosition, width, height - thumbPosition + this._effectiveThumbThickness);\r\n                } else {\r\n                    this._tempMeasure.copyFromFloats(left, top + thumbPosition, width, height - thumbPosition);\r\n                }\r\n            } else {\r\n                if (this.isThumbClamped && this.displayThumb) {\r\n                    this._tempMeasure.copyFromFloats(left, top, thumbPosition + this._effectiveThumbThickness / 2, height);\r\n                }\r\n                else {\r\n                    this._tempMeasure.copyFromFloats(left, top, thumbPosition, height);\r\n                }\r\n            }\r\n            this._valueBarImage._currentMeasure.copyFrom(this._tempMeasure);\r\n            this._valueBarImage._draw(context);\r\n        }\r\n\r\n        // Thumb\r\n        if (this.displayThumb) {\r\n            if (this.isVertical) {\r\n                this._tempMeasure.copyFromFloats(left - this._effectiveBarOffset, this._currentMeasure.top + thumbPosition, this._currentMeasure.width, this._effectiveThumbThickness);\r\n            } else {\r\n                this._tempMeasure.copyFromFloats(this._currentMeasure.left + thumbPosition, this._currentMeasure.top, this._effectiveThumbThickness, this._currentMeasure.height);\r\n            }\r\n\r\n            this._thumbImage._currentMeasure.copyFrom(this._tempMeasure);\r\n            this._thumbImage._draw(context);\r\n        }\r\n\r\n        context.restore();\r\n    }\r\n}\r\n_TypeStore.RegisteredTypes[\"BABYLON.GUI.ImageBasedSlider\"] = ImageBasedSlider;", "import { Control } from \"./control\";\r\nimport { StackPanel } from \"./stackPanel\";\r\nimport { TextBlock } from \"./textBlock\";\r\n\r\n/**\r\n * Forcing an export so that this code will execute\r\n * @hidden\r\n */\r\nconst name = \"Statics\";\r\n\r\nexport { name };\r\n\r\n/**\r\n * Creates a stack panel that can be used to render headers\r\n * @param control defines the control to associate with the header\r\n * @param text defines the text of the header\r\n * @param size defines the size of the header\r\n * @param options defines options used to configure the header\r\n * @returns a new StackPanel\r\n */\r\nControl.AddHeader = function(control: Control, text: string, size: string | number, options: { isHorizontal: boolean, controlFirst: boolean }): StackPanel {\r\n    let panel = new StackPanel(\"panel\");\r\n    let isHorizontal = options ? options.isHorizontal : true;\r\n    let controlFirst = options ? options.controlFirst : true;\r\n\r\n    panel.isVertical = !isHorizontal;\r\n\r\n    let header = new TextBlock(\"header\");\r\n    header.text = text;\r\n    header.textHorizontalAlignment = Control.HORIZONTAL_ALIGNMENT_LEFT;\r\n    if (isHorizontal) {\r\n        header.width = size;\r\n    } else {\r\n        header.height = size;\r\n    }\r\n\r\n    if (controlFirst) {\r\n        panel.addControl(control);\r\n        panel.addControl(header);\r\n        header.paddingLeft = \"5px\";\r\n    } else {\r\n        panel.addControl(header);\r\n        panel.addControl(control);\r\n        header.paddingRight = \"5px\";\r\n    }\r\n\r\n    header.shadowBlur = control.shadowBlur;\r\n    header.shadowColor = control.shadowColor;\r\n    header.shadowOffsetX = control.shadowOffsetX;\r\n    header.shadowOffsetY = control.shadowOffsetY;\r\n\r\n    return panel;\r\n};", "import { Observable } from \"@babylonjs/core/Misc/observable\";\r\nimport { IDisposable } from \"@babylonjs/core/scene\";\r\nimport { AdvancedDynamicTexture } from \"./advancedDynamicTexture\";\r\nimport { ValueAndUnit } from \"./valueAndUnit\";\r\n\r\n/**\r\n * Define a style used by control to automatically setup properties based on a template.\r\n * Only support font related properties so far\r\n */\r\nexport class Style implements IDisposable {\r\n    private _fontFamily = \"Arial\";\r\n    private _fontStyle = \"\";\r\n    private _fontWeight = \"\";\r\n    /** @hidden */\r\n    public _host: AdvancedDynamicTexture;\r\n    /** @hidden */\r\n    public _fontSize = new ValueAndUnit(18, ValueAndUnit.UNITMODE_PIXEL, false);\r\n\r\n    /**\r\n     * Observable raised when the style values are changed\r\n     */\r\n    public onChangedObservable = new Observable<Style>();\r\n\r\n    /**\r\n     * Creates a new style object\r\n     * @param host defines the AdvancedDynamicTexture which hosts this style\r\n     */\r\n    public constructor(host: AdvancedDynamicTexture) {\r\n        this._host = host;\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the font size\r\n     */\r\n    public get fontSize(): string | number {\r\n        return this._fontSize.toString(this._host);\r\n    }\r\n\r\n    public set fontSize(value: string | number) {\r\n        if (this._fontSize.toString(this._host) === value) {\r\n            return;\r\n        }\r\n\r\n        if (this._fontSize.fromString(value)) {\r\n            this.onChangedObservable.notifyObservers(this);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the font family\r\n     */\r\n    public get fontFamily(): string {\r\n        return this._fontFamily;\r\n    }\r\n\r\n    public set fontFamily(value: string) {\r\n        if (this._fontFamily === value) {\r\n            return;\r\n        }\r\n\r\n        this._fontFamily = value;\r\n        this.onChangedObservable.notifyObservers(this);\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the font style\r\n     */\r\n    public get fontStyle(): string {\r\n        return this._fontStyle;\r\n    }\r\n\r\n    public set fontStyle(value: string) {\r\n        if (this._fontStyle === value) {\r\n            return;\r\n        }\r\n\r\n        this._fontStyle = value;\r\n        this.onChangedObservable.notifyObservers(this);\r\n    }\r\n\r\n    /** Gets or sets font weight */\r\n    public get fontWeight(): string {\r\n        return this._fontWeight;\r\n    }\r\n\r\n    public set fontWeight(value: string) {\r\n        if (this._fontWeight === value) {\r\n            return;\r\n        }\r\n\r\n        this._fontWeight = value;\r\n        this.onChangedObservable.notifyObservers(this);\r\n    }\r\n\r\n    /** Dispose all associated resources */\r\n    public dispose() {\r\n        this.onChangedObservable.clear();\r\n    }\r\n}", "import { Nullable } from \"@babylonjs/core/types\";\nimport { Observable, Observer } from \"@babylonjs/core/Misc/observable\";\nimport { Vector2, Vector3, Matrix } from \"@babylonjs/core/Maths/math.vector\";\nimport { Tools } from \"@babylonjs/core/Misc/tools\";\nimport { PointerInfoPre, PointerInfo, PointerEventTypes, PointerInfoBase } from '@babylonjs/core/Events/pointerEvents';\nimport { ClipboardEventTypes, ClipboardInfo } from \"@babylonjs/core/Events/clipboardEvents\";\nimport { KeyboardInfoPre, KeyboardEventTypes } from \"@babylonjs/core/Events/keyboardEvents\";\nimport { Camera } from \"@babylonjs/core/Cameras/camera\";\nimport { StandardMaterial } from \"@babylonjs/core/Materials/standardMaterial\";\nimport { Texture } from \"@babylonjs/core/Materials/Textures/texture\";\nimport { DynamicTexture } from \"@babylonjs/core/Materials/Textures/dynamicTexture\";\nimport { AbstractMesh } from \"@babylonjs/core/Meshes/abstractMesh\";\nimport { Layer } from \"@babylonjs/core/Layers/layer\";\nimport { Engine } from \"@babylonjs/core/Engines/engine\";\nimport { Scene } from \"@babylonjs/core/scene\";\n\nimport { Container } from \"./controls/container\";\nimport { Control } from \"./controls/control\";\nimport { Style } from \"./style\";\nimport { Measure } from \"./measure\";\nimport { Constants } from '@babylonjs/core/Engines/constants';\nimport { Viewport } from '@babylonjs/core/Maths/math.viewport';\nimport { Color3 } from '@babylonjs/core/Maths/math.color';\n/**\n* Interface used to define a control that can receive focus\n*/\nexport interface IFocusableControl {\n    /**\n     * Function called when the control receives the focus\n     */\n    onFocus(): void;\n    /**\n     * Function called when the control loses the focus\n     */\n    onBlur(): void;\n    /**\n     * Function called to let the control handle keyboard events\n     * @param evt defines the current keyboard event\n     */\n    processKeyboard(evt: KeyboardEvent): void;\n    /**\n    * Function called to get the list of controls that should not steal the focus from this control\n    * @returns an array of controls\n    */\n    keepsFocusWith(): Nullable<Control[]>;\n}\n/**\n* Class used to create texture to support 2D GUI elements\n* @see https://doc.babylonjs.com/how_to/gui\n*/\nexport class AdvancedDynamicTexture extends DynamicTexture {\n    private _isDirty = false;\n    private _renderObserver: Nullable<Observer<Camera>>;\n    private _resizeObserver: Nullable<Observer<Engine>>;\n    private _preKeyboardObserver: Nullable<Observer<KeyboardInfoPre>>;\n    private _pointerMoveObserver: Nullable<Observer<PointerInfoPre>>;\n    private _pointerObserver: Nullable<Observer<PointerInfo>>;\n    private _canvasPointerOutObserver: Nullable<Observer<PointerEvent>>;\n    private _canvasBlurObserver: Nullable<Observer<Engine>>;\n    private _background: string;\n    /** @hidden */\n    public _rootContainer = new Container(\"root\");\n    /** @hidden */\n    public _lastPickedControl: Control;\n    /** @hidden */\n    public _lastControlOver: { [pointerId: number]: Control } = {};\n    /** @hidden */\n    public _lastControlDown: { [pointerId: number]: Control } = {};\n    /** @hidden */\n    public _capturingControl: { [pointerId: number]: Control } = {};\n    /** @hidden */\n    public _shouldBlockPointer: boolean;\n    /** @hidden */\n    public _layerToDispose: Nullable<Layer>;\n    /** @hidden */\n    public _linkedControls = new Array<Control>();\n    private _isFullscreen = false;\n    private _fullscreenViewport = new Viewport(0, 0, 1, 1);\n    private _idealWidth = 0;\n    private _idealHeight = 0;\n    private _useSmallestIdeal: boolean = false;\n    private _renderAtIdealSize = false;\n    private _focusedControl: Nullable<IFocusableControl>;\n    private _blockNextFocusCheck = false;\n    private _renderScale = 1;\n    private _rootElement: Nullable<HTMLElement>;\n    private _cursorChanged = false;\n    private _defaultMousePointerId = 0;\n\n    /** @hidden */\n    public _numLayoutCalls = 0;\n    /** Gets the number of layout calls made the last time the ADT has been rendered */\n    public get numLayoutCalls(): number {\n        return this._numLayoutCalls;\n    }\n\n    /** @hidden */\n    public _numRenderCalls = 0;\n    /** Gets the number of render calls made the last time the ADT has been rendered */\n    public get numRenderCalls(): number {\n        return this._numRenderCalls;\n    }\n\n    /**\n    * Define type to string to ensure compatibility across browsers\n    * Safari doesn't support DataTransfer constructor\n    */\n    private _clipboardData: string = \"\";\n    /**\n    * Observable event triggered each time an clipboard event is received from the rendering canvas\n    */\n    public onClipboardObservable = new Observable<ClipboardInfo>();\n    /**\n    * Observable event triggered each time a pointer down is intercepted by a control\n    */\n    public onControlPickedObservable = new Observable<Control>();\n    /**\n    * Observable event triggered before layout is evaluated\n    */\n    public onBeginLayoutObservable = new Observable<AdvancedDynamicTexture>();\n    /**\n    * Observable event triggered after the layout was evaluated\n    */\n    public onEndLayoutObservable = new Observable<AdvancedDynamicTexture>();\n    /**\n    * Observable event triggered before the texture is rendered\n    */\n    public onBeginRenderObservable = new Observable<AdvancedDynamicTexture>();\n    /**\n    * Observable event triggered after the texture was rendered\n    */\n    public onEndRenderObservable = new Observable<AdvancedDynamicTexture>();\n    /**\n    * Gets or sets a boolean defining if alpha is stored as premultiplied\n    */\n    public premulAlpha = false;\n    /**\n     * Gets or sets a boolean indicating that the canvas must be reverted on Y when updating the texture\n     */\n    public applyYInversionOnUpdate = true;\n    /**\n    * Gets or sets a number used to scale rendering size (2 means that the texture will be twice bigger).\n    * Useful when you want more antialiasing\n    */\n    public get renderScale(): number {\n        return this._renderScale;\n    }\n    public set renderScale(value: number) {\n        if (value === this._renderScale) {\n            return;\n        }\n        this._renderScale = value;\n        this._onResize();\n    }\n    /** Gets or sets the background color */\n    public get background(): string {\n        return this._background;\n    }\n    public set background(value: string) {\n        if (this._background === value) {\n            return;\n        }\n        this._background = value;\n        this.markAsDirty();\n    }\n    /**\n    * Gets or sets the ideal width used to design controls.\n    * The GUI will then rescale everything accordingly\n    * @see https://doc.babylonjs.com/how_to/gui#adaptive-scaling\n    */\n    public get idealWidth(): number {\n        return this._idealWidth;\n    }\n    public set idealWidth(value: number) {\n        if (this._idealWidth === value) {\n            return;\n        }\n        this._idealWidth = value;\n        this.markAsDirty();\n        this._rootContainer._markAllAsDirty();\n    }\n    /**\n    * Gets or sets the ideal height used to design controls.\n    * The GUI will then rescale everything accordingly\n    * @see https://doc.babylonjs.com/how_to/gui#adaptive-scaling\n    */\n    public get idealHeight(): number {\n        return this._idealHeight;\n    }\n    public set idealHeight(value: number) {\n        if (this._idealHeight === value) {\n            return;\n        }\n        this._idealHeight = value;\n        this.markAsDirty();\n        this._rootContainer._markAllAsDirty();\n    }\n    /**\n    * Gets or sets a boolean indicating if the smallest ideal value must be used if idealWidth and idealHeight are both set\n    * @see https://doc.babylonjs.com/how_to/gui#adaptive-scaling\n    */\n    public get useSmallestIdeal(): boolean {\n        return this._useSmallestIdeal;\n    }\n    public set useSmallestIdeal(value: boolean) {\n        if (this._useSmallestIdeal === value) {\n            return;\n        }\n        this._useSmallestIdeal = value;\n        this.markAsDirty();\n        this._rootContainer._markAllAsDirty();\n    }\n    /**\n    * Gets or sets a boolean indicating if adaptive scaling must be used\n    * @see https://doc.babylonjs.com/how_to/gui#adaptive-scaling\n    */\n    public get renderAtIdealSize(): boolean {\n        return this._renderAtIdealSize;\n    }\n    public set renderAtIdealSize(value: boolean) {\n        if (this._renderAtIdealSize === value) {\n            return;\n        }\n        this._renderAtIdealSize = value;\n        this._onResize();\n    }\n\n    /**\n     * Gets the ratio used when in \"ideal mode\"\n    * @see https://doc.babylonjs.com/how_to/gui#adaptive-scaling\n     * */\n    public get idealRatio(): number {\n        var rwidth: number = 0;\n        var rheight: number = 0;\n\n        if (this._idealWidth) {\n            rwidth = (this.getSize().width) / this._idealWidth;\n        }\n\n        if (this._idealHeight) {\n            rheight = (this.getSize().height) / this._idealHeight;\n        }\n\n        if (this._useSmallestIdeal && this._idealWidth && this._idealHeight) {\n            return window.innerWidth < window.innerHeight ? rwidth : rheight;\n        }\n\n        if (this._idealWidth) { // horizontal\n            return rwidth;\n        }\n\n        if (this._idealHeight) { // vertical\n            return rheight;\n        }\n\n        return 1;\n    }\n\n    /**\n    * Gets the underlying layer used to render the texture when in fullscreen mode\n    */\n    public get layer(): Nullable<Layer> {\n        return this._layerToDispose;\n    }\n    /**\n    * Gets the root container control\n    */\n    public get rootContainer(): Container {\n        return this._rootContainer;\n    }\n    /**\n    * Returns an array containing the root container.\n    * This is mostly used to let the Inspector introspects the ADT\n    * @returns an array containing the rootContainer\n    */\n    public getChildren(): Array<Container> {\n        return [this._rootContainer];\n    }\n    /**\n    * Will return all controls that are inside this texture\n    * @param directDescendantsOnly defines if true only direct descendants of 'this' will be considered, if false direct and also indirect (children of children, an so on in a recursive manner) descendants of 'this' will be considered\n    * @param predicate defines an optional predicate that will be called on every evaluated child, the predicate must return true for a given child to be part of the result, otherwise it will be ignored\n    * @return all child controls\n    */\n    public getDescendants(directDescendantsOnly?: boolean, predicate?: (control: Control) => boolean): Control[] {\n        return this._rootContainer.getDescendants(directDescendantsOnly, predicate);\n    }\n    /**\n    * Gets or sets the current focused control\n    */\n    public get focusedControl(): Nullable<IFocusableControl> {\n        return this._focusedControl;\n    }\n    public set focusedControl(control: Nullable<IFocusableControl>) {\n        if (this._focusedControl == control) {\n            return;\n        }\n        if (this._focusedControl) {\n            this._focusedControl.onBlur();\n        }\n        if (control) {\n            control.onFocus();\n        }\n        this._focusedControl = control;\n    }\n    /**\n    * Gets or sets a boolean indicating if the texture must be rendered in background or foreground when in fullscreen mode\n    */\n    public get isForeground(): boolean {\n        if (!this.layer) {\n            return true;\n        }\n        return (!this.layer.isBackground);\n    }\n    public set isForeground(value: boolean) {\n        if (!this.layer) {\n            return;\n        }\n        if (this.layer.isBackground === !value) {\n            return;\n        }\n        this.layer.isBackground = !value;\n    }\n    /**\n    * Gets or set information about clipboardData\n    */\n    public get clipboardData(): string {\n        return this._clipboardData;\n    }\n    public set clipboardData(value: string) {\n        this._clipboardData = value;\n    }\n    /**\n   * Creates a new AdvancedDynamicTexture\n   * @param name defines the name of the texture\n   * @param width defines the width of the texture\n   * @param height defines the height of the texture\n   * @param scene defines the hosting scene\n   * @param generateMipMaps defines a boolean indicating if mipmaps must be generated (false by default)\n   * @param samplingMode defines the texture sampling mode (Texture.NEAREST_SAMPLINGMODE by default)\n   * @param invertY defines if the texture needs to be inverted on the y axis during loading (true by default)\n   */\n    constructor(name: string, width = 0, height = 0, scene: Nullable<Scene>, generateMipMaps = false, samplingMode = Texture.NEAREST_SAMPLINGMODE, invertY?: boolean) {\n        super(name, { width: width, height: height }, scene, generateMipMaps, samplingMode, Constants.TEXTUREFORMAT_RGBA, invertY);\n        scene = this.getScene();\n        if (!scene || !this._texture) {\n            return;\n        }\n        this._rootElement = scene.getEngine()!.getInputElement()!;\n        this._renderObserver = scene.onBeforeCameraRenderObservable.add((camera: Camera) => this._checkUpdate(camera));\n        this._preKeyboardObserver = scene.onPreKeyboardObservable.add((info) => {\n            if (!this._focusedControl) {\n                return;\n            }\n            if (info.type === KeyboardEventTypes.KEYDOWN) {\n                this._focusedControl.processKeyboard(info.event);\n            }\n            info.skipOnPointerObservable = true;\n        });\n        this._rootContainer._link(this);\n        this.hasAlpha = true;\n        if (!width || !height) {\n            this._resizeObserver = scene.getEngine().onResizeObservable.add(() => this._onResize());\n            this._onResize();\n        }\n        this._texture.isReady = true;\n    }\n    /**\n    * Get the current class name of the texture useful for serialization or dynamic coding.\n    * @returns \"AdvancedDynamicTexture\"\n    */\n    public getClassName(): string {\n        return \"AdvancedDynamicTexture\";\n    }\n    /**\n    * Function used to execute a function on all controls\n    * @param func defines the function to execute\n    * @param container defines the container where controls belong. If null the root container will be used\n    */\n    public executeOnAllControls(func: (control: Control) => void, container?: Container) {\n        if (!container) {\n            container = this._rootContainer;\n        }\n        func(container);\n        for (var child of container.children) {\n            if ((<any>child).children) {\n                this.executeOnAllControls(func, (<Container>child));\n                continue;\n            }\n            func(child);\n        }\n    }\n\n    private _useInvalidateRectOptimization = true;\n\n    /**\n     * Gets or sets a boolean indicating if the InvalidateRect optimization should be turned on\n     */\n    public get useInvalidateRectOptimization(): boolean {\n        return this._useInvalidateRectOptimization;\n    }\n\n    public set useInvalidateRectOptimization(value: boolean) {\n        this._useInvalidateRectOptimization = value;\n    }\n\n    // Invalidated rectangle which is the combination of all invalidated controls after they have been rotated into absolute position\n    private _invalidatedRectangle: Nullable<Measure> = null;\n    /**\n     * Invalidates a rectangle area on the gui texture\n     * @param invalidMinX left most position of the rectangle to invalidate in the texture\n     * @param invalidMinY top most position of the rectangle to invalidate in the texture\n     * @param invalidMaxX right most position of the rectangle to invalidate in the texture\n     * @param invalidMaxY bottom most position of the rectangle to invalidate in the texture\n     */\n    public invalidateRect(invalidMinX: number, invalidMinY: number, invalidMaxX: number, invalidMaxY: number) {\n        if (!this._useInvalidateRectOptimization) {\n            return;\n        }\n        if (!this._invalidatedRectangle) {\n            this._invalidatedRectangle = new Measure(invalidMinX, invalidMinY, invalidMaxX - invalidMinX + 1, invalidMaxY - invalidMinY + 1);\n        } else {\n            // Compute intersection\n            var maxX = Math.ceil(Math.max(this._invalidatedRectangle.left + this._invalidatedRectangle.width - 1, invalidMaxX));\n            var maxY = Math.ceil(Math.max(this._invalidatedRectangle.top + this._invalidatedRectangle.height - 1, invalidMaxY));\n            this._invalidatedRectangle.left = Math.floor(Math.min(this._invalidatedRectangle.left, invalidMinX));\n            this._invalidatedRectangle.top = Math.floor(Math.min(this._invalidatedRectangle.top, invalidMinY));\n            this._invalidatedRectangle.width = maxX - this._invalidatedRectangle.left + 1;\n            this._invalidatedRectangle.height = maxY - this._invalidatedRectangle.top + 1;\n        }\n    }\n    /**\n    * Marks the texture as dirty forcing a complete update\n    */\n    public markAsDirty() {\n        this._isDirty = true;\n    }\n    /**\n    * Helper function used to create a new style\n    * @returns a new style\n    * @see https://doc.babylonjs.com/how_to/gui#styles\n    */\n    public createStyle(): Style {\n        return new Style(this);\n    }\n    /**\n    * Adds a new control to the root container\n    * @param control defines the control to add\n    * @returns the current texture\n    */\n    public addControl(control: Control): AdvancedDynamicTexture {\n        this._rootContainer.addControl(control);\n        return this;\n    }\n    /**\n    * Removes a control from the root container\n    * @param control defines the control to remove\n    * @returns the current texture\n    */\n    public removeControl(control: Control): AdvancedDynamicTexture {\n        this._rootContainer.removeControl(control);\n        return this;\n    }\n    /**\n    * Release all resources\n    */\n    public dispose(): void {\n        let scene = this.getScene();\n        if (!scene) {\n            return;\n        }\n        this._rootElement = null;\n        scene.onBeforeCameraRenderObservable.remove(this._renderObserver);\n        if (this._resizeObserver) {\n            scene.getEngine().onResizeObservable.remove(this._resizeObserver);\n        }\n        if (this._pointerMoveObserver) {\n            scene.onPrePointerObservable.remove(this._pointerMoveObserver);\n        }\n        if (this._pointerObserver) {\n            scene.onPointerObservable.remove(this._pointerObserver);\n        }\n        if (this._preKeyboardObserver) {\n            scene.onPreKeyboardObservable.remove(this._preKeyboardObserver);\n        }\n        if (this._canvasPointerOutObserver) {\n            scene.getEngine().onCanvasPointerOutObservable.remove(this._canvasPointerOutObserver);\n        }\n        if (this._canvasBlurObserver) {\n            scene.getEngine().onCanvasBlurObservable.remove(this._canvasBlurObserver);\n        }\n        if (this._layerToDispose) {\n            this._layerToDispose.texture = null;\n            this._layerToDispose.dispose();\n            this._layerToDispose = null;\n        }\n        this._rootContainer.dispose();\n        this.onClipboardObservable.clear();\n        this.onControlPickedObservable.clear();\n        this.onBeginRenderObservable.clear();\n        this.onEndRenderObservable.clear();\n        this.onBeginLayoutObservable.clear();\n        this.onEndLayoutObservable.clear();\n        super.dispose();\n    }\n    private _onResize(): void {\n        let scene = this.getScene();\n        if (!scene) {\n            return;\n        }\n        // Check size\n        var engine = scene.getEngine();\n        var textureSize = this.getSize();\n        var renderWidth = engine.getRenderWidth() * this._renderScale;\n        var renderHeight = engine.getRenderHeight() * this._renderScale;\n\n        if (this._renderAtIdealSize) {\n            if (this._idealWidth) {\n                renderHeight = (renderHeight * this._idealWidth) / renderWidth;\n                renderWidth = this._idealWidth;\n            } else if (this._idealHeight) {\n                renderWidth = (renderWidth * this._idealHeight) / renderHeight;\n                renderHeight = this._idealHeight;\n            }\n        }\n        if (textureSize.width !== renderWidth || textureSize.height !== renderHeight) {\n            this.scaleTo(renderWidth, renderHeight);\n            this.markAsDirty();\n            if (this._idealWidth || this._idealHeight) {\n                this._rootContainer._markAllAsDirty();\n            }\n        }\n        this.invalidateRect(0, 0, textureSize.width - 1, textureSize.height - 1);\n    }\n    /** @hidden */\n    public _getGlobalViewport(scene: Scene): Viewport {\n        var engine = scene.getEngine();\n        return this._fullscreenViewport.toGlobal(engine.getRenderWidth(), engine.getRenderHeight());\n    }\n    /**\n    * Get screen coordinates for a vector3\n    * @param position defines the position to project\n    * @param worldMatrix defines the world matrix to use\n    * @returns the projected position\n    */\n    public getProjectedPosition(position: Vector3, worldMatrix: Matrix): Vector2 {\n        var scene = this.getScene();\n        if (!scene) {\n            return Vector2.Zero();\n        }\n        var globalViewport = this._getGlobalViewport(scene);\n        var projectedPosition = Vector3.Project(position, worldMatrix, scene.getTransformMatrix(), globalViewport);\n        projectedPosition.scaleInPlace(this.renderScale);\n        return new Vector2(projectedPosition.x, projectedPosition.y);\n    }\n    /**\n    * Get screen coordinates for a vector3\n    * @param position defines the position to project\n    * @param worldMatrix defines the world matrix to use\n    * @returns the projected position with Z\n    */\n    public getProjectedPositionWithZ(position: Vector3, worldMatrix: Matrix): Vector3 {\n        var scene = this.getScene();\n        if (!scene) {\n            return Vector3.Zero();\n        }\n        var globalViewport = this._getGlobalViewport(scene);\n        var projectedPosition = Vector3.Project(position, worldMatrix, scene.getTransformMatrix(), globalViewport);\n        projectedPosition.scaleInPlace(this.renderScale);\n        return new Vector3(projectedPosition.x, projectedPosition.y, projectedPosition.z);\n    }\n    private _checkUpdate(camera: Camera): void {\n        if (this._layerToDispose) {\n            if ((camera.layerMask & this._layerToDispose.layerMask) === 0) {\n                return;\n            }\n        }\n        if (this._isFullscreen && this._linkedControls.length) {\n            var scene = this.getScene();\n            if (!scene) {\n                return;\n            }\n            var globalViewport = this._getGlobalViewport(scene);\n            for (let control of this._linkedControls) {\n                if (!control.isVisible) {\n                    continue;\n                }\n                let mesh = control._linkedMesh as AbstractMesh;\n                if (!mesh || mesh.isDisposed()) {\n                    Tools.SetImmediate(() => {\n                        control.linkWithMesh(null);\n                    });\n                    continue;\n                }\n                let position = mesh.getBoundingInfo ? mesh.getBoundingInfo().boundingSphere.center : (Vector3.ZeroReadOnly as Vector3);\n                let projectedPosition = Vector3.Project(position, mesh.getWorldMatrix(), scene.getTransformMatrix(), globalViewport);\n                if (projectedPosition.z < 0 || projectedPosition.z > 1) {\n                    control.notRenderable = true;\n                    continue;\n                }\n                control.notRenderable = false;\n                // Account for RenderScale.\n                projectedPosition.scaleInPlace(this.renderScale);\n                control._moveToProjectedPosition(projectedPosition);\n            }\n        }\n        if (!this._isDirty && !this._rootContainer.isDirty) {\n            return;\n        }\n        this._isDirty = false;\n        this._render();\n        this.update(this.applyYInversionOnUpdate, this.premulAlpha);\n    }\n\n    private _clearMeasure = new Measure(0, 0, 0, 0);\n\n    private _render(): void {\n        var textureSize = this.getSize();\n        var renderWidth = textureSize.width;\n        var renderHeight = textureSize.height;\n\n        var context = this.getContext();\n        context.font = \"18px Arial\";\n        context.strokeStyle = \"white\";\n\n        // Layout\n        this.onBeginLayoutObservable.notifyObservers(this);\n        var measure = new Measure(0, 0, renderWidth, renderHeight);\n        this._numLayoutCalls = 0;\n        this._rootContainer._layout(measure, context);\n        this.onEndLayoutObservable.notifyObservers(this);\n        this._isDirty = false; // Restoring the dirty state that could have been set by controls during layout processing\n\n        // Clear\n        if (this._invalidatedRectangle) {\n            this._clearMeasure.copyFrom(this._invalidatedRectangle);\n        } else {\n            this._clearMeasure.copyFromFloats(0, 0, renderWidth, renderHeight);\n        }\n        context.clearRect(this._clearMeasure.left, this._clearMeasure.top, this._clearMeasure.width, this._clearMeasure.height);\n        if (this._background) {\n            context.save();\n            context.fillStyle = this._background;\n            context.fillRect(this._clearMeasure.left, this._clearMeasure.top, this._clearMeasure.width, this._clearMeasure.height);\n            context.restore();\n        }\n\n        // Render\n        this.onBeginRenderObservable.notifyObservers(this);\n        this._numRenderCalls = 0;\n        this._rootContainer._render(context, this._invalidatedRectangle);\n        this.onEndRenderObservable.notifyObservers(this);\n        this._invalidatedRectangle = null;\n    }\n    /** @hidden */\n    public _changeCursor(cursor: string) {\n        if (this._rootElement) {\n            this._rootElement.style.cursor = cursor;\n            this._cursorChanged = true;\n        }\n    }\n    /** @hidden */\n    public _registerLastControlDown(control: Control, pointerId: number) {\n        this._lastControlDown[pointerId] = control;\n        this.onControlPickedObservable.notifyObservers(control);\n    }\n    private _doPicking(x: number, y: number, pi: PointerInfoBase, type: number, pointerId: number, buttonIndex: number, deltaX?: number, deltaY?: number): void {\n        var scene = this.getScene();\n        if (!scene) {\n            return;\n        }\n        var engine = scene.getEngine();\n        var textureSize = this.getSize();\n        if (this._isFullscreen) {\n            let camera = scene.cameraToUseForPointers || scene.activeCamera;\n            let viewport = camera!.viewport;\n            x = x * (textureSize.width / (engine.getRenderWidth() * viewport.width));\n            y = y * (textureSize.height / (engine.getRenderHeight() * viewport.height));\n        }\n        if (this._capturingControl[pointerId]) {\n            this._capturingControl[pointerId]._processObservables(type, x, y, pi, pointerId, buttonIndex);\n            return;\n        }\n\n        this._cursorChanged = false;\n        if (!this._rootContainer._processPicking(x, y, pi, type, pointerId, buttonIndex, deltaX, deltaY)) {\n            this._changeCursor(\"\");\n            if (type === PointerEventTypes.POINTERMOVE) {\n                if (this._lastControlOver[pointerId]) {\n                    this._lastControlOver[pointerId]._onPointerOut(this._lastControlOver[pointerId], pi);\n                    delete this._lastControlOver[pointerId];\n                }\n            }\n        }\n\n        if (!this._cursorChanged) {\n            this._changeCursor(\"\");\n        }\n        this._manageFocus();\n    }\n    /** @hidden */\n    public _cleanControlAfterRemovalFromList(list: { [pointerId: number]: Control }, control: Control) {\n        for (var pointerId in list) {\n            if (!list.hasOwnProperty(pointerId)) {\n                continue;\n            }\n            var lastControlOver = list[pointerId];\n            if (lastControlOver === control) {\n                delete list[pointerId];\n            }\n        }\n    }\n    /** @hidden */\n    public _cleanControlAfterRemoval(control: Control) {\n        this._cleanControlAfterRemovalFromList(this._lastControlDown, control);\n        this._cleanControlAfterRemovalFromList(this._lastControlOver, control);\n    }\n    /** Attach to all scene events required to support pointer events */\n    public attach(): void {\n        var scene = this.getScene();\n        if (!scene) {\n            return;\n        }\n\n        let tempViewport = new Viewport(0, 0, 0, 0);\n\n        this._pointerMoveObserver = scene.onPrePointerObservable.add((pi, state) => {\n            if (scene!.isPointerCaptured((<PointerEvent>(pi.event)).pointerId)) {\n                return;\n            }\n            if (pi.type !== PointerEventTypes.POINTERMOVE\n                && pi.type !== PointerEventTypes.POINTERUP\n                && pi.type !== PointerEventTypes.POINTERDOWN\n                && pi.type !== PointerEventTypes.POINTERWHEEL) {\n                return;\n            }\n            if (!scene) {\n                return;\n            }\n\n            if (pi.type === PointerEventTypes.POINTERMOVE && (pi.event as PointerEvent).pointerId) {\n                this._defaultMousePointerId = (pi.event as PointerEvent).pointerId; // This is required to make sure we have the correct pointer ID for wheel\n            }\n\n            let camera = scene.cameraToUseForPointers || scene.activeCamera;\n            let engine = scene.getEngine();\n\n            if (!camera) {\n                tempViewport.x = 0;\n                tempViewport.y = 0;\n                tempViewport.width = engine.getRenderWidth();\n                tempViewport.height = engine.getRenderHeight();\n            } else {\n                camera.viewport.toGlobalToRef(engine.getRenderWidth(), engine.getRenderHeight(), tempViewport);\n            }\n\n            let x = scene.pointerX / engine.getHardwareScalingLevel() - tempViewport.x;\n            let y = scene.pointerY / engine.getHardwareScalingLevel() - (engine.getRenderHeight() - tempViewport.y - tempViewport.height);\n            this._shouldBlockPointer = false;\n            // Do picking modifies _shouldBlockPointer\n            let pointerId = (pi.event as PointerEvent).pointerId || this._defaultMousePointerId;\n            this._doPicking(x, y, pi, pi.type, pointerId, pi.event.button, (<MouseWheelEvent>pi.event).deltaX, (<MouseWheelEvent>pi.event).deltaY);\n            // Avoid overwriting a true skipOnPointerObservable to false\n            if (this._shouldBlockPointer) {\n                pi.skipOnPointerObservable = this._shouldBlockPointer;\n            }\n        });\n        this._attachToOnPointerOut(scene);\n        this._attachToOnBlur(scene);\n    }\n    /** @hidden */\n    private onClipboardCopy = (rawEvt: Event) => {\n        const evt = rawEvt as ClipboardEvent;\n        let ev = new ClipboardInfo(ClipboardEventTypes.COPY, evt);\n        this.onClipboardObservable.notifyObservers(ev);\n        evt.preventDefault();\n    }\n    /** @hidden */\n    private onClipboardCut = (rawEvt: Event) => {\n        const evt = rawEvt as ClipboardEvent;\n        let ev = new ClipboardInfo(ClipboardEventTypes.CUT, evt);\n        this.onClipboardObservable.notifyObservers(ev);\n        evt.preventDefault();\n    }\n    /** @hidden */\n    private onClipboardPaste = (rawEvt: Event) => {\n        const evt = rawEvt as ClipboardEvent;\n        let ev = new ClipboardInfo(ClipboardEventTypes.PASTE, evt);\n        this.onClipboardObservable.notifyObservers(ev);\n        evt.preventDefault();\n    }\n    /**\n    * Register the clipboard Events onto the canvas\n    */\n    public registerClipboardEvents(): void {\n        self.addEventListener(\"copy\", this.onClipboardCopy, false);\n        self.addEventListener(\"cut\", this.onClipboardCut, false);\n        self.addEventListener(\"paste\", this.onClipboardPaste, false);\n    }\n    /**\n     * Unregister the clipboard Events from the canvas\n     */\n    public unRegisterClipboardEvents(): void {\n        self.removeEventListener(\"copy\", this.onClipboardCopy);\n        self.removeEventListener(\"cut\", this.onClipboardCut);\n        self.removeEventListener(\"paste\", this.onClipboardPaste);\n    }\n    /**\n    * Connect the texture to a hosting mesh to enable interactions\n    * @param mesh defines the mesh to attach to\n    * @param supportPointerMove defines a boolean indicating if pointer move events must be catched as well\n    */\n    public attachToMesh(mesh: AbstractMesh, supportPointerMove = true): void {\n        var scene = this.getScene();\n        if (!scene) {\n            return;\n        }\n        this._pointerObserver = scene.onPointerObservable.add((pi, state) => {\n            if (pi.type !== PointerEventTypes.POINTERMOVE\n                && pi.type !== PointerEventTypes.POINTERUP\n                && pi.type !== PointerEventTypes.POINTERDOWN) {\n                return;\n            }\n\n            var pointerId = (pi.event as PointerEvent).pointerId || this._defaultMousePointerId;\n            if (pi.pickInfo && pi.pickInfo.hit && pi.pickInfo.pickedMesh === mesh) {\n                var uv = pi.pickInfo.getTextureCoordinates();\n                if (uv) {\n                    let size = this.getSize();\n                    this._doPicking(uv.x * size.width, (this.applyYInversionOnUpdate ? (1.0 - uv.y) : uv.y) * size.height, pi, pi.type, pointerId, pi.event.button);\n                }\n            } else if (pi.type === PointerEventTypes.POINTERUP) {\n                if (this._lastControlDown[pointerId]) {\n                    this._lastControlDown[pointerId]._forcePointerUp(pointerId);\n                }\n                delete this._lastControlDown[pointerId];\n                if (this.focusedControl) {\n                    const friendlyControls = this.focusedControl.keepsFocusWith();\n                    let canMoveFocus = true;\n                    if (friendlyControls) {\n                        for (var control of friendlyControls) {\n                            // Same host, no need to keep the focus\n                            if (this === control._host) {\n                                continue;\n                            }\n                            // Different hosts\n                            const otherHost = control._host;\n                            if (otherHost._lastControlOver[pointerId] && otherHost._lastControlOver[pointerId].isAscendant(control)) {\n                                canMoveFocus = false;\n                                break;\n                            }\n                        }\n                    }\n                    if (canMoveFocus) {\n                        this.focusedControl = null;\n                    }\n                }\n            } else if (pi.type === PointerEventTypes.POINTERMOVE) {\n                if (this._lastControlOver[pointerId]) {\n                    this._lastControlOver[pointerId]._onPointerOut(this._lastControlOver[pointerId], pi, true);\n                }\n                delete this._lastControlOver[pointerId];\n            }\n        });\n        mesh.enablePointerMoveEvents = supportPointerMove;\n        this._attachToOnPointerOut(scene);\n        this._attachToOnBlur(scene);\n    }\n    /**\n    * Move the focus to a specific control\n    * @param control defines the control which will receive the focus\n    */\n    public moveFocusToControl(control: IFocusableControl): void {\n        this.focusedControl = control;\n        this._lastPickedControl = <any>control;\n        this._blockNextFocusCheck = true;\n    }\n    private _manageFocus(): void {\n        if (this._blockNextFocusCheck) {\n            this._blockNextFocusCheck = false;\n            this._lastPickedControl = <any>this._focusedControl;\n            return;\n        }\n        // Focus management\n        if (this._focusedControl) {\n            if (this._focusedControl !== (<any>this._lastPickedControl)) {\n                if (this._lastPickedControl.isFocusInvisible) {\n                    return;\n                }\n                this.focusedControl = null;\n            }\n        }\n    }\n    private _attachToOnPointerOut(scene: Scene): void {\n        this._canvasPointerOutObserver = scene.getEngine().onCanvasPointerOutObservable.add((pointerEvent) => {\n            if (this._lastControlOver[pointerEvent.pointerId]) {\n                this._lastControlOver[pointerEvent.pointerId]._onPointerOut(this._lastControlOver[pointerEvent.pointerId], null);\n            }\n            delete this._lastControlOver[pointerEvent.pointerId];\n            if (this._lastControlDown[pointerEvent.pointerId] && this._lastControlDown[pointerEvent.pointerId] !== this._capturingControl[pointerEvent.pointerId]) {\n                this._lastControlDown[pointerEvent.pointerId]._forcePointerUp();\n                delete this._lastControlDown[pointerEvent.pointerId];\n            }\n        });\n    }\n    private _attachToOnBlur(scene: Scene): void {\n        this._canvasBlurObserver = scene.getEngine().onCanvasBlurObservable.add((pointerEvent) => {\n            Object.entries(this._lastControlDown).forEach(([key, value]) => {\n                value._onCanvasBlur();\n            });\n            this._lastControlDown = {};\n        });\n    }\n    // Statics\n    /**\n     * Creates a new AdvancedDynamicTexture in projected mode (ie. attached to a mesh)\n     * @param mesh defines the mesh which will receive the texture\n     * @param width defines the texture width (1024 by default)\n     * @param height defines the texture height (1024 by default)\n     * @param supportPointerMove defines a boolean indicating if the texture must capture move events (true by default)\n     * @param onlyAlphaTesting defines a boolean indicating that alpha blending will not be used (only alpha testing) (false by default)\n     * @param invertY defines if the texture needs to be inverted on the y axis during loading (true by default)\n     * @returns a new AdvancedDynamicTexture\n     */\n    public static CreateForMesh(mesh: AbstractMesh, width = 1024, height = 1024, supportPointerMove = true, onlyAlphaTesting = false, invertY?: boolean): AdvancedDynamicTexture {\n        var result = new AdvancedDynamicTexture(mesh.name + \" AdvancedDynamicTexture\", width, height, mesh.getScene(), true, Texture.TRILINEAR_SAMPLINGMODE, invertY);\n        var material = new StandardMaterial(\"AdvancedDynamicTextureMaterial\", mesh.getScene());\n        material.backFaceCulling = false;\n        material.diffuseColor = Color3.Black();\n        material.specularColor = Color3.Black();\n        if (onlyAlphaTesting) {\n            material.diffuseTexture = result;\n            material.emissiveTexture = result;\n            result.hasAlpha = true;\n        } else {\n            material.emissiveTexture = result;\n            material.opacityTexture = result;\n        }\n        mesh.material = material;\n        result.attachToMesh(mesh, supportPointerMove);\n        return result;\n    }\n\n    /**\n     * Creates a new AdvancedDynamicTexture in projected mode (ie. attached to a mesh) BUT do not create a new material for the mesh. You will be responsible for connecting the texture\n     * @param mesh defines the mesh which will receive the texture\n     * @param width defines the texture width (1024 by default)\n     * @param height defines the texture height (1024 by default)\n     * @param supportPointerMove defines a boolean indicating if the texture must capture move events (true by default)\n     * @param invertY defines if the texture needs to be inverted on the y axis during loading (true by default)\n     * @returns a new AdvancedDynamicTexture\n     */\n    public static CreateForMeshTexture(mesh: AbstractMesh, width = 1024, height = 1024, supportPointerMove = true, invertY?: boolean): AdvancedDynamicTexture {\n        var result = new AdvancedDynamicTexture(mesh.name + \" AdvancedDynamicTexture\", width, height, mesh.getScene(), true, Texture.TRILINEAR_SAMPLINGMODE, invertY);\n        result.attachToMesh(mesh, supportPointerMove);\n        return result;\n    }\n    /**\n    * Creates a new AdvancedDynamicTexture in fullscreen mode.\n    * In this mode the texture will rely on a layer for its rendering.\n    * This allows it to be treated like any other layer.\n    * As such, if you have a multi camera setup, you can set the layerMask on the GUI as well.\n    * LayerMask is set through advancedTexture.layer.layerMask\n    * @param name defines name for the texture\n    * @param foreground defines a boolean indicating if the texture must be rendered in foreground (default is true)\n    * @param scene defines the hsoting scene\n    * @param sampling defines the texture sampling mode (Texture.BILINEAR_SAMPLINGMODE by default)\n    * @returns a new AdvancedDynamicTexture\n    */\n    public static CreateFullscreenUI(name: string, foreground: boolean = true, scene: Nullable<Scene> = null, sampling = Texture.BILINEAR_SAMPLINGMODE): AdvancedDynamicTexture {\n        var result = new AdvancedDynamicTexture(name, 0, 0, scene, false, sampling);\n        // Display\n        var layer = new Layer(name + \"_layer\", null, scene, !foreground);\n        layer.texture = result;\n        result._layerToDispose = layer;\n        result._isFullscreen = true;\n        // Attach\n        result.attach();\n        return result;\n    }\n}\n", "\r\nimport { Nullable } from \"@babylonjs/core/types\";\r\nimport { Observer } from \"@babylonjs/core/Misc/observable\";\r\nimport { PerfCounter } from \"@babylonjs/core/Misc/perfCounter\";\r\nimport { IDisposable } from \"@babylonjs/core/scene\";\r\n\r\nimport { AdvancedDynamicTexture } from \"./advancedDynamicTexture\";\r\n\r\n/**\r\n * This class can be used to get instrumentation data from a AdvancedDynamicTexture object\r\n */\r\nexport class AdvancedDynamicTextureInstrumentation implements IDisposable {\r\n    private _captureRenderTime = false;\r\n    private _renderTime = new PerfCounter();\r\n\r\n    private _captureLayoutTime = false;\r\n    private _layoutTime = new PerfCounter();\r\n\r\n    // Observers\r\n    private _onBeginRenderObserver: Nullable<Observer<AdvancedDynamicTexture>> = null;\r\n    private _onEndRenderObserver: Nullable<Observer<AdvancedDynamicTexture>> = null;\r\n    private _onBeginLayoutObserver: Nullable<Observer<AdvancedDynamicTexture>> = null;\r\n    private _onEndLayoutObserver: Nullable<Observer<AdvancedDynamicTexture>> = null;\r\n\r\n    // Properties\r\n\r\n    /**\r\n     * Gets the perf counter used to capture render time\r\n     */\r\n    public get renderTimeCounter(): PerfCounter {\r\n        return this._renderTime;\r\n    }\r\n\r\n    /**\r\n     * Gets the perf counter used to capture layout time\r\n     */\r\n    public get layoutTimeCounter(): PerfCounter {\r\n        return this._layoutTime;\r\n    }\r\n\r\n    /**\r\n     * Enable or disable the render time capture\r\n     */\r\n    public get captureRenderTime(): boolean {\r\n        return this._captureRenderTime;\r\n    }\r\n\r\n    public set captureRenderTime(value: boolean) {\r\n        if (value === this._captureRenderTime) {\r\n            return;\r\n        }\r\n\r\n        this._captureRenderTime = value;\r\n\r\n        if (value) {\r\n            this._onBeginRenderObserver = this.texture.onBeginRenderObservable.add(() => {\r\n                this._renderTime.beginMonitoring();\r\n            });\r\n\r\n            this._onEndRenderObserver = this.texture.onEndRenderObservable.add(() => {\r\n                this._renderTime.endMonitoring(true);\r\n            });\r\n        } else {\r\n            this.texture.onBeginRenderObservable.remove(this._onBeginRenderObserver);\r\n            this._onBeginRenderObserver = null;\r\n            this.texture.onEndRenderObservable.remove(this._onEndRenderObserver);\r\n            this._onEndRenderObserver = null;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Enable or disable the layout time capture\r\n     */\r\n    public get captureLayoutTime(): boolean {\r\n        return this._captureLayoutTime;\r\n    }\r\n\r\n    public set captureLayoutTime(value: boolean) {\r\n        if (value === this._captureLayoutTime) {\r\n            return;\r\n        }\r\n\r\n        this._captureLayoutTime = value;\r\n\r\n        if (value) {\r\n            this._onBeginLayoutObserver = this.texture.onBeginLayoutObservable.add(() => {\r\n                this._layoutTime.beginMonitoring();\r\n            });\r\n\r\n            this._onEndLayoutObserver = this.texture.onEndLayoutObservable.add(() => {\r\n                this._layoutTime.endMonitoring(true);\r\n            });\r\n        } else {\r\n            this.texture.onBeginLayoutObservable.remove(this._onBeginLayoutObserver);\r\n            this._onBeginLayoutObserver = null;\r\n            this.texture.onEndLayoutObservable.remove(this._onEndLayoutObserver);\r\n            this._onEndLayoutObserver = null;\r\n        }\r\n    }\r\n    /**\r\n     * Instantiates a new advanced dynamic texture instrumentation.\r\n     * This class can be used to get instrumentation data from an AdvancedDynamicTexture object\r\n     * @param texture Defines the AdvancedDynamicTexture to instrument\r\n     */\r\n    public constructor(\r\n        /**\r\n         * Define the instrumented AdvancedDynamicTexture.\r\n         */\r\n        public texture: AdvancedDynamicTexture) {\r\n    }\r\n\r\n    /**\r\n     * Dispose and release associated resources.\r\n     */\r\n    public dispose() {\r\n        this.texture.onBeginRenderObservable.remove(this._onBeginRenderObserver);\r\n        this._onBeginRenderObserver = null;\r\n        this.texture.onEndRenderObservable.remove(this._onEndRenderObserver);\r\n        this._onEndRenderObserver = null;\r\n        this.texture.onBeginLayoutObservable.remove(this._onBeginLayoutObserver);\r\n        this._onBeginLayoutObserver = null;\r\n        this.texture.onEndLayoutObservable.remove(this._onEndLayoutObserver);\r\n        this._onEndLayoutObserver = null;\r\n\r\n        (<any>this.texture) = null;\r\n    }\r\n}", "import { _TypeStore } from '@babylonjs/core/Misc/typeStore';\r\n\r\n/**\r\n* Class used to load GUI via XML.\r\n*/\r\nexport class XmlLoader {\r\n    private _nodes: any = {};\r\n\r\n    private _nodeTypes: any = {\r\n        element: 1,\r\n        attribute: 2,\r\n        text: 3\r\n    };\r\n\r\n    private _isLoaded: boolean = false;\r\n\r\n    private _objectAttributes: any = {\r\n        \"textHorizontalAlignment\": 1,\r\n        \"textVerticalAlignment\": 2,\r\n        \"horizontalAlignment\": 3,\r\n        \"verticalAlignment\": 4,\r\n        \"stretch\": 5,\r\n    };\r\n\r\n    private _parentClass: any;\r\n\r\n    /**\r\n    * Create a new xml loader\r\n    * @param parentClass Sets the class context. Used when the loader is instanced inside a class and not in a global context\r\n    */\r\n    constructor(parentClass = null) {\r\n        if (parentClass) {\r\n            this._parentClass = parentClass;\r\n        }\r\n    }\r\n\r\n    private _getChainElement(attributeValue: any): any {\r\n        let element: any = window;\r\n\r\n        if (this._parentClass) {\r\n            element = this._parentClass;\r\n        }\r\n        let value = attributeValue;\r\n        value = value.split(\".\");\r\n\r\n        for (let i = 0; i < value.length; i++) {\r\n            element = element[value[i]];\r\n        }\r\n        return element;\r\n\r\n    }\r\n\r\n    private _getClassAttribute(attributeName: string): any {\r\n        const attribute = attributeName.split(\".\");\r\n        const className = _TypeStore.GetClass(\"BABYLON.GUI.\" + attribute[0]);\r\n        return className[attribute[1]];\r\n    }\r\n\r\n    private _createGuiElement(node: any, parent: any, linkParent: boolean = true): void {\r\n        try {\r\n            let className = _TypeStore.GetClass(\"BABYLON.GUI.\" + node.nodeName);\r\n            let guiNode = new className();\r\n\r\n            if (parent && linkParent) {\r\n                parent.addControl(guiNode);\r\n            }\r\n\r\n            for (let i = 0; i < node.attributes.length; i++) {\r\n\r\n                if (node.attributes[i].name.toLowerCase().includes(\"datasource\")) {\r\n                    continue;\r\n                }\r\n\r\n                if (node.attributes[i].name.toLowerCase().includes(\"observable\")) {\r\n\r\n                    let element = this._getChainElement(node.attributes[i].value);\r\n                    guiNode[node.attributes[i].name].add(element);\r\n\r\n                    continue;\r\n                } else if (node.attributes[i].name == \"linkWithMesh\") {\r\n                    if (this._parentClass) {\r\n                        guiNode.linkWithMesh(this._parentClass[node.attributes[i].value]);\r\n                    } else {\r\n                        guiNode.linkWithMesh(window[node.attributes[i].value]);\r\n                    }\r\n                } else if (node.attributes[i].value.startsWith(\"{{\") && node.attributes[i].value.endsWith(\"}}\")) {\r\n                    let element = this._getChainElement(node.attributes[i].value.substring(2, node.attributes[i].value.length - 2));\r\n                    guiNode[node.attributes[i].name] = element;\r\n                } else if (!this._objectAttributes[node.attributes[i].name]) {\r\n                    if (node.attributes[i].value == \"true\" || node.attributes[i].value == \"false\") {\r\n                        guiNode[node.attributes[i].name] = (node.attributes[i].value == 'true');\r\n                    } else {\r\n                        guiNode[node.attributes[i].name] = !isNaN(Number(node.attributes[i].value)) ? Number(node.attributes[i].value) : node.attributes[i].value;\r\n                    }\r\n                } else {\r\n                    guiNode[node.attributes[i].name] = this._getClassAttribute(node.attributes[i].value);\r\n                }\r\n            }\r\n\r\n            if (!node.attributes.getNamedItem(\"id\")) {\r\n                this._nodes[node.nodeName + Object.keys(this._nodes).length + \"_gen\"] = guiNode;\r\n                return guiNode;\r\n            }\r\n\r\n            let id = node.attributes.getNamedItem(\"id\").value;\r\n            if (id.startsWith(\"{{\") && id.endsWith(\"}}\")) {\r\n                id = this._getChainElement(id.substring(2, id.length - 2));\r\n            }\r\n\r\n            if (!this._nodes[id]) {\r\n                this._nodes[id] = guiNode;\r\n            } else {\r\n                throw \"XmlLoader Exception : Duplicate ID, every element should have an unique ID attribute\";\r\n            }\r\n            return guiNode;\r\n\r\n        } catch (e) {\r\n            throw \"XmlLoader Exception : Error parsing Control \" + node.nodeName + \",\" + e + \".\";\r\n        }\r\n    }\r\n\r\n    private _parseGrid(node: any, guiNode: any, parent: any): void {\r\n        let width;\r\n        let height;\r\n        let columns;\r\n        let rows = node.children;\r\n        let cells;\r\n        let isPixel = false;\r\n        let cellNode;\r\n        let rowNumber = -1;\r\n        let columnNumber = -1;\r\n        let totalColumnsNumber = 0;\r\n\r\n        for (let i = 0; i < rows.length; i++) {\r\n            if (rows[i].nodeType != this._nodeTypes.element) {\r\n                continue;\r\n            }\r\n            if (rows[i].nodeName != \"Row\") {\r\n                throw \"XmlLoader Exception : Expecting Row node, received \" + rows[i].nodeName;\r\n            }\r\n            rowNumber += 1;\r\n            columns = rows[i].children;\r\n\r\n            if (!rows[i].attributes.getNamedItem(\"height\")) {\r\n                throw \"XmlLoader Exception : Height must be defined for grid rows\";\r\n            }\r\n            height = Number(rows[i].attributes.getNamedItem(\"height\").nodeValue);\r\n            isPixel = rows[i].attributes.getNamedItem(\"isPixel\") ? JSON.parse(rows[i].attributes.getNamedItem(\"isPixel\").nodeValue) : false;\r\n            guiNode.addRowDefinition(height, isPixel);\r\n\r\n            for (let j = 0; j < columns.length; j++) {\r\n                if (columns[j].nodeType != this._nodeTypes.element) {\r\n                    continue;\r\n                }\r\n                if (columns[j].nodeName != \"Column\") {\r\n                    throw \"XmlLoader Exception : Expecting Column node, received \" + columns[j].nodeName;\r\n                }\r\n                columnNumber += 1;\r\n                if (rowNumber > 0 && columnNumber > totalColumnsNumber) {\r\n                    throw \"XmlLoader Exception : In the Grid element, the number of columns is defined in the first row, do not add more columns in the subsequent rows.\";\r\n                }\r\n\r\n                if (rowNumber == 0) {\r\n                    if (!columns[j].attributes.getNamedItem(\"width\")) {\r\n                        throw \"XmlLoader Exception : Width must be defined for all the grid columns in the first row\";\r\n                    }\r\n                    width = Number(columns[j].attributes.getNamedItem(\"width\").nodeValue);\r\n                    isPixel = columns[j].attributes.getNamedItem(\"isPixel\") ? JSON.parse(columns[j].attributes.getNamedItem(\"isPixel\").nodeValue) : false;\r\n                    guiNode.addColumnDefinition(width, isPixel);\r\n                }\r\n\r\n                cells = columns[j].children;\r\n\r\n                for (let k = 0; k < cells.length; k++) {\r\n                    if (cells[k].nodeType != this._nodeTypes.element) {\r\n                        continue;\r\n                    }\r\n                    cellNode = this._createGuiElement(cells[k], guiNode, false);\r\n                    guiNode.addControl(cellNode, rowNumber, columnNumber);\r\n                    if (cells[k].firstChild) {\r\n                        this._parseXml(cells[k].firstChild, cellNode);\r\n                    }\r\n                }\r\n            }\r\n            if (rowNumber == 0) {\r\n                totalColumnsNumber = columnNumber;\r\n            }\r\n            columnNumber = -1;\r\n        }\r\n\r\n        if (node.nextSibling) {\r\n            this._parseXml(node.nextSibling, parent);\r\n        }\r\n    }\r\n\r\n    private _parseElement(node: any, guiNode: any, parent: any): void {\r\n\r\n        if (node.firstChild) {\r\n            this._parseXml(node.firstChild, guiNode);\r\n        }\r\n\r\n        if (node.nextSibling) {\r\n            this._parseXml(node.nextSibling, parent);\r\n        }\r\n    }\r\n\r\n    private _prepareSourceElement(node: any, guiNode: any, variable: any, source: any, iterator: any): void {\r\n        if (this._parentClass) {\r\n            this._parentClass[variable] = source[iterator];\r\n        } else {\r\n            window[variable] = source[iterator];\r\n        }\r\n\r\n        if (node.firstChild) {\r\n            this._parseXml(node.firstChild, guiNode, true);\r\n        }\r\n    }\r\n\r\n    private _parseElementsFromSource(node: any, guiNode: any, parent: any): void {\r\n        let dataSource = node.attributes.getNamedItem(\"dataSource\").value;\r\n        if (!dataSource.includes(\" in \")) {\r\n            throw \"XmlLoader Exception : Malformed XML, Data Source must include an in\";\r\n        } else {\r\n            let isArray = true;\r\n            let splittedSource = dataSource.split(\" in \");\r\n            if (splittedSource.length < 2) {\r\n                throw \"XmlLoader Exception : Malformed XML, Data Source must an iterator and a source\";\r\n            }\r\n            let source = splittedSource[1];\r\n            if (source.startsWith(\"{\") && source.endsWith(\"}\")) {\r\n                isArray = false;\r\n            }\r\n\r\n            if (!isArray || (source.startsWith(\"[\") && source.endsWith(\"]\"))) {\r\n                source = source.substring(1, source.length - 1);\r\n            }\r\n\r\n            if (this._parentClass) {\r\n                source = this._parentClass[source];\r\n            } else {\r\n                source = window[source];\r\n            }\r\n\r\n            if (isArray) {\r\n                for (let i = 0; i < source.length; i++) {\r\n                    this._prepareSourceElement(node, guiNode, splittedSource[0], source, i);\r\n                }\r\n            } else {\r\n                for (let i in source) {\r\n                    this._prepareSourceElement(node, guiNode, splittedSource[0], source, i);\r\n                }\r\n            }\r\n\r\n            if (node.nextSibling) {\r\n                this._parseXml(node.nextSibling, parent);\r\n            }\r\n        }\r\n    }\r\n\r\n    private _parseXml(node: any, parent: any, generated: boolean = false): void {\r\n\r\n        if (node.nodeType != this._nodeTypes.element) {\r\n            if (node.nextSibling) {\r\n                this._parseXml(node.nextSibling, parent, generated);\r\n            }\r\n            return;\r\n        }\r\n\r\n        if (generated) {\r\n            node.setAttribute(\"id\", parent.id + (parent._children.length + 1));\r\n        }\r\n\r\n        let guiNode = this._createGuiElement(node, parent);\r\n\r\n        if (node.nodeName == \"Grid\") {\r\n            this._parseGrid(node, guiNode, parent);\r\n        } else if (!node.attributes.getNamedItem(\"dataSource\")) {\r\n            this._parseElement(node, guiNode, parent);\r\n        } else {\r\n            this._parseElementsFromSource(node, guiNode, parent);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Gets if the loading has finished.\r\n     * @returns whether the loading has finished or not\r\n    */\r\n    public isLoaded(): boolean {\r\n        return this._isLoaded;\r\n    }\r\n\r\n    /**\r\n     * Gets a loaded node / control by id.\r\n     * @param id the Controls id set in the xml\r\n     * @returns element of type Control\r\n    */\r\n    public getNodeById(id: string): any {\r\n        return this._nodes[id];\r\n    }\r\n\r\n    /**\r\n     * Gets all loaded nodes / controls\r\n     * @returns Array of controls\r\n    */\r\n    public getNodes(): any {\r\n        return this._nodes;\r\n    }\r\n\r\n    /**\r\n     * Initiates the xml layout loading\r\n     * @param xmlFile defines the xml layout to load\r\n     * @param rootNode defines the node / control to use as a parent for the loaded layout controls.\r\n     * @param callback defines the callback called on layout load.\r\n     */\r\n    public loadLayout(xmlFile: any, rootNode: any, callback: any): void {\r\n        let xhttp = new XMLHttpRequest();\r\n        xhttp.onreadystatechange = function(this: XmlLoader) {\r\n            if (xhttp.readyState == 4 && xhttp.status == 200) {\r\n                if (!xhttp.responseXML) {\r\n                    throw \"XmlLoader Exception : XML file is malformed or corrupted.\";\r\n                }\r\n\r\n                let xmlDoc = xhttp.responseXML.documentElement;\r\n                this._parseXml(xmlDoc.firstChild, rootNode);\r\n                this._isLoaded = true;\r\n                if (callback) {\r\n                    callback();\r\n                }\r\n            }\r\n        }.bind(this);\r\n\r\n        xhttp.open(\"GET\", xmlFile, true);\r\n        xhttp.send();\r\n    }\r\n}", "import { Vector3 } from \"@babylonjs/core/Maths/math.vector\";\r\n\r\n/**\r\n * Class used to transport Vector3 information for pointer events\r\n */\r\nexport class Vector3WithInfo extends Vector3 {\r\n    /**\r\n     * Creates a new Vector3WithInfo\r\n     * @param source defines the vector3 data to transport\r\n     * @param buttonIndex defines the current mouse button index\r\n     */\r\n    public constructor(source: Vector3,\r\n        /** defines the current mouse button index */\r\n        public buttonIndex: number = 0) {\r\n        super(source.x, source.y, source.z);\r\n    }\r\n}", "import { Nullable } from \"@babylonjs/core/types\";\r\nimport { Observable } from \"@babylonjs/core/Misc/observable\";\r\nimport { Vector3 } from \"@babylonjs/core/Maths/math.vector\";\r\nimport { PointerEventTypes } from \"@babylonjs/core/Events/pointerEvents\";\r\nimport { TransformNode } from \"@babylonjs/core/Meshes/transformNode\";\r\nimport { AbstractMesh } from \"@babylonjs/core/Meshes/abstractMesh\";\r\nimport { IBehaviorAware, Behavior } from \"@babylonjs/core/Behaviors/behavior\";\r\nimport { IDisposable, Scene } from \"@babylonjs/core/scene\";\r\n\r\nimport { GUI3DManager } from \"../gui3DManager\";\r\nimport { Vector3WithInfo } from \"../vector3WithInfo\";\r\nimport { Container3D } from \"./container3D\";\r\n\r\n/**\r\n * Class used as base class for controls\r\n */\r\nexport class Control3D implements IDisposable, IBehaviorAware<Control3D> {\r\n    /** @hidden */\r\n    public _host: GUI3DManager;\r\n    private _node: Nullable<TransformNode>;\r\n    private _downCount = 0;\r\n    private _enterCount = -1;\r\n    private _downPointerIds: { [id: number]: boolean } = {};\r\n    private _isVisible = true;\r\n\r\n    /** Gets or sets the control position  in world space */\r\n    public get position(): Vector3 {\r\n        if (!this._node) {\r\n            return Vector3.Zero();\r\n        }\r\n\r\n        return this._node.position;\r\n    }\r\n\r\n    public set position(value: Vector3) {\r\n        if (!this._node) {\r\n            return;\r\n        }\r\n\r\n        this._node.position = value;\r\n    }\r\n\r\n    /** Gets or sets the control scaling  in world space */\r\n    public get scaling(): Vector3 {\r\n        if (!this._node) {\r\n            return new Vector3(1, 1, 1);\r\n        }\r\n\r\n        return this._node.scaling;\r\n    }\r\n\r\n    public set scaling(value: Vector3) {\r\n        if (!this._node) {\r\n            return;\r\n        }\r\n\r\n        this._node.scaling = value;\r\n    }\r\n\r\n    /** Callback used to start pointer enter animation */\r\n    public pointerEnterAnimation: () => void;\r\n    /** Callback used to start pointer out animation */\r\n    public pointerOutAnimation: () => void;\r\n    /** Callback used to start pointer down animation */\r\n    public pointerDownAnimation: () => void;\r\n    /** Callback used to start pointer up animation */\r\n    public pointerUpAnimation: () => void;\r\n\r\n    /**\r\n    * An event triggered when the pointer move over the control\r\n    */\r\n    public onPointerMoveObservable = new Observable<Vector3>();\r\n\r\n    /**\r\n     * An event triggered when the pointer move out of the control\r\n     */\r\n    public onPointerOutObservable = new Observable<Control3D>();\r\n\r\n    /**\r\n     * An event triggered when the pointer taps the control\r\n     */\r\n    public onPointerDownObservable = new Observable<Vector3WithInfo>();\r\n\r\n    /**\r\n     * An event triggered when pointer is up\r\n     */\r\n    public onPointerUpObservable = new Observable<Vector3WithInfo>();\r\n\r\n    /**\r\n     * An event triggered when a control is clicked on (with a mouse)\r\n     */\r\n    public onPointerClickObservable = new Observable<Vector3WithInfo>();\r\n\r\n    /**\r\n     * An event triggered when pointer enters the control\r\n     */\r\n    public onPointerEnterObservable = new Observable<Control3D>();\r\n\r\n    /**\r\n     * Gets or sets the parent container\r\n     */\r\n    public parent: Nullable<Container3D>;\r\n\r\n    // Behaviors\r\n    private _behaviors = new Array<Behavior<Control3D>>();\r\n\r\n    /**\r\n     * Gets the list of attached behaviors\r\n     * @see https://doc.babylonjs.com/features/behaviour\r\n     */\r\n    public get behaviors(): Behavior<Control3D>[] {\r\n        return this._behaviors;\r\n    }\r\n\r\n    /**\r\n     * Attach a behavior to the control\r\n     * @see https://doc.babylonjs.com/features/behaviour\r\n     * @param behavior defines the behavior to attach\r\n     * @returns the current control\r\n     */\r\n    public addBehavior(behavior: Behavior<Control3D>): Control3D {\r\n        var index = this._behaviors.indexOf(behavior);\r\n\r\n        if (index !== -1) {\r\n            return this;\r\n        }\r\n\r\n        behavior.init();\r\n        let scene = this._host.scene;\r\n        if (scene.isLoading) {\r\n            // We defer the attach when the scene will be loaded\r\n            scene.onDataLoadedObservable.addOnce(() => {\r\n                behavior.attach(this);\r\n            });\r\n        } else {\r\n            behavior.attach(this);\r\n        }\r\n        this._behaviors.push(behavior);\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Remove an attached behavior\r\n     * @see https://doc.babylonjs.com/features/behaviour\r\n     * @param behavior defines the behavior to attach\r\n     * @returns the current control\r\n     */\r\n    public removeBehavior(behavior: Behavior<Control3D>): Control3D {\r\n        var index = this._behaviors.indexOf(behavior);\r\n\r\n        if (index === -1) {\r\n            return this;\r\n        }\r\n\r\n        this._behaviors[index].detach();\r\n        this._behaviors.splice(index, 1);\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Gets an attached behavior by name\r\n     * @param name defines the name of the behavior to look for\r\n     * @see https://doc.babylonjs.com/features/behaviour\r\n     * @returns null if behavior was not found else the requested behavior\r\n     */\r\n    public getBehaviorByName(name: string): Nullable<Behavior<Control3D>> {\r\n        for (var behavior of this._behaviors) {\r\n            if (behavior.name === name) {\r\n                return behavior;\r\n            }\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    /** Gets or sets a boolean indicating if the control is visible */\r\n    public get isVisible(): boolean {\r\n        return this._isVisible;\r\n    }\r\n\r\n    public set isVisible(value: boolean) {\r\n        if (this._isVisible === value) {\r\n            return;\r\n        }\r\n\r\n        this._isVisible = value;\r\n\r\n        let mesh = this.mesh;\r\n        if (mesh) {\r\n            mesh.setEnabled(value);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Creates a new control\r\n     * @param name defines the control name\r\n     */\r\n    constructor(\r\n        /** Defines the control name */\r\n        public name?: string) {\r\n    }\r\n\r\n    /**\r\n     * Gets a string representing the class name\r\n     */\r\n    public get typeName(): string {\r\n        return this._getTypeName();\r\n    }\r\n\r\n    /**\r\n     * Get the current class name of the control.\r\n     * @returns current class name\r\n     */\r\n    public getClassName(): string {\r\n        return this._getTypeName();\r\n    }\r\n\r\n    protected _getTypeName(): string {\r\n        return \"Control3D\";\r\n    }\r\n\r\n    /**\r\n     * Gets the transform node used by this control\r\n     */\r\n    public get node(): Nullable<TransformNode> {\r\n        return this._node;\r\n    }\r\n\r\n    /**\r\n     * Gets the mesh used to render this control\r\n     */\r\n    public get mesh(): Nullable<AbstractMesh> {\r\n        if (this._node instanceof AbstractMesh) {\r\n            return this._node as AbstractMesh;\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * Link the control as child of the given node\r\n     * @param node defines the node to link to. Use null to unlink the control\r\n     * @returns the current control\r\n     */\r\n    public linkToTransformNode(node: Nullable<TransformNode>): Control3D {\r\n        if (this._node) {\r\n            this._node.parent = node;\r\n        }\r\n        return this;\r\n    }\r\n\r\n    /** @hidden **/\r\n    public _prepareNode(scene: Scene): void {\r\n        if (!this._node) {\r\n            this._node = this._createNode(scene);\r\n\r\n            if (!this.node) {\r\n                return;\r\n            }\r\n            this._node!.metadata = this; // Store the control on the metadata field in order to get it when picking\r\n            this._node!.position = this.position;\r\n            this._node!.scaling = this.scaling;\r\n\r\n            let mesh = this.mesh;\r\n            if (mesh) {\r\n                mesh.isPickable = true;\r\n\r\n                this._affectMaterial(mesh);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Node creation.\r\n     * Can be overriden by children\r\n     * @param scene defines the scene where the node must be attached\r\n     * @returns the attached node or null if none. Must return a Mesh or AbstractMesh if there is an atttached visible object\r\n     */\r\n    protected _createNode(scene: Scene): Nullable<TransformNode> {\r\n        // Do nothing by default\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * Affect a material to the given mesh\r\n     * @param mesh defines the mesh which will represent the control\r\n     */\r\n    protected _affectMaterial(mesh: AbstractMesh) {\r\n        mesh.material = null;\r\n    }\r\n\r\n    // Pointers\r\n\r\n    /** @hidden */\r\n    public _onPointerMove(target: Control3D, coordinates: Vector3): void {\r\n        this.onPointerMoveObservable.notifyObservers(coordinates, -1, target, this);\r\n    }\r\n\r\n    /** @hidden */\r\n    public _onPointerEnter(target: Control3D): boolean {\r\n        if (this._enterCount > 0) {\r\n            return false;\r\n        }\r\n\r\n        if (this._enterCount === -1) { // -1 is for touch input, we are now sure we are with a mouse or pencil\r\n            this._enterCount = 0;\r\n        }\r\n\r\n        this._enterCount++;\r\n\r\n        this.onPointerEnterObservable.notifyObservers(this, -1, target, this);\r\n\r\n        if (this.pointerEnterAnimation) {\r\n            this.pointerEnterAnimation();\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    /** @hidden */\r\n    public _onPointerOut(target: Control3D): void {\r\n        this._enterCount = 0;\r\n\r\n        this.onPointerOutObservable.notifyObservers(this, -1, target, this);\r\n\r\n        if (this.pointerOutAnimation) {\r\n            this.pointerOutAnimation();\r\n        }\r\n    }\r\n\r\n    /** @hidden */\r\n    public _onPointerDown(target: Control3D, coordinates: Vector3, pointerId: number, buttonIndex: number): boolean {\r\n        if (this._downCount !== 0) {\r\n            this._downCount++;\r\n            return false;\r\n        }\r\n\r\n        this._downCount++;\r\n\r\n        this._downPointerIds[pointerId] = true;\r\n\r\n        this.onPointerDownObservable.notifyObservers(new Vector3WithInfo(coordinates, buttonIndex), -1, target, this);\r\n\r\n        if (this.pointerDownAnimation) {\r\n            this.pointerDownAnimation();\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    /** @hidden */\r\n    public _onPointerUp(target: Control3D, coordinates: Vector3, pointerId: number, buttonIndex: number, notifyClick: boolean): void {\r\n        this._downCount--;\r\n        delete this._downPointerIds[pointerId];\r\n\r\n        if (this._downCount < 0) {\r\n            // Handle if forcePointerUp was called prior to this\r\n            this._downCount = 0;\r\n            return;\r\n        }\r\n\r\n        if (this._downCount == 0) {\r\n            if (notifyClick && (this._enterCount > 0 || this._enterCount === -1)) {\r\n                this.onPointerClickObservable.notifyObservers(new Vector3WithInfo(coordinates, buttonIndex), -1, target, this);\r\n            }\r\n            this.onPointerUpObservable.notifyObservers(new Vector3WithInfo(coordinates, buttonIndex), -1, target, this);\r\n\r\n            if (this.pointerUpAnimation) {\r\n                this.pointerUpAnimation();\r\n            }\r\n        }\r\n    }\r\n\r\n    /** @hidden */\r\n    public forcePointerUp(pointerId: Nullable<number> = null) {\r\n        if (pointerId !== null) {\r\n            this._onPointerUp(this, Vector3.Zero(), pointerId, 0, true);\r\n        } else {\r\n            for (var key in this._downPointerIds) {\r\n                this._onPointerUp(this, Vector3.Zero(), +key as number, 0, true);\r\n            }\r\n            if (this._downCount > 0) {\r\n                this._downCount = 1;\r\n                this._onPointerUp(this, Vector3.Zero(), 0, 0, true);\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n    /** @hidden */\r\n    public _processObservables(type: number, pickedPoint: Vector3, pointerId: number, buttonIndex: number): boolean {\r\n        if (type === PointerEventTypes.POINTERMOVE) {\r\n            this._onPointerMove(this, pickedPoint);\r\n\r\n            var previousControlOver = this._host._lastControlOver[pointerId];\r\n            if (previousControlOver && previousControlOver !== this) {\r\n                previousControlOver._onPointerOut(this);\r\n            }\r\n\r\n            if (previousControlOver !== this) {\r\n                this._onPointerEnter(this);\r\n            }\r\n\r\n            this._host._lastControlOver[pointerId] = this;\r\n            return true;\r\n        }\r\n\r\n        if (type === PointerEventTypes.POINTERDOWN) {\r\n            this._onPointerDown(this, pickedPoint, pointerId, buttonIndex);\r\n            this._host._lastControlDown[pointerId] = this;\r\n            this._host._lastPickedControl = this;\r\n            return true;\r\n        }\r\n\r\n        if (type === PointerEventTypes.POINTERUP || type === PointerEventTypes.POINTERDOUBLETAP) {\r\n            if (this._host._lastControlDown[pointerId]) {\r\n                this._host._lastControlDown[pointerId]._onPointerUp(this, pickedPoint, pointerId, buttonIndex, true);\r\n            }\r\n            delete this._host._lastControlDown[pointerId];\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    /** @hidden */\r\n    public _disposeNode(): void {\r\n        if (this._node) {\r\n            this._node.dispose();\r\n            this._node = null;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Releases all associated resources\r\n     */\r\n    public dispose() {\r\n        this.onPointerDownObservable.clear();\r\n        this.onPointerEnterObservable.clear();\r\n        this.onPointerMoveObservable.clear();\r\n        this.onPointerOutObservable.clear();\r\n        this.onPointerUpObservable.clear();\r\n        this.onPointerClickObservable.clear();\r\n\r\n        this._disposeNode();\r\n\r\n        // Behaviors\r\n        for (var behavior of this._behaviors) {\r\n            behavior.detach();\r\n        }\r\n    }\r\n}", "import { TransformNode } from \"@babylonjs/core/Meshes/transformNode\";\r\nimport { Scene } from \"@babylonjs/core/scene\";\r\n\r\nimport { Control3D } from \"./control3D\";\r\n\r\n/**\r\n * Class used as a root to all buttons\r\n */\r\nexport class AbstractButton3D extends Control3D {\r\n    /**\r\n     * Creates a new button\r\n     * @param name defines the control name\r\n     */\r\n    constructor(name?: string) {\r\n        super(name);\r\n    }\r\n\r\n    protected _getTypeName(): string {\r\n        return \"AbstractButton3D\";\r\n    }\r\n\r\n    // Mesh association\r\n    protected _createNode(scene: Scene): TransformNode {\r\n        return new TransformNode(\"button\" + this.name);\r\n    }\r\n}", "import { int, Nullable } from \"@babylonjs/core/types\";\r\nimport { Vector4 } from \"@babylonjs/core/Maths/math.vector\";\r\nimport { TransformNode } from \"@babylonjs/core/Meshes/transformNode\";\r\nimport { AbstractMesh } from \"@babylonjs/core/Meshes/abstractMesh\";\r\nimport { BoxBuilder } from \"@babylonjs/core/Meshes/Builders/boxBuilder\";\r\nimport { Material } from \"@babylonjs/core/Materials/material\";\r\nimport { StandardMaterial } from \"@babylonjs/core/Materials/standardMaterial\";\r\nimport { Texture } from \"@babylonjs/core/Materials/Textures/texture\";\r\nimport { Scene } from \"@babylonjs/core/scene\";\r\n\r\nimport { AbstractButton3D } from \"./abstractButton3D\";\r\nimport { AdvancedDynamicTexture } from \"../../2D/advancedDynamicTexture\";\r\nimport { Control } from \"../../2D/controls/control\";\r\nimport { Color3 } from '@babylonjs/core/Maths/math.color';\r\n\r\n/**\r\n * Class used to create a button in 3D\r\n */\r\nexport class Button3D extends AbstractButton3D {\r\n    /** @hidden */\r\n    protected _currentMaterial: Material;\r\n    private _facadeTexture: Nullable<AdvancedDynamicTexture>;\r\n    private _content: Control;\r\n    private _contentResolution = 512;\r\n    private _contentScaleRatio = 2;\r\n\r\n    /**\r\n     * Gets or sets the texture resolution used to render content (512 by default)\r\n     */\r\n    public get contentResolution(): int {\r\n        return this._contentResolution;\r\n    }\r\n\r\n    public set contentResolution(value: int) {\r\n        if (this._contentResolution === value) {\r\n            return;\r\n        }\r\n\r\n        this._contentResolution = value;\r\n        this._resetContent();\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the texture scale ratio used to render content (2 by default)\r\n     */\r\n    public get contentScaleRatio(): number {\r\n        return this._contentScaleRatio;\r\n    }\r\n\r\n    public set contentScaleRatio(value: number) {\r\n        if (this._contentScaleRatio === value) {\r\n            return;\r\n        }\r\n\r\n        this._contentScaleRatio = value;\r\n        this._resetContent();\r\n    }\r\n\r\n    protected _disposeFacadeTexture() {\r\n        if (this._facadeTexture) {\r\n            this._facadeTexture.dispose();\r\n            this._facadeTexture = null;\r\n        }\r\n    }\r\n\r\n    protected _resetContent() {\r\n        this._disposeFacadeTexture();\r\n        this.content = this._content;\r\n    }\r\n\r\n    /**\r\n     * Creates a new button\r\n     * @param name defines the control name\r\n     */\r\n    constructor(name?: string) {\r\n        super(name);\r\n\r\n        // Default animations\r\n\r\n        this.pointerEnterAnimation = () => {\r\n            if (!this.mesh) {\r\n                return;\r\n            }\r\n            (<StandardMaterial>this._currentMaterial).emissiveColor = Color3.Red();\r\n        };\r\n\r\n        this.pointerOutAnimation = () => {\r\n            (<StandardMaterial>this._currentMaterial).emissiveColor = Color3.Black();\r\n        };\r\n\r\n        this.pointerDownAnimation = () => {\r\n            if (!this.mesh) {\r\n                return;\r\n            }\r\n\r\n            this.mesh.scaling.scaleInPlace(0.95);\r\n        };\r\n\r\n        this.pointerUpAnimation = () => {\r\n            if (!this.mesh) {\r\n                return;\r\n            }\r\n\r\n            this.mesh.scaling.scaleInPlace(1.0 / 0.95);\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the GUI 2D content used to display the button's facade\r\n     */\r\n    public get content(): Control {\r\n        return this._content;\r\n    }\r\n\r\n    public set content(value: Control) {\r\n        this._content = value;\r\n\r\n        if (!this._host || !this._host.utilityLayer) {\r\n            return;\r\n        }\r\n\r\n        if (!this._facadeTexture) {\r\n            this._facadeTexture = new AdvancedDynamicTexture(\"Facade\", this._contentResolution, this._contentResolution, this._host.utilityLayer.utilityLayerScene, true, Texture.TRILINEAR_SAMPLINGMODE);\r\n            this._facadeTexture.rootContainer.scaleX = this._contentScaleRatio;\r\n            this._facadeTexture.rootContainer.scaleY = this._contentScaleRatio;\r\n            this._facadeTexture.premulAlpha = true;\r\n        }\r\n        else {\r\n            this._facadeTexture.rootContainer.clearControls();\r\n        }\r\n\r\n        this._facadeTexture.addControl(value);\r\n\r\n        this._applyFacade(this._facadeTexture);\r\n    }\r\n\r\n    /**\r\n     * Apply the facade texture (created from the content property).\r\n     * This function can be overloaded by child classes\r\n     * @param facadeTexture defines the AdvancedDynamicTexture to use\r\n     */\r\n    protected _applyFacade(facadeTexture: AdvancedDynamicTexture) {\r\n        (<any>this._currentMaterial).emissiveTexture = facadeTexture;\r\n    }\r\n\r\n    protected _getTypeName(): string {\r\n        return \"Button3D\";\r\n    }\r\n\r\n    // Mesh association\r\n    protected _createNode(scene: Scene): TransformNode {\r\n        var faceUV = new Array(6);\r\n\r\n        for (var i = 0; i < 6; i++) {\r\n            faceUV[i] = new Vector4(0, 0, 0, 0);\r\n        }\r\n        faceUV[1] = new Vector4(0, 0, 1, 1);\r\n\r\n        let mesh = BoxBuilder.CreateBox(this.name + \"_rootMesh\", {\r\n            width: 1.0,\r\n            height: 1.0,\r\n            depth: 0.08,\r\n            faceUV: faceUV\r\n        }, scene);\r\n\r\n        return mesh;\r\n    }\r\n\r\n    protected _affectMaterial(mesh: AbstractMesh) {\r\n        let material = new StandardMaterial(this.name + \"Material\", mesh.getScene());\r\n        material.specularColor = Color3.Black();\r\n\r\n        mesh.material = material;\r\n        this._currentMaterial = material;\r\n\r\n        this._resetContent();\r\n    }\r\n\r\n    /**\r\n     * Releases all associated resources\r\n     */\r\n    public dispose() {\r\n        super.dispose();\r\n\r\n        this._disposeFacadeTexture();\r\n\r\n        if (this._currentMaterial) {\r\n            this._currentMaterial.dispose();\r\n        }\r\n    }\r\n}", "import { Nullable } from \"@babylonjs/core/types\";\r\nimport { TransformNode } from \"@babylonjs/core/Meshes/transformNode\";\r\nimport { Scene } from \"@babylonjs/core/scene\";\r\n\r\nimport { Control3D } from \"./control3D\";\r\n\r\n/**\r\n * Class used to create containers for controls\r\n */\r\nexport class Container3D extends Control3D {\r\n    private _blockLayout = false;\r\n\r\n    /**\r\n     * Gets the list of child controls\r\n     */\r\n    protected _children = new Array<Control3D>();\r\n\r\n    /**\r\n     * Gets the list of child controls\r\n     */\r\n    public get children(): Array<Control3D> {\r\n        return this._children;\r\n    }\r\n\r\n    /**\r\n     * Gets or sets a boolean indicating if the layout must be blocked (default is false).\r\n     * This is helpful to optimize layout operation when adding multiple children in a row\r\n     */\r\n    public get blockLayout(): boolean {\r\n        return this._blockLayout;\r\n    }\r\n\r\n    public set blockLayout(value: boolean) {\r\n        if (this._blockLayout === value) {\r\n            return;\r\n        }\r\n\r\n        this._blockLayout = value;\r\n\r\n        if (!this._blockLayout) {\r\n            this._arrangeChildren();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Creates a new container\r\n     * @param name defines the container name\r\n     */\r\n    constructor(name?: string) {\r\n        super(name);\r\n    }\r\n\r\n    /**\r\n     * Force the container to update the layout. Please note that it will not take blockLayout property in account\r\n     * @returns the current container\r\n     */\r\n    public updateLayout(): Container3D {\r\n        this._arrangeChildren();\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Gets a boolean indicating if the given control is in the children of this control\r\n     * @param control defines the control to check\r\n     * @returns true if the control is in the child list\r\n     */\r\n    public containsControl(control: Control3D): boolean {\r\n        return this._children.indexOf(control) !== -1;\r\n    }\r\n\r\n    /**\r\n     * Adds a control to the children of this control\r\n     * @param control defines the control to add\r\n     * @returns the current container\r\n     */\r\n    public addControl(control: Control3D): Container3D {\r\n        var index = this._children.indexOf(control);\r\n\r\n        if (index !== -1) {\r\n            return this;\r\n        }\r\n        control.parent = this;\r\n        control._host = this._host;\r\n\r\n        this._children.push(control);\r\n\r\n        if (this._host.utilityLayer) {\r\n            control._prepareNode(this._host.utilityLayer.utilityLayerScene);\r\n\r\n            if (control.node) {\r\n                control.node.parent = this.node;\r\n            }\r\n\r\n            if (!this.blockLayout) {\r\n                this._arrangeChildren();\r\n            }\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * This function will be called everytime a new control is added\r\n     */\r\n    protected _arrangeChildren() {\r\n    }\r\n\r\n    protected _createNode(scene: Scene): Nullable<TransformNode> {\r\n        return new TransformNode(\"ContainerNode\", scene);\r\n    }\r\n\r\n    /**\r\n     * Removes a control from the children of this control\r\n     * @param control defines the control to remove\r\n     * @returns the current container\r\n     */\r\n    public removeControl(control: Control3D): Container3D {\r\n        var index = this._children.indexOf(control);\r\n\r\n        if (index !== -1) {\r\n            this._children.splice(index, 1);\r\n\r\n            control.parent = null;\r\n            control._disposeNode();\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    protected _getTypeName(): string {\r\n        return \"Container3D\";\r\n    }\r\n\r\n    /**\r\n     * Releases all associated resources\r\n     */\r\n    public dispose() {\r\n        for (var control of this._children) {\r\n            control.dispose();\r\n        }\r\n\r\n        this._children = [];\r\n\r\n        super.dispose();\r\n    }\r\n\r\n    /** Control rotation will remain unchanged  */\r\n    public static readonly UNSET_ORIENTATION = 0;\r\n\r\n    /** Control will rotate to make it look at sphere central axis */\r\n    public static readonly FACEORIGIN_ORIENTATION = 1;\r\n\r\n    /** Control will rotate to make it look back at sphere central axis */\r\n    public static readonly FACEORIGINREVERSED_ORIENTATION = 2;\r\n\r\n    /** Control will rotate to look at z axis (0, 0, 1) */\r\n    public static readonly FACEFORWARD_ORIENTATION = 3;\r\n\r\n    /** Control will rotate to look at negative z axis (0, 0, -1) */\r\n    public static readonly FACEFORWARDREVERSED_ORIENTATION = 4;\r\n\r\n}\r\n", "import { Tools } from \"@babylonjs/core/Misc/tools\";\r\nimport { Matrix, Vector3, TmpVectors } from \"@babylonjs/core/Maths/math.vector\";\r\nimport { int } from \"@babylonjs/core/types\";\r\n\r\nimport { Container3D } from \"./container3D\";\r\nimport { Control3D } from \"./control3D\";\r\n\r\n/**\r\n * Abstract class used to create a container panel deployed on the surface of a volume\r\n */\r\nexport abstract class VolumeBasedPanel extends Container3D {\r\n    private _columns = 10;\r\n    private _rows = 0;\r\n    private _rowThenColum = true;\r\n\r\n    private _orientation = Container3D.FACEORIGIN_ORIENTATION;\r\n\r\n    protected _cellWidth: number;\r\n    protected _cellHeight: number;\r\n\r\n    /**\r\n     * Gets or sets the distance between elements\r\n     */\r\n    public margin = 0;\r\n\r\n    /**\r\n     * Gets or sets the orientation to apply to all controls (BABYLON.Container3D.FaceOriginReversedOrientation by default)\r\n    * | Value | Type                                | Description |\r\n    * | ----- | ----------------------------------- | ----------- |\r\n    * | 0     | UNSET_ORIENTATION                   |  Control rotation will remain unchanged |\r\n    * | 1     | FACEORIGIN_ORIENTATION              |  Control will rotate to make it look at sphere central axis |\r\n    * | 2     | FACEORIGINREVERSED_ORIENTATION      |  Control will rotate to make it look back at sphere central axis |\r\n    * | 3     | FACEFORWARD_ORIENTATION             |  Control will rotate to look at z axis (0, 0, 1) |\r\n    * | 4     | FACEFORWARDREVERSED_ORIENTATION     |  Control will rotate to look at negative z axis (0, 0, -1) |\r\n     */\r\n    public get orientation(): number {\r\n        return this._orientation;\r\n    }\r\n\r\n    public set orientation(value: number) {\r\n        if (this._orientation === value) {\r\n            return;\r\n        }\r\n\r\n        this._orientation = value;\r\n\r\n        Tools.SetImmediate(() => {\r\n            this._arrangeChildren();\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the number of columns requested (10 by default).\r\n     * The panel will automatically compute the number of rows based on number of child controls.\r\n     */\r\n    public get columns(): int {\r\n        return this._columns;\r\n    }\r\n\r\n    public set columns(value: int) {\r\n        if (this._columns === value) {\r\n            return;\r\n        }\r\n\r\n        this._columns = value;\r\n        this._rowThenColum = true;\r\n\r\n        Tools.SetImmediate(() => {\r\n            this._arrangeChildren();\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Gets or sets a the number of rows requested.\r\n     * The panel will automatically compute the number of columns based on number of child controls.\r\n     */\r\n    public get rows(): int {\r\n        return this._rows;\r\n    }\r\n\r\n    public set rows(value: int) {\r\n        if (this._rows === value) {\r\n            return;\r\n        }\r\n\r\n        this._rows = value;\r\n        this._rowThenColum = false;\r\n\r\n        Tools.SetImmediate(() => {\r\n            this._arrangeChildren();\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Creates new VolumeBasedPanel\r\n     */\r\n    public constructor() {\r\n        super();\r\n    }\r\n\r\n    protected _arrangeChildren() {\r\n        this._cellWidth = 0;\r\n        this._cellHeight = 0;\r\n        let rows = 0;\r\n        let columns = 0;\r\n        let controlCount = 0;\r\n\r\n        let currentInverseWorld = Matrix.Invert(this.node!.computeWorldMatrix(true));\r\n\r\n        // Measure\r\n        for (var child of this._children) {\r\n            if (!child.mesh) {\r\n                continue;\r\n            }\r\n\r\n            controlCount++;\r\n            child.mesh.computeWorldMatrix(true);\r\n            //   child.mesh.getWorldMatrix().multiplyToRef(currentInverseWorld, Tmp.Matrix[0]);\r\n\r\n            let boundingBox = child.mesh.getHierarchyBoundingVectors();\r\n            let extendSize = TmpVectors.Vector3[0];\r\n            let diff = TmpVectors.Vector3[1];\r\n\r\n            boundingBox.max.subtractToRef(boundingBox.min, diff);\r\n\r\n            diff.scaleInPlace(0.5);\r\n\r\n            Vector3.TransformNormalToRef(diff, currentInverseWorld, extendSize);\r\n\r\n            this._cellWidth = Math.max(this._cellWidth, extendSize.x * 2);\r\n            this._cellHeight = Math.max(this._cellHeight, extendSize.y * 2);\r\n        }\r\n\r\n        this._cellWidth += this.margin * 2;\r\n        this._cellHeight += this.margin * 2;\r\n\r\n        // Arrange\r\n        if (this._rowThenColum) {\r\n            columns = this._columns;\r\n            rows = Math.ceil(controlCount / this._columns);\r\n        } else {\r\n            rows = this._rows;\r\n            columns = Math.ceil(controlCount / this._rows);\r\n        }\r\n\r\n        let startOffsetX = (columns * 0.5) * this._cellWidth;\r\n        let startOffsetY = (rows * 0.5) * this._cellHeight;\r\n        let nodeGrid = [];\r\n        let cellCounter = 0;\r\n\r\n        if (this._rowThenColum) {\r\n            for (var r = 0; r < rows; r++) {\r\n                for (var c = 0; c < columns; c++) {\r\n                    nodeGrid.push(new Vector3((c * this._cellWidth) - startOffsetX + this._cellWidth / 2, (r * this._cellHeight) - startOffsetY + this._cellHeight / 2, 0));\r\n                    cellCounter++;\r\n                    if (cellCounter > controlCount) {\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        } else {\r\n            for (var c = 0; c < columns; c++) {\r\n                for (var r = 0; r < rows; r++) {\r\n                    nodeGrid.push(new Vector3((c * this._cellWidth) - startOffsetX + this._cellWidth / 2, (r * this._cellHeight) - startOffsetY + this._cellHeight / 2, 0));\r\n                    cellCounter++;\r\n                    if (cellCounter > controlCount) {\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        cellCounter = 0;\r\n        for (var child of this._children) {\r\n            if (!child.mesh) {\r\n                continue;\r\n            }\r\n\r\n            this._mapGridNode(child, nodeGrid[cellCounter]);\r\n\r\n            cellCounter++;\r\n        }\r\n\r\n        this._finalProcessing();\r\n    }\r\n\r\n    /** Child classes must implement this function to provide correct control positioning */\r\n    protected abstract _mapGridNode(control: Control3D, nodePosition: Vector3): void;\r\n\r\n    /** Child classes can implement this function to provide additional processing */\r\n    protected _finalProcessing() {\r\n\r\n    }\r\n}\r\n", "import { Tools } from \"@babylonjs/core/Misc/tools\";\r\nimport { Matrix, TmpVectors, Vector3 } from \"@babylonjs/core/Maths/math.vector\";\r\nimport { float } from \"@babylonjs/core/types\";\r\n\r\nimport { VolumeBasedPanel } from \"./volumeBasedPanel\";\r\nimport { Control3D } from \"./control3D\";\r\nimport { Container3D } from \"./container3D\";\r\nimport { Axis, Space } from '@babylonjs/core/Maths/math.axis';\r\n\r\n/**\r\n * Class used to create a container panel deployed on the surface of a cylinder\r\n */\r\nexport class CylinderPanel extends VolumeBasedPanel {\r\n    private _radius = 5.0;\r\n\r\n    /**\r\n     * Gets or sets the radius of the cylinder where to project controls (5 by default)\r\n     */\r\n    public get radius(): float {\r\n        return this._radius;\r\n    }\r\n\r\n    public set radius(value: float) {\r\n        if (this._radius === value) {\r\n            return;\r\n        }\r\n\r\n        this._radius = value;\r\n\r\n        Tools.SetImmediate(() => {\r\n            this._arrangeChildren();\r\n        });\r\n    }\r\n\r\n    protected _mapGridNode(control: Control3D, nodePosition: Vector3) {\r\n        let mesh = control.mesh;\r\n\r\n        if (!mesh) {\r\n            return;\r\n        }\r\n        let newPos = this._cylindricalMapping(nodePosition);\r\n        control.position = newPos;\r\n\r\n        switch (this.orientation) {\r\n            case Container3D.FACEORIGIN_ORIENTATION:\r\n                mesh.lookAt(new Vector3(2 * newPos.x, newPos.y, 2 * newPos.z));\r\n                break;\r\n            case Container3D.FACEORIGINREVERSED_ORIENTATION:\r\n                mesh.lookAt(new Vector3(-newPos.x, newPos.y, -newPos.z));\r\n                break;\r\n            case Container3D.FACEFORWARD_ORIENTATION:\r\n                break;\r\n            case Container3D.FACEFORWARDREVERSED_ORIENTATION:\r\n                mesh.rotate(Axis.Y, Math.PI, Space.LOCAL);\r\n                break;\r\n        }\r\n    }\r\n\r\n    private _cylindricalMapping(source: Vector3) {\r\n        let newPos = new Vector3(0, source.y, this._radius);\r\n\r\n        let yAngle = (source.x / this._radius);\r\n\r\n        Matrix.RotationYawPitchRollToRef(yAngle, 0, 0, TmpVectors.Matrix[0]);\r\n\r\n        return Vector3.TransformNormal(newPos, TmpVectors.Matrix[0]);\r\n    }\r\n}\r\n", "import { Effect } from \"@babylonjs/core/Materials/effect\";\n\nlet name = 'fluentVertexShader';\nlet shader = `precision highp float;\n\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 uv;\n\nuniform mat4 world;\nuniform mat4 viewProjection;\nvarying vec2 vUV;\n#ifdef BORDER\nvarying vec2 scaleInfo;\nuniform float borderWidth;\nuniform vec3 scaleFactor;\n#endif\n#ifdef HOVERLIGHT\nvarying vec3 worldPosition;\n#endif\nvoid main(void) {\nvUV=uv;\n#ifdef BORDER\nvec3 scale=scaleFactor;\nfloat minScale=min(min(scale.x,scale.y),scale.z);\nfloat maxScale=max(max(scale.x,scale.y),scale.z);\nfloat minOverMiddleScale=minScale/(scale.x+scale.y+scale.z-minScale-maxScale);\nfloat areaYZ=scale.y*scale.z;\nfloat areaXZ=scale.x*scale.z;\nfloat areaXY=scale.x*scale.y;\nfloat scaledBorderWidth=borderWidth;\nif (abs(normal.x) == 1.0)\n{\nscale.x=scale.y;\nscale.y=scale.z;\nif (areaYZ>areaXZ && areaYZ>areaXY)\n{\nscaledBorderWidth*=minOverMiddleScale;\n}\n}\nelse if (abs(normal.y) == 1.0)\n{\nscale.x=scale.z;\nif (areaXZ>areaXY && areaXZ>areaYZ)\n{\nscaledBorderWidth*=minOverMiddleScale;\n}\n}\nelse\n{\nif (areaXY>areaYZ && areaXY>areaXZ)\n{\nscaledBorderWidth*=minOverMiddleScale;\n}\n}\nfloat scaleRatio=min(scale.x,scale.y)/max(scale.x,scale.y);\nif (scale.x>scale.y)\n{\nscaleInfo.x=1.0-(scaledBorderWidth*scaleRatio);\nscaleInfo.y=1.0-scaledBorderWidth;\n}\nelse\n{\nscaleInfo.x=1.0-scaledBorderWidth;\nscaleInfo.y=1.0-(scaledBorderWidth*scaleRatio);\n}\n#endif\nvec4 worldPos=world*vec4(position,1.0);\n#ifdef HOVERLIGHT\nworldPosition=worldPos.xyz;\n#endif\ngl_Position=viewProjection*worldPos;\n}\n`;\n\nEffect.ShadersStore[name] = shader;\n/** @hidden */\nexport var fluentVertexShader = { name, shader };\n", "import { Effect } from \"@babylonjs/core/Materials/effect\";\n\nlet name = 'fluentPixelShader';\nlet shader = `precision highp float;\nvarying vec2 vUV;\nuniform vec4 albedoColor;\n#ifdef INNERGLOW\nuniform vec4 innerGlowColor;\n#endif\n#ifdef BORDER\nvarying vec2 scaleInfo;\nuniform float edgeSmoothingValue;\nuniform float borderMinValue;\n#endif\n#ifdef HOVERLIGHT\nvarying vec3 worldPosition;\nuniform vec3 hoverPosition;\nuniform vec4 hoverColor;\nuniform float hoverRadius;\n#endif\n#ifdef TEXTURE\nuniform sampler2D albedoSampler;\n#endif\nvoid main(void) {\nvec3 albedo=albedoColor.rgb;\nfloat alpha=albedoColor.a;\n#ifdef TEXTURE\nalbedo=texture2D(albedoSampler,vUV).rgb;\n#endif\n#ifdef HOVERLIGHT\nfloat pointToHover=(1.0-clamp(length(hoverPosition-worldPosition)/hoverRadius,0.,1.))*hoverColor.a;\nalbedo=clamp(albedo+hoverColor.rgb*pointToHover,0.,1.);\n#else\nfloat pointToHover=1.0;\n#endif\n#ifdef BORDER\nfloat borderPower=10.0;\nfloat inverseBorderPower=1.0/borderPower;\nvec3 borderColor=albedo*borderPower;\nvec2 distanceToEdge;\ndistanceToEdge.x=abs(vUV.x-0.5)*2.0;\ndistanceToEdge.y=abs(vUV.y-0.5)*2.0;\nfloat borderValue=max(smoothstep(scaleInfo.x-edgeSmoothingValue,scaleInfo.x+edgeSmoothingValue,distanceToEdge.x),\nsmoothstep(scaleInfo.y-edgeSmoothingValue,scaleInfo.y+edgeSmoothingValue,distanceToEdge.y));\nborderColor=borderColor*borderValue*max(borderMinValue*inverseBorderPower,pointToHover);\nalbedo+=borderColor;\nalpha=max(alpha,borderValue);\n#endif\n#ifdef INNERGLOW\n\nvec2 uvGlow=(vUV-vec2(0.5,0.5))*(innerGlowColor.a*2.0);\nuvGlow=uvGlow*uvGlow;\nuvGlow=uvGlow*uvGlow;\nalbedo+=mix(vec3(0.0,0.0,0.0),innerGlowColor.rgb,uvGlow.x+uvGlow.y);\n#endif\ngl_FragColor=vec4(albedo,alpha);\n}`;\n\nEffect.ShadersStore[name] = shader;\n/** @hidden */\nexport var fluentPixelShader = { name, shader };\n", "import { Nullable } from \"@babylonjs/core/types\";\r\nimport { serializeAsColor4, serializeAsVector3, serializeAsTexture, serialize, expandToProperty, serializeAsColor3, SerializationHelper } from \"@babylonjs/core/Misc/decorators\";\r\nimport { Vector3, Matrix, TmpVectors } from \"@babylonjs/core/Maths/math.vector\";\r\nimport { BaseTexture } from \"@babylonjs/core/Materials/Textures/baseTexture\";\r\nimport { MaterialDefines } from \"@babylonjs/core/Materials/materialDefines\";\r\nimport { IEffectCreationOptions } from \"@babylonjs/core/Materials/effect\";\r\nimport { MaterialHelper } from \"@babylonjs/core/Materials/materialHelper\";\r\nimport { PushMaterial } from \"@babylonjs/core/Materials/pushMaterial\";\r\nimport { VertexBuffer } from \"@babylonjs/core/Meshes/buffer\";\r\nimport { AbstractMesh } from \"@babylonjs/core/Meshes/abstractMesh\";\r\nimport { SubMesh } from \"@babylonjs/core/Meshes/subMesh\";\r\nimport { Mesh } from \"@babylonjs/core/Meshes/mesh\";\r\nimport { Scene } from \"@babylonjs/core/scene\";\r\nimport { _TypeStore } from '@babylonjs/core/Misc/typeStore';\r\nimport { Color3, Color4 } from '@babylonjs/core/Maths/math.color';\r\n\r\nimport \"./shaders/fluent.vertex\";\r\nimport \"./shaders/fluent.fragment\";\r\n\r\n/** @hidden */\r\nexport class FluentMaterialDefines extends MaterialDefines {\r\n    public INNERGLOW = false;\r\n    public BORDER = false;\r\n    public HOVERLIGHT = false;\r\n    public TEXTURE = false;\r\n\r\n    constructor() {\r\n        super();\r\n        this.rebuild();\r\n    }\r\n}\r\n\r\n/**\r\n * Class used to render controls with fluent desgin\r\n */\r\nexport class FluentMaterial extends PushMaterial {\r\n\r\n    /**\r\n     * Gets or sets inner glow intensity. A value of 0 means no glow (default is 0.5)\r\n     */\r\n    @serialize()\r\n    @expandToProperty(\"_markAllSubMeshesAsTexturesDirty\")\r\n    public innerGlowColorIntensity = 0.5;\r\n\r\n    /**\r\n     * Gets or sets the inner glow color (white by default)\r\n     */\r\n    @serializeAsColor3()\r\n    public innerGlowColor = new Color3(1.0, 1.0, 1.0);\r\n\r\n    /**\r\n     * Gets or sets the albedo color (Default is Color3(0.3, 0.35, 0.4))\r\n     */\r\n    @serializeAsColor3()\r\n    public albedoColor = new Color3(0.3, 0.35, 0.4);\r\n\r\n    /**\r\n     * Gets or sets a boolean indicating if borders must be rendered (default is false)\r\n     */\r\n    @serialize()\r\n    @expandToProperty(\"_markAllSubMeshesAsTexturesDirty\")\r\n    public renderBorders = false;\r\n\r\n    /**\r\n     * Gets or sets border width (default is 0.5)\r\n     */\r\n    @serialize()\r\n    public borderWidth = 0.5;\r\n\r\n    /**\r\n     * Gets or sets a value indicating the smoothing value applied to border edges (0.02 by default)\r\n     */\r\n    @serialize()\r\n    public edgeSmoothingValue = 0.02;\r\n\r\n    /**\r\n     * Gets or sets the minimum value that can be applied to border width (default is 0.1)\r\n     */\r\n    @serialize()\r\n    public borderMinValue = 0.1;\r\n\r\n    /**\r\n     * Gets or sets a boolean indicating if hover light must be rendered (default is false)\r\n     */\r\n    @serialize()\r\n    @expandToProperty(\"_markAllSubMeshesAsTexturesDirty\")\r\n    public renderHoverLight = false;\r\n\r\n    /**\r\n     * Gets or sets the radius used to render the hover light (default is 1.0)\r\n     */\r\n    @serialize()\r\n    public hoverRadius = 1.0;\r\n\r\n    /**\r\n     * Gets or sets the color used to render the hover light (default is Color4(0.3, 0.3, 0.3, 1.0))\r\n     */\r\n    @serializeAsColor4()\r\n    public hoverColor = new Color4(0.3, 0.3, 0.3, 1.0);\r\n\r\n    /**\r\n     * Gets or sets the hover light position in world space (default is Vector3.Zero())\r\n     */\r\n    @serializeAsVector3()\r\n    public hoverPosition = Vector3.Zero();\r\n\r\n    @serializeAsTexture(\"albedoTexture\")\r\n    private _albedoTexture: Nullable<BaseTexture>;\r\n\r\n    /** Gets or sets the texture to use for albedo color */\r\n    @expandToProperty(\"_markAllSubMeshesAsTexturesAndMiscDirty\")\r\n    public albedoTexture: Nullable<BaseTexture>;\r\n\r\n    /**\r\n     * Creates a new Fluent material\r\n     * @param name defines the name of the material\r\n     * @param scene defines the hosting scene\r\n     */\r\n    constructor(name: string, scene: Scene) {\r\n        super(name, scene);\r\n    }\r\n\r\n    public needAlphaBlending(): boolean {\r\n        return this.alpha !== 1.0;\r\n    }\r\n\r\n    public needAlphaTesting(): boolean {\r\n        return false;\r\n    }\r\n\r\n    public getAlphaTestTexture(): Nullable<BaseTexture> {\r\n        return null;\r\n    }\r\n\r\n    public isReadyForSubMesh(mesh: AbstractMesh, subMesh: SubMesh, useInstances?: boolean): boolean {\r\n        if (this.isFrozen) {\r\n            if (subMesh.effect && subMesh.effect._wasPreviouslyReady) {\r\n                return true;\r\n            }\r\n        }\r\n\r\n        if (!subMesh._materialDefines) {\r\n            subMesh._materialDefines = new FluentMaterialDefines();\r\n        }\r\n\r\n        var scene = this.getScene();\r\n        var defines = <FluentMaterialDefines>subMesh._materialDefines;\r\n        if (!this.checkReadyOnEveryCall && subMesh.effect) {\r\n            if (defines._renderId === scene.getRenderId()) {\r\n                return true;\r\n            }\r\n        }\r\n\r\n        if (defines._areTexturesDirty) {\r\n            defines.INNERGLOW = this.innerGlowColorIntensity > 0;\r\n            defines.BORDER = this.renderBorders;\r\n            defines.HOVERLIGHT = this.renderHoverLight;\r\n\r\n            if (this._albedoTexture) {\r\n                if (!this._albedoTexture.isReadyOrNotBlocking()) {\r\n                    return false;\r\n                } else {\r\n                    defines.TEXTURE = true;\r\n                }\r\n            } else {\r\n                defines.TEXTURE = false;\r\n            }\r\n        }\r\n\r\n        var engine = scene.getEngine();\r\n        // Get correct effect\r\n        if (defines.isDirty) {\r\n            defines.markAsProcessed();\r\n            scene.resetCachedMaterial();\r\n\r\n            //Attributes\r\n            var attribs = [VertexBuffer.PositionKind];\r\n            attribs.push(VertexBuffer.NormalKind);\r\n            attribs.push(VertexBuffer.UVKind);\r\n\r\n            var shaderName = \"fluent\";\r\n\r\n            var uniforms = [\"world\", \"viewProjection\", \"innerGlowColor\", \"albedoColor\", \"borderWidth\", \"edgeSmoothingValue\", \"scaleFactor\", \"borderMinValue\",\r\n                \"hoverColor\", \"hoverPosition\", \"hoverRadius\"\r\n            ];\r\n\r\n            var samplers = [\"albedoSampler\"];\r\n            var uniformBuffers = new Array<string>();\r\n\r\n            MaterialHelper.PrepareUniformsAndSamplersList(<IEffectCreationOptions>{\r\n                uniformsNames: uniforms,\r\n                uniformBuffersNames: uniformBuffers,\r\n                samplers: samplers,\r\n                defines: defines,\r\n                maxSimultaneousLights: 4\r\n            });\r\n\r\n            var join = defines.toString();\r\n            subMesh.setEffect(scene.getEngine().createEffect(shaderName,\r\n                <IEffectCreationOptions>{\r\n                    attributes: attribs,\r\n                    uniformsNames: uniforms,\r\n                    uniformBuffersNames: uniformBuffers,\r\n                    samplers: samplers,\r\n                    defines: join,\r\n                    fallbacks: null,\r\n                    onCompiled: this.onCompiled,\r\n                    onError: this.onError,\r\n                    indexParameters: { maxSimultaneousLights: 4 }\r\n                }, engine));\r\n\r\n        }\r\n\r\n        if (!subMesh.effect || !subMesh.effect.isReady()) {\r\n            return false;\r\n        }\r\n\r\n        defines._renderId = scene.getRenderId();\r\n        subMesh.effect._wasPreviouslyReady = true;\r\n\r\n        return true;\r\n    }\r\n\r\n    public bindForSubMesh(world: Matrix, mesh: Mesh, subMesh: SubMesh): void {\r\n        var scene = this.getScene();\r\n\r\n        var defines = <FluentMaterialDefines>subMesh._materialDefines;\r\n        if (!defines) {\r\n            return;\r\n        }\r\n\r\n        var effect = subMesh.effect;\r\n        if (!effect) {\r\n            return;\r\n        }\r\n        this._activeEffect = effect;\r\n\r\n        // Matrices\r\n        this.bindOnlyWorldMatrix(world);\r\n        this._activeEffect.setMatrix(\"viewProjection\", scene.getTransformMatrix());\r\n\r\n        if (this._mustRebind(scene, effect)) {\r\n            this._activeEffect.setColor4(\"albedoColor\", this.albedoColor, this.alpha);\r\n\r\n            if (defines.INNERGLOW) {\r\n                this._activeEffect.setColor4(\"innerGlowColor\", this.innerGlowColor, this.innerGlowColorIntensity);\r\n            }\r\n\r\n            if (defines.BORDER) {\r\n                this._activeEffect.setFloat(\"borderWidth\", this.borderWidth);\r\n                this._activeEffect.setFloat(\"edgeSmoothingValue\", this.edgeSmoothingValue);\r\n                this._activeEffect.setFloat(\"borderMinValue\", this.borderMinValue);\r\n\r\n                mesh.getBoundingInfo().boundingBox.extendSize.multiplyToRef(mesh.scaling, TmpVectors.Vector3[0]);\r\n                this._activeEffect.setVector3(\"scaleFactor\", TmpVectors.Vector3[0]);\r\n            }\r\n\r\n            if (defines.HOVERLIGHT) {\r\n                this._activeEffect.setDirectColor4(\"hoverColor\", this.hoverColor);\r\n                this._activeEffect.setFloat(\"hoverRadius\", this.hoverRadius);\r\n                this._activeEffect.setVector3(\"hoverPosition\", this.hoverPosition);\r\n            }\r\n\r\n            if (defines.TEXTURE) {\r\n                this._activeEffect.setTexture(\"albedoSampler\", this._albedoTexture);\r\n            }\r\n        }\r\n\r\n        this._afterBind(mesh, this._activeEffect);\r\n    }\r\n\r\n    public getActiveTextures(): BaseTexture[] {\r\n        var activeTextures = super.getActiveTextures();\r\n\r\n        return activeTextures;\r\n    }\r\n\r\n    public hasTexture(texture: BaseTexture): boolean {\r\n        if (super.hasTexture(texture)) {\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    public dispose(forceDisposeEffect?: boolean): void {\r\n        super.dispose(forceDisposeEffect);\r\n    }\r\n\r\n    public clone(name: string): FluentMaterial {\r\n        return SerializationHelper.Clone(() => new FluentMaterial(name, this.getScene()), this);\r\n    }\r\n\r\n    public serialize(): any {\r\n        var serializationObject = SerializationHelper.Serialize(this);\r\n        serializationObject.customType = \"BABYLON.GUI.FluentMaterial\";\r\n        return serializationObject;\r\n    }\r\n\r\n    public getClassName(): string {\r\n        return \"FluentMaterial\";\r\n    }\r\n\r\n    // Statics\r\n    public static Parse(source: any, scene: Scene, rootUrl: string): FluentMaterial {\r\n        return SerializationHelper.Parse(() => new FluentMaterial(source.name, scene), source, scene, rootUrl);\r\n    }\r\n}\r\n\r\n_TypeStore.RegisteredTypes[\"BABYLON.GUI.FluentMaterial\"] = FluentMaterial;", "import { Button3D } from \"./button3D\";\r\n\r\nimport { Nullable } from \"@babylonjs/core/types\";\r\nimport { Observer } from \"@babylonjs/core/Misc/observable\";\r\nimport { Vector3 } from \"@babylonjs/core/Maths/math.vector\";\r\nimport { StandardMaterial } from \"@babylonjs/core/Materials/standardMaterial\";\r\nimport { TransformNode } from \"@babylonjs/core/Meshes/transformNode\";\r\nimport { Mesh } from \"@babylonjs/core/Meshes/mesh\";\r\nimport { PlaneBuilder } from \"@babylonjs/core/Meshes/Builders/planeBuilder\";\r\nimport { BoxBuilder } from \"@babylonjs/core/Meshes/Builders/boxBuilder\";\r\nimport { FadeInOutBehavior } from \"@babylonjs/core/Behaviors/Meshes/fadeInOutBehavior\";\r\nimport { Scene } from \"@babylonjs/core/scene\";\r\n\r\nimport { FluentMaterial } from \"../materials/fluentMaterial\";\r\nimport { StackPanel } from \"../../2D/controls/stackPanel\";\r\nimport { Image } from \"../../2D/controls/image\";\r\nimport { TextBlock } from \"../../2D/controls/textBlock\";\r\nimport { AdvancedDynamicTexture } from \"../../2D/advancedDynamicTexture\";\r\nimport { Control3D } from \"./control3D\";\r\nimport { Color3 } from '@babylonjs/core/Maths/math.color';\r\n\r\n/**\r\n * Class used to create a holographic button in 3D\r\n */\r\nexport class HolographicButton extends Button3D {\r\n    private _backPlate: Mesh;\r\n    private _textPlate: Mesh;\r\n    private _frontPlate: Mesh;\r\n    private _text: string;\r\n    private _imageUrl: string;\r\n    private _shareMaterials = true;\r\n    private _frontMaterial: FluentMaterial;\r\n    private _backMaterial: FluentMaterial;\r\n    private _plateMaterial: StandardMaterial;\r\n    private _pickedPointObserver: Nullable<Observer<Nullable<Vector3>>>;\r\n\r\n    // Tooltip\r\n    private _tooltipFade: Nullable<FadeInOutBehavior>;\r\n    private _tooltipTextBlock: Nullable<TextBlock>;\r\n    private _tooltipTexture: Nullable<AdvancedDynamicTexture>;\r\n    private _tooltipMesh: Nullable<Mesh>;\r\n    private _tooltipHoverObserver: Nullable<Observer<Control3D>>;\r\n    private _tooltipOutObserver: Nullable<Observer<Control3D>>;\r\n\r\n    private _disposeTooltip() {\r\n        this._tooltipFade = null;\r\n        if (this._tooltipTextBlock) {\r\n            this._tooltipTextBlock.dispose();\r\n        }\r\n        if (this._tooltipTexture) {\r\n            this._tooltipTexture.dispose();\r\n        }\r\n        if (this._tooltipMesh) {\r\n            this._tooltipMesh.dispose();\r\n        }\r\n        this.onPointerEnterObservable.remove(this._tooltipHoverObserver);\r\n        this.onPointerOutObservable.remove(this._tooltipOutObserver);\r\n    }\r\n\r\n    /**\r\n     * Rendering ground id of all the mesh in the button\r\n     */\r\n    public set renderingGroupId(id: number) {\r\n        this._backPlate.renderingGroupId = id;\r\n        this._textPlate.renderingGroupId = id;\r\n        this._frontPlate.renderingGroupId = id;\r\n\r\n        if (this._tooltipMesh) {\r\n            this._tooltipMesh.renderingGroupId = id;\r\n        }\r\n    }\r\n    public get renderingGroupId(): number {\r\n        return this._backPlate.renderingGroupId;\r\n    }\r\n\r\n    /**\r\n     * Text to be displayed on the tooltip shown when hovering on the button. When set to null tooltip is disabled. (Default: null)\r\n     */\r\n    public set tooltipText(text: Nullable<string>) {\r\n        if (!text) {\r\n            this._disposeTooltip();\r\n            return;\r\n        }\r\n        if (!this._tooltipFade) {\r\n            // Create tooltip with mesh and text\r\n            this._tooltipMesh = PlaneBuilder.CreatePlane(\"\", { size: 1 }, this._backPlate._scene);\r\n            var tooltipBackground = PlaneBuilder.CreatePlane(\"\", { size: 1, sideOrientation: Mesh.DOUBLESIDE }, this._backPlate._scene);\r\n            var mat = new StandardMaterial(\"\", this._backPlate._scene);\r\n            mat.diffuseColor = Color3.FromHexString(\"#212121\");\r\n            tooltipBackground.material = mat;\r\n            tooltipBackground.isPickable = false;\r\n            this._tooltipMesh.addChild(tooltipBackground);\r\n            tooltipBackground.position.z = 0.05;\r\n            this._tooltipMesh.scaling.y = 1 / 3;\r\n            this._tooltipMesh.position.y = 0.7;\r\n            this._tooltipMesh.position.z = -0.15;\r\n            this._tooltipMesh.isPickable = false;\r\n            this._tooltipMesh.parent = this._backPlate;\r\n\r\n            // Create text texture for the tooltip\r\n            this._tooltipTexture = AdvancedDynamicTexture.CreateForMesh(this._tooltipMesh);\r\n            this._tooltipTextBlock = new TextBlock();\r\n            this._tooltipTextBlock.scaleY = 3;\r\n            this._tooltipTextBlock.color = \"white\";\r\n            this._tooltipTextBlock.fontSize = 130;\r\n            this._tooltipTexture.addControl(this._tooltipTextBlock);\r\n\r\n            // Add hover action to tooltip\r\n            this._tooltipFade = new FadeInOutBehavior();\r\n            this._tooltipFade.delay = 500;\r\n            this._tooltipMesh.addBehavior(this._tooltipFade);\r\n            this._tooltipHoverObserver = this.onPointerEnterObservable.add(() => {\r\n                if (this._tooltipFade) {\r\n                    this._tooltipFade.fadeIn(true);\r\n                }\r\n            });\r\n            this._tooltipOutObserver = this.onPointerOutObservable.add(() => {\r\n                if (this._tooltipFade) {\r\n                    this._tooltipFade.fadeIn(false);\r\n                }\r\n            });\r\n        }\r\n        if (this._tooltipTextBlock) {\r\n            this._tooltipTextBlock.text = text;\r\n        }\r\n    }\r\n\r\n    public get tooltipText() {\r\n        if (this._tooltipTextBlock) {\r\n            return this._tooltipTextBlock.text;\r\n        }\r\n        return null;\r\n    }\r\n\r\n    /**\r\n     * Gets or sets text for the button\r\n     */\r\n    public get text(): string {\r\n        return this._text;\r\n    }\r\n\r\n    public set text(value: string) {\r\n        if (this._text === value) {\r\n            return;\r\n        }\r\n\r\n        this._text = value;\r\n        this._rebuildContent();\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the image url for the button\r\n     */\r\n    public get imageUrl(): string {\r\n        return this._imageUrl;\r\n    }\r\n\r\n    public set imageUrl(value: string) {\r\n        if (this._imageUrl === value) {\r\n            return;\r\n        }\r\n\r\n        this._imageUrl = value;\r\n        this._rebuildContent();\r\n    }\r\n\r\n    /**\r\n     * Gets the back material used by this button\r\n     */\r\n    public get backMaterial(): FluentMaterial {\r\n        return this._backMaterial;\r\n    }\r\n\r\n    /**\r\n     * Gets the front material used by this button\r\n     */\r\n    public get frontMaterial(): FluentMaterial {\r\n        return this._frontMaterial;\r\n    }\r\n\r\n    /**\r\n     * Gets the plate material used by this button\r\n     */\r\n    public get plateMaterial(): StandardMaterial {\r\n        return this._plateMaterial;\r\n    }\r\n\r\n    /**\r\n     * Gets a boolean indicating if this button shares its material with other HolographicButtons\r\n     */\r\n    public get shareMaterials(): boolean {\r\n        return this._shareMaterials;\r\n    }\r\n\r\n    /**\r\n     * Creates a new button\r\n     * @param name defines the control name\r\n     */\r\n    constructor(name?: string, shareMaterials = true) {\r\n        super(name);\r\n\r\n        this._shareMaterials = shareMaterials;\r\n\r\n        // Default animations\r\n        this.pointerEnterAnimation = () => {\r\n            if (!this.mesh) {\r\n                return;\r\n            }\r\n            this._frontPlate.setEnabled(true);\r\n        };\r\n\r\n        this.pointerOutAnimation = () => {\r\n            if (!this.mesh) {\r\n                return;\r\n            }\r\n            this._frontPlate.setEnabled(false);\r\n        };\r\n    }\r\n\r\n    protected _getTypeName(): string {\r\n        return \"HolographicButton\";\r\n    }\r\n\r\n    private _rebuildContent(): void {\r\n        this._disposeFacadeTexture();\r\n\r\n        let panel = new StackPanel();\r\n        panel.isVertical = true;\r\n\r\n        if (this._imageUrl) {\r\n            let image = new Image();\r\n            image.source = this._imageUrl;\r\n            image.paddingTop = \"40px\";\r\n            image.height = \"180px\";\r\n            image.width = \"100px\";\r\n            image.paddingBottom = \"40px\";\r\n            panel.addControl(image);\r\n        }\r\n\r\n        if (this._text) {\r\n            let text = new TextBlock();\r\n            text.text = this._text;\r\n            text.color = \"white\";\r\n            text.height = \"30px\";\r\n            text.fontSize = 24;\r\n            panel.addControl(text);\r\n        }\r\n\r\n        if (this._frontPlate) {\r\n            this.content = panel;\r\n        }\r\n    }\r\n\r\n    // Mesh association\r\n    protected _createNode(scene: Scene): TransformNode {\r\n        this._backPlate = BoxBuilder.CreateBox(this.name + \"BackMesh\", {\r\n            width: 1.0,\r\n            height: 1.0,\r\n            depth: 0.08\r\n        }, scene);\r\n\r\n        this._frontPlate = BoxBuilder.CreateBox(this.name + \"FrontMesh\", {\r\n            width: 1.0,\r\n            height: 1.0,\r\n            depth: 0.08\r\n        }, scene);\r\n\r\n        this._frontPlate.parent = this._backPlate;\r\n        this._frontPlate.position.z = -0.08;\r\n        this._frontPlate.isPickable = false;\r\n        this._frontPlate.setEnabled(false);\r\n\r\n        this._textPlate = <Mesh>super._createNode(scene);\r\n        this._textPlate.parent = this._backPlate;\r\n        this._textPlate.position.z = -0.08;\r\n        this._textPlate.isPickable = false;\r\n\r\n        return this._backPlate;\r\n    }\r\n\r\n    protected _applyFacade(facadeTexture: AdvancedDynamicTexture) {\r\n        this._plateMaterial.emissiveTexture = facadeTexture;\r\n        this._plateMaterial.opacityTexture = facadeTexture;\r\n    }\r\n\r\n    private _createBackMaterial(mesh: Mesh) {\r\n        this._backMaterial = new FluentMaterial(this.name + \"Back Material\", mesh.getScene());\r\n        this._backMaterial.renderHoverLight = true;\r\n        this._pickedPointObserver = this._host.onPickedPointChangedObservable.add((pickedPoint) => {\r\n            if (pickedPoint) {\r\n                this._backMaterial.hoverPosition = pickedPoint;\r\n                this._backMaterial.hoverColor.a = 1.0;\r\n            } else {\r\n                this._backMaterial.hoverColor.a = 0;\r\n            }\r\n        });\r\n    }\r\n\r\n    private _createFrontMaterial(mesh: Mesh) {\r\n        this._frontMaterial = new FluentMaterial(this.name + \"Front Material\", mesh.getScene());\r\n        this._frontMaterial.innerGlowColorIntensity = 0; // No inner glow\r\n        this._frontMaterial.alpha = 0.5; // Additive\r\n        this._frontMaterial.renderBorders = true;\r\n    }\r\n\r\n    private _createPlateMaterial(mesh: Mesh) {\r\n        this._plateMaterial = new StandardMaterial(this.name + \"Plate Material\", mesh.getScene());\r\n        this._plateMaterial.specularColor = Color3.Black();\r\n    }\r\n\r\n    protected _affectMaterial(mesh: Mesh) {\r\n        // Back\r\n        if (this._shareMaterials) {\r\n            if (!this._host._sharedMaterials[\"backFluentMaterial\"]) {\r\n                this._createBackMaterial(mesh);\r\n                this._host._sharedMaterials[\"backFluentMaterial\"] = this._backMaterial;\r\n            } else {\r\n                this._backMaterial = this._host._sharedMaterials[\"backFluentMaterial\"] as FluentMaterial;\r\n            }\r\n\r\n            // Front\r\n            if (!this._host._sharedMaterials[\"frontFluentMaterial\"]) {\r\n                this._createFrontMaterial(mesh);\r\n                this._host._sharedMaterials[\"frontFluentMaterial\"] = this._frontMaterial;\r\n            } else {\r\n                this._frontMaterial = this._host._sharedMaterials[\"frontFluentMaterial\"] as FluentMaterial;\r\n            }\r\n        } else {\r\n            this._createBackMaterial(mesh);\r\n            this._createFrontMaterial(mesh);\r\n        }\r\n\r\n        this._createPlateMaterial(mesh);\r\n        this._backPlate.material = this._backMaterial;\r\n        this._frontPlate.material = this._frontMaterial;\r\n        this._textPlate.material = this._plateMaterial;\r\n\r\n        this._rebuildContent();\r\n    }\r\n\r\n    /**\r\n     * Releases all associated resources\r\n     */\r\n    public dispose() {\r\n        super.dispose(); // will dispose main mesh ie. back plate\r\n\r\n        this._disposeTooltip();\r\n\r\n        if (!this.shareMaterials) {\r\n            this._backMaterial.dispose();\r\n            this._frontMaterial.dispose();\r\n            this._plateMaterial.dispose();\r\n\r\n            if (this._pickedPointObserver) {\r\n                this._host.onPickedPointChangedObservable.remove(this._pickedPointObserver);\r\n                this._pickedPointObserver = null;\r\n            }\r\n        }\r\n    }\r\n}", "import { TransformNode } from \"@babylonjs/core/Meshes/transformNode\";\r\nimport { AbstractMesh } from \"@babylonjs/core/Meshes/abstractMesh\";\r\nimport { Mesh } from \"@babylonjs/core/Meshes/mesh\";\r\nimport { Scene } from \"@babylonjs/core/scene\";\r\n\r\nimport { Button3D } from \"./button3D\";\r\n\r\n/**\r\n * Class used to create an interactable object. It's a 3D button using a mesh coming from the current scene\r\n */\r\nexport class MeshButton3D extends Button3D {\r\n    /** @hidden */\r\n    protected _currentMesh: Mesh;\r\n\r\n    /**\r\n     * Creates a new 3D button based on a mesh\r\n     * @param mesh mesh to become a 3D button\r\n     * @param name defines the control name\r\n     */\r\n    constructor(mesh: Mesh, name?: string) {\r\n        super(name);\r\n        this._currentMesh = mesh;\r\n\r\n        /**\r\n         * Provides a default behavior on hover/out & up/down\r\n         * Override those function to create your own desired behavior specific to your mesh\r\n         */\r\n        this.pointerEnterAnimation = () => {\r\n            if (!this.mesh) {\r\n                return;\r\n            }\r\n            this.mesh.scaling.scaleInPlace(1.1);\r\n        };\r\n\r\n        this.pointerOutAnimation = () => {\r\n            if (!this.mesh) {\r\n                return;\r\n            }\r\n            this.mesh.scaling.scaleInPlace(1.0 / 1.1);\r\n        };\r\n\r\n        this.pointerDownAnimation = () => {\r\n            if (!this.mesh) {\r\n                return;\r\n            }\r\n            this.mesh.scaling.scaleInPlace(0.95);\r\n        };\r\n\r\n        this.pointerUpAnimation = () => {\r\n            if (!this.mesh) {\r\n                return;\r\n            }\r\n            this.mesh.scaling.scaleInPlace(1.0 / 0.95);\r\n        };\r\n    }\r\n\r\n    protected _getTypeName(): string {\r\n        return \"MeshButton3D\";\r\n    }\r\n\r\n    // Mesh association\r\n    protected _createNode(scene: Scene): TransformNode {\r\n        this._currentMesh.getChildMeshes().forEach((mesh) => {\r\n            mesh.metadata = this;\r\n        });\r\n        return this._currentMesh;\r\n    }\r\n\r\n    protected _affectMaterial(mesh: AbstractMesh) {\r\n    }\r\n}", "import { TmpVectors, Vector3 } from \"@babylonjs/core/Maths/math.vector\";\r\n\r\nimport { Container3D } from \"./container3D\";\r\nimport { Control3D } from \"./control3D\";\r\nimport { VolumeBasedPanel } from \"./volumeBasedPanel\";\r\n\r\n/**\r\n * Class used to create a container panel deployed on the surface of a plane\r\n */\r\nexport class PlanePanel extends VolumeBasedPanel {\r\n    protected _mapGridNode(control: Control3D, nodePosition: Vector3) {\r\n        let mesh = control.mesh;\r\n\r\n        if (!mesh) {\r\n            return;\r\n        }\r\n\r\n        control.position = nodePosition.clone();\r\n        let target = TmpVectors.Vector3[0];\r\n\r\n        target.copyFrom(nodePosition);\r\n\r\n        switch (this.orientation) {\r\n            case Container3D.FACEORIGIN_ORIENTATION:\r\n            case Container3D.FACEFORWARD_ORIENTATION:\r\n                target.addInPlace(new Vector3(0, 0, 1));\r\n                mesh.lookAt(target);\r\n                break;\r\n            case Container3D.FACEFORWARDREVERSED_ORIENTATION:\r\n            case Container3D.FACEORIGINREVERSED_ORIENTATION:\r\n                target.addInPlace(new Vector3(0, 0, -1));\r\n                mesh.lookAt(target);\r\n                break;\r\n        }\r\n\r\n    }\r\n}\r\n", "import { Tools } from \"@babylonjs/core/Misc/tools\";\r\nimport { TmpVectors, Vector3 } from \"@babylonjs/core/Maths/math.vector\";\r\nimport { float } from \"@babylonjs/core/types\";\r\n\r\nimport { VolumeBasedPanel } from \"./volumeBasedPanel\";\r\nimport { Control3D } from \"./control3D\";\r\nimport { Container3D } from \"./container3D\";\r\n\r\n/**\r\n * Class used to create a container panel where items get randomized planar mapping\r\n */\r\nexport class ScatterPanel extends VolumeBasedPanel {\r\n    private _iteration = 100.0;\r\n\r\n    /**\r\n     * Gets or sets the number of iteration to use to scatter the controls (100 by default)\r\n     */\r\n    public get iteration(): float {\r\n        return this._iteration;\r\n    }\r\n\r\n    public set iteration(value: float) {\r\n        if (this._iteration === value) {\r\n            return;\r\n        }\r\n\r\n        this._iteration = value;\r\n\r\n        Tools.SetImmediate(() => {\r\n            this._arrangeChildren();\r\n        });\r\n    }\r\n\r\n    protected _mapGridNode(control: Control3D, nodePosition: Vector3) {\r\n        let mesh = control.mesh;\r\n        let newPos = this._scatterMapping(nodePosition);\r\n\r\n        if (!mesh) {\r\n            return;\r\n        }\r\n\r\n        switch (this.orientation) {\r\n            case Container3D.FACEORIGIN_ORIENTATION:\r\n            case Container3D.FACEFORWARD_ORIENTATION:\r\n                mesh.lookAt(new Vector3(0, 0, 1));\r\n                break;\r\n            case Container3D.FACEFORWARDREVERSED_ORIENTATION:\r\n            case Container3D.FACEORIGINREVERSED_ORIENTATION:\r\n                mesh.lookAt(new Vector3(0, 0, -1));\r\n                break;\r\n        }\r\n\r\n        control.position = newPos;\r\n    }\r\n\r\n    private _scatterMapping(source: Vector3): Vector3 {\r\n        source.x = (1.0 - Math.random() * 2.0) * this._cellWidth;\r\n        source.y = (1.0 - Math.random() * 2.0) * this._cellHeight;\r\n\r\n        return source;\r\n    }\r\n\r\n    protected _finalProcessing() {\r\n        var meshes = [];\r\n        for (var child of this._children) {\r\n            if (!child.mesh) {\r\n                continue;\r\n            }\r\n\r\n            meshes.push(child.mesh);\r\n        }\r\n\r\n        for (var count = 0; count < this._iteration; count++) {\r\n            meshes.sort((a, b) => {\r\n                let distance1 = a.position.lengthSquared();\r\n                let distance2 = b.position.lengthSquared();\r\n\r\n                if (distance1 < distance2) {\r\n                    return 1;\r\n                } else if (distance1 > distance2) {\r\n                    return -1;\r\n                }\r\n\r\n                return 0;\r\n            });\r\n\r\n            let radiusPaddingSquared = Math.pow(this.margin, 2.0);\r\n            let cellSize = Math.max(this._cellWidth, this._cellHeight);\r\n            let difference2D = TmpVectors.Vector2[0];\r\n            let difference = TmpVectors.Vector3[0];\r\n\r\n            for (let i = 0; i < meshes.length - 1; i++) {\r\n                for (let j = i + 1; j < meshes.length; j++) {\r\n                    if (i != j) {\r\n                        meshes[j].position.subtractToRef(meshes[i].position, difference);\r\n\r\n                        // Ignore Z axis\r\n                        difference2D.x = difference.x;\r\n                        difference2D.y = difference.y;\r\n                        let combinedRadius = cellSize;\r\n                        let distance = difference2D.lengthSquared() - radiusPaddingSquared;\r\n                        let minSeparation = Math.min(distance, radiusPaddingSquared);\r\n                        distance -= minSeparation;\r\n\r\n                        if (distance < (Math.pow(combinedRadius, 2.0))) {\r\n                            difference2D.normalize();\r\n                            difference.scaleInPlace((combinedRadius - Math.sqrt(distance)) * 0.5);\r\n                            meshes[j].position.addInPlace(difference);\r\n                            meshes[i].position.subtractInPlace(difference);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n}", "import { Tools } from \"@babylonjs/core/Misc/tools\";\r\nimport { Matrix, TmpVectors, Vector3 } from \"@babylonjs/core/Maths/math.vector\";\r\nimport { float } from \"@babylonjs/core/types\";\r\n\r\nimport { VolumeBasedPanel } from \"./volumeBasedPanel\";\r\nimport { Control3D } from \"./control3D\";\r\nimport { Container3D } from \"./container3D\";\r\nimport { Axis, Space } from '@babylonjs/core/Maths/math.axis';\r\n\r\n/**\r\n * Class used to create a container panel deployed on the surface of a sphere\r\n */\r\nexport class SpherePanel extends VolumeBasedPanel {\r\n    private _radius = 5.0;\r\n\r\n    /**\r\n     * Gets or sets the radius of the sphere where to project controls (5 by default)\r\n     */\r\n    public get radius(): float {\r\n        return this._radius;\r\n    }\r\n\r\n    public set radius(value: float) {\r\n        if (this._radius === value) {\r\n            return;\r\n        }\r\n\r\n        this._radius = value;\r\n\r\n        Tools.SetImmediate(() => {\r\n            this._arrangeChildren();\r\n        });\r\n    }\r\n\r\n    protected _mapGridNode(control: Control3D, nodePosition: Vector3) {\r\n        let mesh = control.mesh;\r\n\r\n        if (!mesh) {\r\n            return;\r\n        }\r\n\r\n        let newPos = this._sphericalMapping(nodePosition);\r\n        control.position = newPos;\r\n\r\n        switch (this.orientation) {\r\n            case Container3D.FACEORIGIN_ORIENTATION:\r\n                mesh.lookAt(new Vector3(2 * newPos.x, 2 * newPos.y, 2 * newPos.z));\r\n                break;\r\n            case Container3D.FACEORIGINREVERSED_ORIENTATION:\r\n                mesh.lookAt(new Vector3(-newPos.x, -newPos.y, -newPos.z));\r\n                break;\r\n            case Container3D.FACEFORWARD_ORIENTATION:\r\n                break;\r\n            case Container3D.FACEFORWARDREVERSED_ORIENTATION:\r\n                mesh.rotate(Axis.Y, Math.PI, Space.LOCAL);\r\n                break;\r\n        }\r\n    }\r\n\r\n    private _sphericalMapping(source: Vector3) {\r\n        let newPos = new Vector3(0, 0, this._radius);\r\n\r\n        let xAngle = (source.y / this._radius);\r\n        let yAngle = -(source.x / this._radius);\r\n\r\n        Matrix.RotationYawPitchRollToRef(yAngle, xAngle, 0, TmpVectors.Matrix[0]);\r\n\r\n        return Vector3.TransformNormal(newPos, TmpVectors.Matrix[0]);\r\n    }\r\n}\r\n", "import { Tools } from \"@babylonjs/core/Misc/tools\";\r\nimport { Matrix, TmpVectors, Vector3 } from \"@babylonjs/core/Maths/math.vector\";\r\n\r\nimport { Container3D } from \"./container3D\";\r\n\r\n/**\r\n * Class used to create a stack panel in 3D on XY plane\r\n */\r\nexport class StackPanel3D extends Container3D {\r\n    private _isVertical = false;\r\n\r\n    /**\r\n     * Gets or sets a boolean indicating if the stack panel is vertical or horizontal (horizontal by default)\r\n     */\r\n    public get isVertical(): boolean {\r\n        return this._isVertical;\r\n    }\r\n\r\n    public set isVertical(value: boolean) {\r\n        if (this._isVertical === value) {\r\n            return;\r\n        }\r\n\r\n        this._isVertical = value;\r\n\r\n        Tools.SetImmediate(() => {\r\n            this._arrangeChildren();\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the distance between elements\r\n     */\r\n    public margin = 0.1;\r\n\r\n    /**\r\n     * Creates new StackPanel\r\n     * @param isVertical\r\n     */\r\n    public constructor(isVertical = false) {\r\n        super();\r\n\r\n        this._isVertical = isVertical;\r\n    }\r\n\r\n    protected _arrangeChildren() {\r\n        let width = 0;\r\n        let height = 0;\r\n        let controlCount = 0;\r\n        let extendSizes = [];\r\n\r\n        let currentInverseWorld = Matrix.Invert(this.node!.computeWorldMatrix(true));\r\n\r\n        // Measure\r\n        for (var child of this._children) {\r\n            if (!child.mesh) {\r\n                continue;\r\n            }\r\n\r\n            controlCount++;\r\n            child.mesh.computeWorldMatrix(true);\r\n            child.mesh.getWorldMatrix().multiplyToRef(currentInverseWorld, TmpVectors.Matrix[0]);\r\n\r\n            let boundingBox = child.mesh.getBoundingInfo().boundingBox;\r\n            let extendSize = Vector3.TransformNormal(boundingBox.extendSize, TmpVectors.Matrix[0]);\r\n            extendSizes.push(extendSize);\r\n\r\n            if (this._isVertical) {\r\n                height += extendSize.y;\r\n            } else {\r\n                width += extendSize.x;\r\n            }\r\n        }\r\n\r\n        if (this._isVertical) {\r\n            height += (controlCount - 1) * this.margin / 2;\r\n        } else {\r\n            width += (controlCount - 1) * this.margin / 2;\r\n        }\r\n\r\n        // Arrange\r\n        let offset: number;\r\n        if (this._isVertical) {\r\n            offset = -height;\r\n        } else {\r\n            offset = -width;\r\n        }\r\n\r\n        let index = 0;\r\n        for (var child of this._children) {\r\n            if (!child.mesh) {\r\n                continue;\r\n            }\r\n            controlCount--;\r\n            let extendSize = extendSizes[index++];\r\n\r\n            if (this._isVertical) {\r\n                child.position.y = offset + extendSize.y;\r\n                child.position.x = 0;\r\n                offset += extendSize.y * 2;\r\n            } else {\r\n                child.position.x = offset + extendSize.x;\r\n                child.position.y = 0;\r\n                offset += extendSize.x * 2;\r\n            }\r\n\r\n            offset += (controlCount > 0 ? this.margin : 0);\r\n        }\r\n    }\r\n}\r\n", "import { Nullable } from \"@babylonjs/core/types\";\r\nimport { Observable, Observer } from \"@babylonjs/core/Misc/observable\";\r\nimport { Vector3 } from \"@babylonjs/core/Maths/math.vector\";\r\nimport { PointerInfo, PointerEventTypes } from '@babylonjs/core/Events/pointerEvents';\r\nimport { Material } from \"@babylonjs/core/Materials/material\";\r\nimport { HemisphericLight } from \"@babylonjs/core/Lights/hemisphericLight\";\r\nimport { AbstractMesh } from \"@babylonjs/core/Meshes/abstractMesh\";\r\nimport { UtilityLayerRenderer } from \"@babylonjs/core/Rendering/utilityLayerRenderer\";\r\nimport { EngineStore } from \"@babylonjs/core/Engines/engineStore\";\r\nimport { IDisposable, Scene } from \"@babylonjs/core/scene\";\r\n\r\nimport { Container3D } from \"./controls/container3D\";\r\nimport { Control3D } from \"./controls/control3D\";\r\n\r\n/**\r\n * Class used to manage 3D user interface\r\n * @see https://doc.babylonjs.com/how_to/gui3d\r\n */\r\nexport class GUI3DManager implements IDisposable {\r\n    private _scene: Scene;\r\n    private _sceneDisposeObserver: Nullable<Observer<Scene>>;\r\n    private _utilityLayer: Nullable<UtilityLayerRenderer>;\r\n    private _rootContainer: Container3D;\r\n    private _pointerObserver: Nullable<Observer<PointerInfo>>;\r\n    private _pointerOutObserver: Nullable<Observer<number>>;\r\n    /** @hidden */\r\n    public _lastPickedControl: Control3D;\r\n    /** @hidden */\r\n    public _lastControlOver: { [pointerId: number]: Control3D } = {};\r\n    /** @hidden */\r\n    public _lastControlDown: { [pointerId: number]: Control3D } = {};\r\n\r\n    /**\r\n     * Observable raised when the point picked by the pointer events changed\r\n     */\r\n    public onPickedPointChangedObservable = new Observable<Nullable<Vector3>>();\r\n\r\n    // Shared resources\r\n    /** @hidden */\r\n    public _sharedMaterials: { [key: string]: Material } = {};\r\n\r\n    /** Gets the hosting scene */\r\n    public get scene(): Scene {\r\n        return this._scene;\r\n    }\r\n\r\n    /** Gets associated utility layer */\r\n    public get utilityLayer(): Nullable<UtilityLayerRenderer> {\r\n        return this._utilityLayer;\r\n    }\r\n\r\n    /**\r\n     * Creates a new GUI3DManager\r\n     * @param scene\r\n     */\r\n    public constructor(scene?: Scene) {\r\n        this._scene = scene || EngineStore.LastCreatedScene!;\r\n        this._sceneDisposeObserver = this._scene.onDisposeObservable.add(() => {\r\n            this._sceneDisposeObserver = null;\r\n            this._utilityLayer = null;\r\n            this.dispose();\r\n        });\r\n\r\n        this._utilityLayer = new UtilityLayerRenderer(this._scene);\r\n        this._utilityLayer.onlyCheckPointerDownEvents = false;\r\n        this._utilityLayer.pickUtilitySceneFirst = false;\r\n        this._utilityLayer.mainSceneTrackerPredicate = (mesh: Nullable<AbstractMesh>) => {\r\n            return mesh && mesh.metadata && mesh.metadata._node;\r\n        };\r\n\r\n        // Root\r\n        this._rootContainer = new Container3D(\"RootContainer\");\r\n        this._rootContainer._host = this;\r\n        let utilityLayerScene = this._utilityLayer.utilityLayerScene;\r\n\r\n        // Events\r\n        this._pointerOutObserver = this._utilityLayer.onPointerOutObservable.add((pointerId) => {\r\n            this._handlePointerOut(pointerId, true);\r\n        });\r\n\r\n        this._pointerObserver = utilityLayerScene.onPointerObservable.add((pi, state) => {\r\n            this._doPicking(pi);\r\n        });\r\n\r\n        // Scene\r\n        this._utilityLayer.utilityLayerScene.autoClear = false;\r\n        this._utilityLayer.utilityLayerScene.autoClearDepthAndStencil = false;\r\n        new HemisphericLight(\"hemi\", Vector3.Up(), this._utilityLayer.utilityLayerScene);\r\n    }\r\n\r\n    private _handlePointerOut(pointerId: number, isPointerUp: boolean) {\r\n        var previousControlOver = this._lastControlOver[pointerId];\r\n        if (previousControlOver) {\r\n            previousControlOver._onPointerOut(previousControlOver);\r\n            delete this._lastControlOver[pointerId];\r\n        }\r\n\r\n        if (isPointerUp) {\r\n            if (this._lastControlDown[pointerId]) {\r\n                this._lastControlDown[pointerId].forcePointerUp();\r\n                delete this._lastControlDown[pointerId];\r\n            }\r\n        }\r\n\r\n        this.onPickedPointChangedObservable.notifyObservers(null);\r\n    }\r\n\r\n    private _doPicking(pi: PointerInfo): boolean {\r\n        if (!this._utilityLayer || !this._utilityLayer.shouldRender || !this._utilityLayer.utilityLayerScene.activeCamera) {\r\n            return false;\r\n        }\r\n\r\n        let pointerEvent = <PointerEvent>(pi.event);\r\n\r\n        let pointerId = pointerEvent.pointerId || 0;\r\n        let buttonIndex = pointerEvent.button;\r\n\r\n        let pickingInfo = pi.pickInfo;\r\n        if (!pickingInfo || !pickingInfo.hit) {\r\n            this._handlePointerOut(pointerId, pi.type === PointerEventTypes.POINTERUP);\r\n            return false;\r\n        }\r\n\r\n        let control = <Control3D>(pickingInfo.pickedMesh!.metadata);\r\n        if (pickingInfo.pickedPoint) {\r\n            this.onPickedPointChangedObservable.notifyObservers(pickingInfo.pickedPoint);\r\n        }\r\n\r\n        if (!control._processObservables(pi.type, pickingInfo.pickedPoint!, pointerId, buttonIndex)) {\r\n\r\n            if (pi.type === PointerEventTypes.POINTERMOVE) {\r\n                if (this._lastControlOver[pointerId]) {\r\n                    this._lastControlOver[pointerId]._onPointerOut(this._lastControlOver[pointerId]);\r\n                }\r\n\r\n                delete this._lastControlOver[pointerId];\r\n            }\r\n        }\r\n\r\n        if (pi.type === PointerEventTypes.POINTERUP) {\r\n            if (this._lastControlDown[pointerEvent.pointerId]) {\r\n                this._lastControlDown[pointerEvent.pointerId].forcePointerUp();\r\n                delete this._lastControlDown[pointerEvent.pointerId];\r\n            }\r\n\r\n            if (pointerEvent.pointerType === \"touch\") {\r\n                this._handlePointerOut(pointerId, false);\r\n            }\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * Gets the root container\r\n     */\r\n    public get rootContainer(): Container3D {\r\n        return this._rootContainer;\r\n    }\r\n\r\n    /**\r\n     * Gets a boolean indicating if the given control is in the root child list\r\n     * @param control defines the control to check\r\n     * @returns true if the control is in the root child list\r\n     */\r\n    public containsControl(control: Control3D): boolean {\r\n        return this._rootContainer.containsControl(control);\r\n    }\r\n\r\n    /**\r\n     * Adds a control to the root child list\r\n     * @param control defines the control to add\r\n     * @returns the current manager\r\n     */\r\n    public addControl(control: Control3D): GUI3DManager {\r\n        this._rootContainer.addControl(control);\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Removes a control from the root child list\r\n     * @param control defines the control to remove\r\n     * @returns the current container\r\n     */\r\n    public removeControl(control: Control3D): GUI3DManager {\r\n        this._rootContainer.removeControl(control);\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Releases all associated resources\r\n     */\r\n    public dispose() {\r\n        this._rootContainer.dispose();\r\n\r\n        for (var materialName in this._sharedMaterials) {\r\n            if (!this._sharedMaterials.hasOwnProperty(materialName)) {\r\n                continue;\r\n            }\r\n\r\n            this._sharedMaterials[materialName].dispose();\r\n        }\r\n\r\n        this._sharedMaterials = {};\r\n\r\n        if (this._pointerOutObserver && this._utilityLayer) {\r\n            this._utilityLayer.onPointerOutObservable.remove(this._pointerOutObserver);\r\n            this._pointerOutObserver = null;\r\n        }\r\n\r\n        this.onPickedPointChangedObservable.clear();\r\n\r\n        let utilityLayerScene = this._utilityLayer ? this._utilityLayer.utilityLayerScene : null;\r\n\r\n        if (utilityLayerScene) {\r\n            if (this._pointerObserver) {\r\n                utilityLayerScene.onPointerObservable.remove(this._pointerObserver);\r\n                this._pointerObserver = null;\r\n            }\r\n        }\r\n        if (this._scene) {\r\n            if (this._sceneDisposeObserver) {\r\n                this._scene.onDisposeObservable.remove(this._sceneDisposeObserver);\r\n                this._sceneDisposeObserver = null;\r\n            }\r\n        }\r\n\r\n        if (this._utilityLayer) {\r\n            this._utilityLayer.dispose();\r\n        }\r\n    }\r\n}\r\n"],
  "mappings": "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",
  "names": []
}
